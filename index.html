<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ„μΈλ€ μ¶”μ²λ„μ„ 100μ„ : μΈν„°λ™ν‹°λΈ κ°€μ΄λ“</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm Neutrals with Muted Teal/Slate Accents) -->
    <!-- Application Structure Plan: The application is designed as a single-page, scrollable journey based on the 5-step reading guide. This structure was chosen because it provides a clear, progressive path for beginner readers, which was the user's primary need. The user flow starts with a visual dashboard for a high-level overview, followed by navigation/filter controls, and then the main content area with book cards grouped by the 5 stages. This top-down structure (overview -> tools -> details) is intuitive and supports both passive browsing and active searching. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Distribution of books across 5 stages and original categories. Goal: Inform/Organize. Viz/Method: Two Chart.js charts (Doughnut for stages, Bar for categories) inside a collapsible accordion. Interaction: Tooltips on hover, expand/collapse accordion. Justification: Provides a quick, digestible summary of the list's composition, making it less intimidating and reducing initial screen clutter.
        - Report Info: Full book list (title, author, publisher, guide). Goal: Explore/Inform. Viz/Method: HTML/Tailwind CSS cards in a grid. Interaction: Cards are filterable by search and multiple dropdowns. Clicking a card opens a modal with detailed info and memo functionality. Justification: Cards are visually engaging. The modal provides detailed context and personal record-keeping without cluttering the main view.
        - Library/Method: Chart.js for canvas-based charts, Vanilla JS for all interactions (search, filtering, modal controls, memo CRUD operations, accordion).
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans KR', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 450px; margin-left: auto; margin-right: auto; height: 320px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .modal-enter { transform: scale(0.9); opacity: 0; }
        .modal-enter-active { transform: scale(1); opacity: 1; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .modal-leave-active { transform: scale(0.9); opacity: 0; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .backdrop-enter { opacity: 0; }
        .backdrop-enter-active { opacity: 1; transition: opacity 0.2s ease-in-out; }
        .backdrop-leave-active { opacity: 0; transition: opacity 0.2s ease-in-out; }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .accordion-content.open {
            max-height: 1000px;
        }
        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }
        .status-filter.active {
            background-color: #ccfbf1;
            border-color: #14b8a6;
        }
        .book-card:hover {
            background-color: white;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        /* κ΄€λ¦¬μ λ„μ„λ©λ΅ ν…μ΄λΈ” ν–‰ hover ν¨κ³Ό */
        #admin-book-list tr:hover {
            background-color: #e0f7fa !important;
            transition: background 0.2s;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div id="app">
        <header class="bg-white shadow-md sticky top-0 z-30">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-3">
                    <h1 class="text-xl md:text-2xl font-bold text-teal-800 cursor-pointer" id="home-btn">&nbsp;&nbsp;&nbsp;&nbsp;μ„μΈλ€μ¶”μ²λ„μ„100</h1>
                    <nav class="hidden md:flex items-center gap-4">
                        <a href="#statistics-accordion" class="text-stone-600 hover:text-teal-700">λ…μ„ ν„ν™©</a>
                        <a href="#dashboard-accordion" class="text-stone-600 hover:text-teal-700">μΈν¬κ·Έλν”½</a>
                        <button id="admin-settings-btn" class="text-stone-600 hover:text-teal-700" title="λ„μ„ λ©λ΅ κ΄€λ¦¬">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </button>
                        
                        <button id="add-new-book-btn-header" class="bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 transition text-sm">μƒ μ±… μ¶”κ°€</button>
                        
                    </nav>
                    <div class="md:hidden">
                        <button id="hamburger-btn">
                            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                        </button>
                    </div>
                </div>
            </div>
             <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-stone-200 p-4 space-y-4">
                <a href="#statistics-accordion" class="mobile-nav-link block py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">λ…μ„ ν„ν™©</a>
                <a href="#dashboard-accordion" class="mobile-nav-link block py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">μΈν¬κ·Έλν”½</a>
                <button id="trash-view-btn-mobile" class="w-full text-left py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">ν΄μ§€ν†µ</button>
                <div id="mobile-filter-area" class="space-y-4 border-t pt-4">
                    <!-- Mobile filters will be injected here by JS -->
                </div>
            </div>
        </header>

        <main class="container mx-auto p-4 md:p-8">
            <div id="main-content-view">
                <section id="explorer" class="bg-white p-6 rounded-xl shadow-md mb-12">
                     <div class="flex flex-col md:flex-row gap-4 mb-4">
                        <div class="relative flex-grow">
                            <input type="text" id="search-input" placeholder="λ„μ„λ… λλ” μ €μλ΅ κ²€μƒ‰..." class="w-full p-3 pl-10 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-stone-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" /></svg>
                            </div>
                        </div>
                        <button id="search-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition flex items-center justify-center gap-2">κ²€μƒ‰</button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <select id="source-filter-dropdown" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500"></select>
                        </div>
                        <div>
                            <select id="category-filter-dropdown" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500"></select>
                        </div>
                        <div>
                            <select id="stage-filter-dropdown" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500"></select>
                        </div>
                    </div>
                </section>

                <section id="statistics-accordion" class="mb-12 bg-white p-6 rounded-xl shadow-md scroll-mt-20">
                    <div id="statistics-toggle" class="flex justify-between items-center cursor-pointer">
                        <h2 class="text-2xl font-semibold text-stone-700">λ‚μ λ…μ„ ν„ν™©</h2>
                        <svg id="statistics-arrow" class="w-6 h-6 transition-transform rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                    <div id="statistics-content" class="accordion-content open">
                        <div class="space-y-4 mt-6">
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-base font-medium text-teal-700">μ™„λ… μ§„ν–‰λ¥ </span>
                                    <span id="progress-text" class="text-sm font-medium text-teal-700">0 / 65</span>
                                </div>
                                <div class="w-full bg-stone-200 rounded-full h-2.5">
                                    <div id="progress-bar" class="bg-teal-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-2 md:gap-4 text-center pt-2">
                                <div id="status-filter-completed" class="status-filter p-2 rounded-lg cursor-pointer border-2 border-transparent hover:bg-teal-50">
                                    <p class="text-2xl font-bold text-stone-800" id="completed-count">0</p>
                                    <p class="text-stone-500 text-sm">μ½μ€ μ±…</p>
                                </div>
                                <div id="status-filter-reading" class="status-filter p-2 rounded-lg cursor-pointer border-2 border-transparent hover:bg-teal-50">
                                    <p class="text-2xl font-bold text-stone-800" id="reading-count">0</p>
                                    <p class="text-stone-500 text-sm">μ½λ” μ¤‘</p>
                                </div>
                                <div id="status-filter-tbr" class="status-filter p-2 rounded-lg cursor-pointer border-2 border-transparent hover:bg-teal-50">
                                    <p class="text-2xl font-bold text-stone-800" id="tbr-count">65</p>
                                    <p class="text-stone-500 text-sm">μ½μ„ μ±…</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="dashboard-accordion" class="mb-12 bg-white p-6 rounded-xl shadow-md scroll-mt-20">
                    <div id="dashboard-toggle" class="flex justify-between items-center cursor-pointer">
                        <h2 class="text-2xl font-semibold text-stone-700">μΈν¬κ·Έλν”½ μ”μ•½</h2>
                        <svg id="dashboard-arrow" class="w-6 h-6 transition-transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                    <div id="dashboard-content" class="accordion-content">
                         <p class="max-w-3xl text-stone-600 leading-relaxed mt-4">
                            μ„μΈλ€ν•™κµ μ¶”μ²λ„μ„ 100μ„ μ€ λ‹¨μν• λ©λ΅μ„ λ„μ–΄, μ„Έμƒμ„ μ΄ν•΄ν•λ” μ§€νμ κΈΈμ„ μ•λ‚΄ν•λ” μ§€λ„μ…λ‹λ‹¤. μ΄ κ°€μ΄λ“λ” λ…μ„μ— μµμ™ν•μ§€ μ•μ€ λ¶„λ“¤λ„ μ‰½κ³  μ¦κ²κ² κ³ μ „μ μ„Έκ³„μ— μ…λ¬Έν•  μ μλ„λ΅ '5λ‹¨κ³„ λ…μ„ μ—¬μ •'μΌλ΅ λ©λ΅μ„ μ¬κµ¬μ„±ν–μµλ‹λ‹¤. μ•„λμ ν†µκ³„μ™€ λ‹¨κ³„λ³„ κ°€μ΄λ“λ¥Ό ν†µν•΄ μμ‹ λ§μ λ…μ„ κ²½λ΅λ¥Ό μ„¤κ³„ν•΄ λ³΄μ„Έμ”.
                        </p>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-6">
                            <div class="p-2">
                                <h3 class="text-xl font-semibold text-center mb-4 text-teal-800">5λ‹¨κ³„ μ—¬μ • λ¶„ν¬</h3>
                                <div class="chart-container">
                                    <canvas id="stageChart"></canvas>
                                </div>
                            </div>
                            <div class="p-2">
                                <h3 class="text-xl font-semibold text-center mb-4 text-teal-800">λ¶„μ•Όλ³„ λ„μ„ λ¶„ν¬</h3>
                                <div class="chart-container">
                                    <canvas id="categoryChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <div id="book-list" class="space-y-8">
                </div>
            </div>

            <div id="trash-view" class="hidden">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold text-stone-700 mb-4">ν΄μ§€ν†µ</h2>
                    <div id="trash-list" class="space-y-3"></div>
                </div>
            </div>

            <!-- λ„μ„λ©λ΅κ΄€λ¦¬ νμ΄μ§€ μ¶”κ°€ -->
            <div id="admin-view" class="hidden container mx-auto my-12">
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4">
                        <h2 class="text-3xl font-bold text-stone-800">λ„μ„λ©λ΅κ΄€λ¦¬</h2>
                        <div class="flex flex-1 justify-end items-center gap-2">
                            <!-- μ¶μ² λ“λ΅­λ‹¤μ΄ -->
                            <select id="admin-source-dropdown" class="border border-stone-300 rounded-lg px-3 py-2 w-40 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                <option value="All">μ¶μ²: μ „μ²΄</option>
                                <option value="SNU">μ„μΈλ€ μ¶”μ²</option>
                                <option value="MyBooks">λ‚΄κ°€ μ¶”κ°€ν• μ±…</option>
                            </select>
                            <!-- κ²€μƒ‰ μ…λ ¥λ°•μ¤/λ²„νΌ -->
                            <input type="text" id="admin-search-input" placeholder="μ λ© λλ” μ €μ κ²€μƒ‰" class="border border-stone-300 rounded-lg px-3 py-2 w-56 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" />
                            <button id="admin-search-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition">κ²€μƒ‰</button>
                            <!-- μƒ μ±… μ¶”κ°€ λ²„νΌ -->
                            <button id="add-new-book-btn-admin" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">μƒ μ±… μ¶”κ°€</button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-stone-700">
                            <thead class="bg-stone-100">
                                <tr>
                                    <th class="px-3 py-2 font-semibold">ID</th>
                                    <th class="px-3 py-2 font-semibold">μ λ©</th>
                                    <th class="px-3 py-2 font-semibold">μ €μ</th>
                                    <th class="px-3 py-2 font-semibold">λ‹¨κ³„</th>
                                    <th class="px-3 py-2 font-semibold">λ¶„μ•Ό</th>
                                    <th class="px-3 py-2 font-semibold">μ¶νμ‚¬</th>
                                    <th class="px-3 py-2 font-semibold">κ΄€λ¦¬</th>
                                </tr>
                            </thead>
                            <tbody id="admin-book-list">
                                <!-- JSλ΅ λ„μ„ λ©λ΅μ΄ μ±„μ›μ§‘λ‹λ‹¤ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="text-center py-8 text-stone-500">
            <p>&copy; 2024 Interactive Reading Guide. All rights reserved.</p>
        </footer>

        <!-- Details Modal -->
        <div id="modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-40 hidden"></div>
        <div id="modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col">
                <div class="p-6 md:p-8 overflow-y-auto">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <p id="modal-stage" class="text-sm font-bold text-teal-600"></p>
                            <h2 id="modal-title" class="text-2xl font-bold text-stone-800 mt-1"></h2>
                            <p id="modal-author" class="text-lg text-stone-600 mt-1"></p>
                        </div>
                        <button id="modal-close-btn" class="text-stone-400 hover:text-stone-700 transition">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="border-t border-stone-200 pt-4">
                        <h3 class="font-semibold text-stone-700 mb-2">π“– μ½κΈ° κ°€μ΄λ“</h3>
                        <p id="modal-guide" class="text-stone-600 leading-relaxed"></p>
                        <p id="modal-publisher" class="text-sm text-stone-500 mt-6 text-right"></p>
                    </div>
                    <div class="mt-6 border-t border-stone-200 pt-4">
                        <h3 class="font-semibold text-stone-700 mb-3">λ…μ„ κΈ°λ΅</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="start-date" class="block text-sm font-medium text-stone-600">μ‹μ‘μΌ</label>
                                <input type="date" id="start-date" class="mt-1 block w-full rounded-md border-stone-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                            </div>
                            <div>
                                <label for="completion-date" class="block text-sm font-medium text-stone-600">μ™„λ£μΌ</label>
                                <input type="date" id="completion-date" class="mt-1 block w-full rounded-md border-stone-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                             <button id="delete-book-btn" class="px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition">ν΄μ§€ν†µμΌλ΅ λ³΄λ‚΄κΈ°</button>
                            <button id="save-dates-btn" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition">λ‚ μ§ μ €μ¥</button>
                        </div>
                    </div>
                    <div class="mt-6 border-t border-stone-200 pt-4">
                        <h3 class="font-semibold text-stone-700 mb-3">λ‚μ λ…μ„ λ…ΈνΈ π“</h3>
                        <div id="memo-list" class="space-y-3 mb-4 max-h-48 overflow-y-auto pr-2">
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="memo-input" placeholder="μ—¬κΈ°μ— μƒκ°μ„ λ‚¨κ²¨λ³΄μ„Έμ”..." class="flex-grow p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500">
                            <button id="add-memo-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition">μ¶”κ°€</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add/Edit Book Modal -->
        <div id="add-book-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-40 hidden"></div>
        <div id="add-book-modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="add-book-modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col">
                <div class="p-6 md:p-8 overflow-y-auto">
                    <div class="flex justify-between items-start mb-6">
                        <h2 id="add-book-modal-title" class="text-2xl font-bold text-stone-800">μƒ μ±… μ¶”κ°€ν•κΈ°</h2>
                        <button id="add-book-modal-close-btn" class="text-stone-400 hover:text-stone-700 transition">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-stone-700">κµ¬λ¶„</label>
                            <div class="mt-2 flex gap-4">
                                <label class="flex items-center"><input type="radio" name="book-type" value="snu" class="mr-2 text-teal-600 focus:ring-teal-500">μ„μΈλ€ μ¶”μ²λ„μ„</label>
                                <label class="flex items-center"><input type="radio" name="book-type" value="my" class="mr-2 text-teal-600 focus:ring-teal-500" checked>λ‚΄ μ±…</label>
                            </div>
                        </div>
                        <div id="new-book-stage-container" class="hidden">
                            <label for="new-book-stage" class="block text-sm font-medium text-stone-700">λ‹¨κ³„ (1-5)</label>
                            <select id="new-book-stage" class="mt-1 block w-full rounded-md border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="1">1λ‹¨κ³„: λ¬Έν•™μ μ²</option>
                                <option value="2">2λ‹¨κ³„: μ—­μ‚¬ μ† μΈλ¬Ό</option>
                                <option value="3">3λ‹¨κ³„: μ‚¬ν λ³΄κΈ°</option>
                                <option value="4">4λ‹¨κ³„: μƒκ°μ λΏλ¦¬</option>
                                <option value="5">5λ‹¨κ³„: κ³Όν•™μΌλ΅ λ³΄κΈ°</option>
                            </select>
                        </div>
                        <div>
                            <label for="new-book-title" class="block text-sm font-medium text-stone-700">μ λ©</label>
                            <input type="text" id="new-book-title" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" required>
                        </div>
                        <div>
                            <label for="new-book-author" class="block text-sm font-medium text-stone-700">μ €μ</label>
                            <input type="text" id="new-book-author" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" required>
                        </div>
                        <div>
                            <label for="new-book-publisher" class="block text-sm font-medium text-stone-700">μ¶νμ‚¬</label>
                            <input type="text" id="new-book-publisher" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2">
                        </div>
                        <div>
                            <div class="flex justify-between items-center">
                                <label for="new-book-category-select" class="block text-sm font-medium text-stone-700">λ¶„μ•Ό</label>
                                <button id="manage-categories-btn" class="text-xs text-blue-600 hover:underline">λ¶„μ•Ό κ΄€λ¦¬</button>
                            </div>
                            <div class="flex gap-2 mt-1">
                                <select id="new-book-category-select" class="flex-grow w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2"></select>
                                <input type="text" id="new-book-category-input" class="hidden w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" placeholder="μƒ λ¶„μ•Ό μ…λ ¥">
                            </div>
                        </div>
                        <div>
                            <label for="new-book-guide" class="block text-sm font-medium text-stone-700">κ°„λ‹¨ν• μ„¤λ…/λ©”λ¨</label>
                            <textarea id="new-book-guide" rows="3" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2"></textarea>
                        </div>
                        <div>
                            <label for="new-book-cover" class="block text-sm font-medium text-stone-700">μ±… ν‘μ§€ μ΄λ―Έμ§€(URL)</label>
                            <input type="url" id="new-book-cover" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" placeholder="https://example.com/cover.jpg">
                            <p class="text-xs text-stone-400 mt-1">μ΄λ―Έμ§€ μ£Όμ†(URL) μ…λ ¥. (μ§μ ‘ μ—…λ΅λ“λ” μ§€μ›ν•μ§€ μ•μ)</p>
                        </div>
                    </div>
                    <div class="mt-8 flex justify-end gap-3">
                        <button id="add-book-cancel-btn" class="px-4 py-2 bg-stone-200 text-stone-700 rounded-lg hover:bg-stone-300 transition">μ·¨μ†</button>
                        <button id="add-book-save-btn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">μ €μ¥ν•κΈ°</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Management Modal -->
        <div id="category-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden"></div>
        <div id="category-modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="category-modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold">λ¶„μ•Ό κ΄€λ¦¬</h2>
                        <button id="category-modal-close-btn" class="text-2xl font-bold text-stone-500 hover:text-stone-800">&times;</button>
                    </div>
                    <div id="category-list" class="space-y-2 max-h-64 overflow-y-auto"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const initialBookData = [
            { id: 1, stage: 1, title: 'ν”Όλ…Έν‚¤μ¤μ λ¨ν—', author: 'μΉ΄λ¥Όλ΅ μ½λ΅λ””', publisher: 'λΉ„λ£΅μ† (μ–΄μ¤λ³Έ)', category: 'μ™Έκµ­λ¬Έν•™', guide: 'λ‹¨μν• λ™ν™”λ¥Ό λ„μ–΄ μΈκ°„μ μ„±μ¥κ³Ό μ„ νƒμ— λ€ν• κΉμ€ μ„±μ°°μ„ λ‹΄κ³  μμ–΄ μ–΄λ¥Έμ—κ²λ„ ν° μΈλ¦Όμ„ μ¤λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 2, stage: 1, title: 'ν—μƒμ „', author: 'λ°•μ§€μ›', publisher: 'μ‚Όμ„±μ¶νμ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: 'μ§§μ§€λ§ κ°•λ ¬ν• ν’μμ™€ λΉ„νμ΄ λ‹΄κΈ΄ ν•λ¬Έ λ‹¨νΈμ†μ„¤μ…λ‹λ‹¤. μ΅°μ„  ν›„κΈ° μ‚¬νμ λ¨μµκ³Ό μ‹¤ν•™μ‚¬μƒμ„ μ—Ώλ³Ό μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 3, stage: 1, title: 'μ¶ν–¥μ „', author: 'μ‘μ λ―Έμƒ', publisher: 'λ―Όμμ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: 'ν•κµ­μΈμ΄ κ°€μ¥ μ‚¬λ‘ν•λ” κ³ μ „ μ†μ„¤ μ¤‘ ν•λ‚λ΅, μ‹ λ¶„μ„ λ›°μ–΄λ„λ” μ‚¬λ‘κ³Ό μ‚¬νμ— λ€ν• μ €ν•­ μ •μ‹ μ„ λλ‚„ μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 4, stage: 1, title: 'κµ¬μ΄λ½', author: 'κΉ€λ§μ¤‘', publisher: 'λ―Όμμ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: 'μΈμƒμ λ§μ—†μκ³Ό κΏμ μλ―Έλ¥Ό ν™μƒμ μΈ κµ¬μ΅°λ΅ ν’€μ–΄λ‚Έ κ³ μ „ μ†μ„¤μ μ •μμ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 5, stage: 1, title: 'ν•„κ²½μ‚¬ λ°”ν‹€λΉ„', author: 'ν—λ¨Ό λ©λΉ', publisher: 'λ¬Έν•™λ™λ„¤', category: 'μ™Έκµ­λ¬Έν•™', guide: '"μ• ν•λ” νΈμ„ νƒν•κ² μµλ‹λ‹¤"λΌλ” μ λ…ν• λ¬Έμ¥μΌλ΅ μλ³Έμ£Όμ μ‚¬ν μ† μΈκ°„ μ†μ™Έ λ¬Έμ λ¥Ό λ‚ μΉ΄λ΅­κ² νκ³ λ“λ” μ¤‘νΈμ†μ„¤μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 6, stage: 1, title: 'μƒλ΅μ', author: 'μ‹¬ν›', publisher: 'μ†λ‹΄μ¶νμ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: '1930λ…„λ€ λ†μ΄κ³„λ½μ΄λ™μ„ λ°°κ²½μΌλ΅ μ μ€μ΄λ“¤μ μ΄μƒκ³Ό ν—μ‹ μ„ κ·Έλ¦° κ°λ™μ μΈ μ΄μ•ΌκΈ°μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 7, stage: 1, title: 'μ„¤κµ­', author: 'κ°€μ™€λ°”νƒ€ μ•Όμ¤λ‚λ¦¬', publisher: 'λ―Όμμ‚¬', category: 'μ™Έκµ­λ¬Έν•™', guide: 'λ…Έλ²¨λ¬Έν•™μƒ μμƒμ‘μΌλ΅, ν—λ¬΄μ™€ νƒλ―Έμ μ„Έκ³„λ¥Ό κ°κ°μ μ΄κ³  μ•„λ¦„λ‹¤μ΄ λ¬Έμ²΄λ΅ κ·Έλ ¤λ‚Έ μ‘ν’μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 8, stage: 1, title: 'μ΄λ°©μΈ', author: 'μ•λ² λ¥΄ μΉ΄λ®', publisher: 'λ―Όμμ‚¬', category: 'μ™Έκµ­λ¬Έν•™', guide: 'λ¶€μ΅°λ¦¬ν• μ„Έμƒ μ†μ—μ„ μ΄λ°©μΈμΌλ΅ μ‚΄μ•„κ°€λ” ν• μΈκ°„μ λ¨μµμ„ ν†µν•΄ μ‹¤μ΅΄μ μλ―Έλ¥Ό λ¬»λ” ν„λ€ λ¬Έν•™μ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 9, stage: 1, title: 'κ΄€μ΄μν•„', author: 'μ΄λ¬Έκµ¬', publisher: 'μ°½λΉ„', category: 'ν•κµ­λ¬Έν•™', guide: 'μ‚¬λΌμ Έκ°€λ” λ†μ΄ κ³µλ™μ²΄μ λ¨μµμ„ λ”°λ»ν•κ³  ν•΄ν•™μ μΈ μ–Έμ–΄λ΅ λ‹΄μ•„λ‚Έ μμ „μ  μ†μ„¤μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 10, stage: 1, title: 'κ³ μ „μ‹κ°€μ„ μ§‘', author: 'νΈμ§‘λ¶€ μ—®μ', publisher: 'μ°½λΉ„', category: 'ν•κµ­λ¬Έν•™', guide: 'ν–¥κ°€, κ³ λ ¤κ°€μ”, μ‹μ΅° λ“± μ°λ¦¬ κ³ μ „ μ‹κ°€μ μ•„λ¦„λ‹¤μ›€μ„ λλ‚„ μ μλ” μ…λ¬Έμ„μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 11, stage: 1, title: 'μ •μ§€μ© μ „μ§‘', author: 'μ •μ§€μ©', publisher: 'λ¬Έν•™κ³Όμ§€μ„±μ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: 'ν•κµ­ ν„λ€μ‹μ κ°κ°μ μΈ μ–Έμ–΄λ¥Ό κ°μ²™ν• μ •μ§€μ© μ‹μΈμ μ‹ μ„Έκ³„λ¥Ό λ§λ‚  μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 12, stage: 1, title: 'λ°±μ„ μ‹ μ „μ§‘', author: 'λ°±μ„', publisher: 'μ°½λΉ„', category: 'ν•κµ­λ¬Έν•™', guide: 'ν† μ†μ μΈ μ–Έμ–΄μ™€ μ• ν‹‹ν• μ •μ„λ΅ λ§μ€ μ‚¬λ‘μ„ λ°›λ” λ°±μ„ μ‹μΈμ μ‹λ¥Ό μ΄λ§λΌν• μ‹μ§‘μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 13, stage: 1, title: 'κ΄‘μ¥', author: 'μµμΈν›', publisher: 'λ¬Έν•™κ³Όμ§€μ„±μ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: 'λ‚¨λ¶ λ¶„λ‹¨μ λΉ„κ·Ή μ†μ—μ„ μ§„μ •ν• μ΄λ…κ³Ό μ‚¶μ κ³µκ°„μ„ μ°Ύμ•„ κ³ λ‡ν•λ” μ§€μ‹μΈμ λ¨μµμ„ κ·Έλ Έμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 14, stage: 1, title: 'μ£„μ™€ λ²', author: 'ν‘λ„λ¥΄ λ„μ¤ν† μ™μ¤ν‚¤', publisher: 'λ―Όμμ‚¬', category: 'μ™Έκµ­λ¬Έν•™', guide: 'κ°€λ‚ν• μ²­λ…„μ λ²”μ£„μ™€ μ‹¬λ¦¬λ¥Ό ν†µν•΄ μ£„μ™€ κµ¬μ›, μΈκ°„ λ‚΄λ©΄μ μ„ κ³Ό μ•…μ„ κΉμ΄ νƒκµ¬ν•λ” λ€μ‘μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 15, stage: 1, title: 'λν‚¤νΈν…', author: 'λ―Έκ²” λ° μ„Έλ¥΄λ°ν…μ¤', publisher: 'μ—΄λ¦°μ±…λ“¤', category: 'μ™Έκµ­λ¬Έν•™', guide: 'ν„μ‹¤κ³Ό μ΄μƒμ κ΄΄λ¦¬ μ†μ—μ„λ„ μμ‹ λ§μ μ •μλ¥Ό μ¶”κµ¬ν•λ” κΈ°μ‚¬μ μ μΎν•κ³ λ„ μ¬ν” λ¨ν— μ΄μ•ΌκΈ°μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 16, stage: 1, title: 'ν† μ§€', author: 'λ°•κ²½λ¦¬', publisher: 'λ§λ΅λ‹μ—λ¶μ¤', category: 'ν•κµ­λ¬Έν•™', guide: 'κµ¬ν•λ§λ¶€ν„° ν•΄λ°©κΉμ§€, κ²©λ™μ ν•κµ­ κ·Όν„λ€μ‚¬λ¥Ό μ‚΄μ•„κ°„ λ―Όμ¤‘μ μ‚¶μ„ μ¥λ€ν•κ² κ·Έλ ¤λ‚Έ λ€ν•μ†μ„¤μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 17, stage: 1, title: 'μ…°μµμ¤ν”Όμ–΄ 4λ€ λΉ„κ·Ή', author: 'μλ¦¬μ—„ μ…°μµμ¤ν”Όμ–΄', publisher: 'λ―Όμμ‚¬', category: 'μ™Έκµ­λ¬Έν•™', guide: 'γ€ν–„λ¦Ώγ€, γ€μ¤μ…€λ΅γ€, γ€λ¦¬μ–΄μ™•γ€, γ€λ§¥λ² μ¤γ€. μΈκ°„μ μ•λ§, μ§ν¬, λ³µμ λ“± λ³΄νΈμ μΈ κ°μ •μ„ λ‹¤λ£¬ λ¶λ©Έμ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 18, stage: 1, title: 'νμ°μ¤νΈ', author: 'μ”ν• λ³Όν”„κ°• ν° κ΄΄ν…', publisher: 'λ―Όμμ‚¬', category: 'μ™Έκµ­λ¬Έν•™', guide: 'μ„ κ³Ό μ•…, μ§€μ‹κ³Ό κµ¬μ›μ λ¬Έμ λ¥Ό λ‹¤λ£¬ λ…μΌ λ¬Έν•™μ μµκ³  κ±Έμ‘μΌλ΅, ν‰μƒμ— κ±Έμ³ μ½μ–΄λ³Ό λ§ν• κ°€μΉκ°€ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 19, stage: 2, title: 'λ‚μ¤‘μΌκΈ°', author: 'μ΄μμ‹ ', publisher: 'λ―Όμμ‚¬', category: 'μ—­μ‚¬', guide: 'μ „μμ΄λΌλ” κ·Ήν• μƒν™© μ†μ—μ„ λ‚λΌλ¥Ό κµ¬ν• μμ›…μ μΈκ°„μ μΈ κ³ λ‡μ™€ λ¦¬λ”μ‹­μ„ μƒμƒν•κ² λλ‚„ μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 20, stage: 2, title: 'λ°±λ²”μΌμ§€', author: 'κΉ€κµ¬', publisher: 'λλ² κ°', category: 'μ—­μ‚¬', guide: 'λ…λ¦½μ„ μ„ν•΄ ν‰μƒμ„ λ°”μΉ κΉ€κµ¬ μ„ μƒμ μ‚¶μ„ ν†µν•΄ κ²©λ™μ κ·Όλ€μ‚¬μ™€ λ―Όμ΅±μ λ―Έλμ— λ€ν• κ³ λ―Όμ„ μ—Ώλ³Ό μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 21, stage: 2, title: 'ν•μ¤‘λ΅', author: 'νκ²½κ¶ ν™μ”¨', publisher: 'λ¬Έν•™λ™λ„¤', category: 'μ—­μ‚¬', guide: 'μ‚¬λ„μ„Έμμ λΉ„κ·Ήμ„ μ•„λ‚΄μ΄μ μ–΄λ¨Έλ‹μ μ‹μ„ μΌλ΅ κΈ°λ΅ν• κ¶μ¤‘λ¬Έν•™μ λ°±λ―Έλ΅, μ—­μ‚¬μ  μ‚¬κ±΄ μ΄λ©΄μ μΈκ°„ λ“λΌλ§λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 22, stage: 2, title: 'μ‚Όκµ­μ μ‚¬', author: 'μΌμ—°', publisher: 'λ―Όμμ‚¬', category: 'μ—­μ‚¬', guide: 'λ‹¨κµ° μ‹ ν™”λ¥Ό λΉ„λ΅―ν• μ°λ¦¬ κ³ λ€μ μ‹ ν™”μ™€ μ„¤ν™”κ°€ κ°€λ“ λ‹΄κ²¨ μμ–΄, γ€μ‚Όκµ­μ‚¬κΈ°γ€μ™€λ” λ‹¤λ¥Έ μ—­μ‚¬μ μ¬λ―Έλ¥Ό μ„ μ‚¬ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 23, stage: 2, title: 'μ‚Όκµ­μ‚¬κΈ°', author: 'κΉ€λ¶€μ‹', publisher: 'λ™μ•„μ¶ν', category: 'μ—­μ‚¬', guide: 'ν„μ΅΄ν•λ” κ°€μ¥ μ¤λλ μ°λ¦¬ μ—­μ‚¬μ„λ΅, κ³ κµ¬λ ¤, λ°±μ , μ‹ λΌμ μ—­μ‚¬λ¥Ό κµ­κ°€μ κ΄€μ μ—μ„ μ²΄κ³„μ μΌλ΅ μ •λ¦¬ν–μµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 24, stage: 2, title: 'ν•κµ­ν†µμ‚¬', author: 'λ°•μ€μ‹', publisher: 'λ²”μ°μ‚¬', category: 'μ—­μ‚¬', guide: "'ν†µμ‚¬(η—›ε²)'λΌλ” μ λ©μ²λΌ, λ‚λΌλ¥Ό μƒμ€ μ•„ν”” μ†μ—μ„ λ―Όμ΅±μ μ—­μ‚¬λ¥Ό μ •λ¦¬ν• μ±…μ…λ‹λ‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 25, stage: 2, title: 'μ‚¬κΈ°μ—΄μ „', author: 'μ‚¬λ§μ²', publisher: 'λ―Όμμ‚¬', category: 'μ—­μ‚¬', guide: "λ‹¤μ–‘ν• μΈκ°„ κµ°μƒμ μ‚¶μ„ μƒλ™κ° μκ² κ·Έλ ¤λ‚΄ 'μΈκ°„ν•™μ λ³΄κ³ 'λΌ λ¶λ¦½λ‹λ‹¤. μ—­μ‚¬ μ† μΈλ¬Όλ“¤μ μ„±κ³µκ³Ό μ‹¤ν¨λ¥Ό ν†µν•΄ μ‚¶μ μ§€νλ¥Ό μ–»μ„ μ μμµλ‹λ‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 26, stage: 2, title: 'μ—­μ‚¬', author: 'ν—¤λ΅λ„ν† μ¤', publisher: 'λ„μ„μ¶ν μ²', category: 'μ—­μ‚¬', guide: "'μ—­μ‚¬μ μ•„λ²„μ§€' ν—¤λ΅λ„ν† μ¤κ°€ νλ¥΄μ‹μ•„ μ „μμ„ μ¤‘μ‹¬μΌλ΅ κ³ λ€ μ„Έκ³„μ λ‹¤μ–‘ν• λ¬Έν™”μ™€ μ—­μ‚¬λ¥Ό ν¥λ―Έλ΅­κ² κΈ°λ΅ν• μ±…μ…λ‹λ‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 27, stage: 2, title: 'νν•μ§‘', author: 'μ΄μΈλ΅', publisher: 'μ‹ μ›λ¬Έν™”μ‚¬', category: 'ν•κµ­λ¬Έν•™', guide: 'κ³ λ ¤ μ‹λ€ λ¬ΈμΈμ΄ μ“΄ μ°λ¦¬λ‚λΌ μµμ΄μ λ¬Έν•™ λΉ„ν‰μ„λ΅, λ‹Ήμ‹μ μ‹μ™€ μΈλ¬Όμ— λ€ν• ν¥λ―Έλ΅μ΄ μ΄μ•ΌκΈ°λ“¤μ΄ λ‹΄κ²¨ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 28, stage: 3, title: 'λ©λ―Όμ‹¬μ„', author: 'μ •μ•½μ©', publisher: 'μ°½λΉ„', category: 'μ‚¬μƒ', guide: 'λ©λ―Όκ΄€, μ¦‰ κ³µμ§μκ°€ κ°–μ¶°μ•Ό ν•  λ§μκ°€μ§κ³Ό μ‹¤λ¬΄λ¥Ό λ‹¤λ£¬ μ±…μ΄μ§€λ§, μ¤λλ‚  λ¦¬λ”μ μ—­ν• κ³Ό κ³µλ™μ²΄μ μ¤λ¦¬λ¥Ό μƒκ°ν•κ² ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 29, stage: 3, title: 'μμ λ΅ ', author: 'μ΅΄ μ¤νμ–΄νΈ λ°€', publisher: 'μ±…μ„Έμƒ', category: 'μ‚¬μƒ', guide: 'κ°μΈμ μμ κ°€ μ™ μ¤‘μ”ν•μ§€, κ·Έ λ²”μ„λ” μ–΄λ””κΉμ§€μΈμ§€μ— λ€ν•΄ λ…μΎν•κ² μ„¤λ…ν•λ” μμ μ£Όμ μ‚¬μƒμ κµκ³Όμ„μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 30, stage: 3, title: 'κµ°μ£Όλ΅ ', author: 'λ‹μ½λ΅ λ§ν‚¤μ•„λ²¨λ¦¬', publisher: 'κΉμΉ', category: 'μ‚¬μƒ', guide: 'κ¶λ ¥μ λ³Έμ§κ³Ό ν†µμΉ κΈ°μ μ„ λƒ‰μ² ν•κ² λ¶„μ„ν•μ—¬ μ¤λλ‚ κΉμ§€ μλ§μ€ λ…Όμμ„ λ‚³κ³  μλ” μ •μΉν•™μ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 31, stage: 3, title: 'κµ­λ¶€λ΅ ', author: 'μ• λ¤ μ¤λ―Έμ¤', publisher: 'λΉ„λ΄‰μ¶νμ‚¬', category: 'μ‚¬μƒ', guide: "'λ³΄μ΄μ§€ μ•λ” μ†'μΌλ΅ μ λ…ν• κ³ μ „ κ²½μ ν•™μ μ¶λ°μ . μ‹μ¥ κ²½μ μ μ›λ¦¬λ¥Ό μ΄ν•΄ν•κΈ° μ„ν• ν•„λ…μ„μ…λ‹λ‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 32, stage: 3, title: 'ν”„λ΅ν…μ¤νƒ„ν‹°μ¦μ μ¤λ¦¬μ™€ μλ³Έμ£Όμμ μ •μ‹ ', author: 'λ§‰μ¤ λ² λ²„', publisher: 'λ¬Έμμ¶νμ‚¬', category: 'μ‚¬μƒ', guide: 'κ·Όλ©΄, μ„±μ‹¤μ΄λΌλ” μΆ…κµμ  μ¤λ¦¬κ°€ μ–΄λ–»κ² μλ³Έμ£Όμ λ°μ „μ μ •μ‹ μ  ν† λ€κ°€ λμ—λ”μ§€λ¥Ό λ¶„μ„ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 33, stage: 3, title: 'μ¬ν” μ—΄λ€', author: 'ν΄λ΅λ“ λ λΉ„μ¤νΈλ΅μ¤', publisher: 'ν•κΈΈμ‚¬', category: 'μ‚¬μƒ', guide: 'μ„κµ¬ λ¬Έλ…μ μ‹μ„ μ—μ„ λ²—μ–΄λ‚ μ•„λ§μ΅΄ μ›μ£Όλ―Ό μ‚¬νλ¥Ό κΈ°λ΅ν• κµ¬μ΅°μ£Όμ μΈλ¥ν•™μ λ…μ €μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 34, stage: 3, title: 'λ―Έλ””μ–΄μ μ΄ν•΄', author: 'λ§μ… λ§¤ν΄λ£¨μ–Έ', publisher: 'μ»¤λ®¤λ‹μΌ€μ΄μ…λ¶μ¤', category: 'μ‚¬μƒ', guide: '"λ―Έλ””μ–΄λ” λ©”μ‹μ§€λ‹¤"λΌλ” λ…μ λ΅, λ―Έλ””μ–΄κ°€ μ°λ¦¬ μ‚¬νμ™€ μ‚¬κ³ λ°©μ‹μ„ μ–΄λ–»κ² λ³€ν™”μ‹ν‚¤λ”μ§€λ¥Ό μ„¤λ…ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 35, stage: 3, title: 'μΈκ°„μ μ΅°κ±΄', author: 'ν•λ‚ μ•„λ νΈ', publisher: 'ν•κΈΈμ‚¬', category: 'μ‚¬μƒ', guide: 'λ…Έλ™, μ‘μ—…, ν–‰μ„λΌλ” μΈκ°„μ μ„Έ κ°€μ§€ ν™λ™μ„ ν†µν•΄ μΈκ°„λ‹¤μ΄ μ‚¶μ μ΅°κ±΄μ΄ λ¬΄μ—‡μΈμ§€ νƒκµ¬ν•λ” ν„λ€ μ² ν•™μ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 36, stage: 3, title: 'ν”„λ‘μ¤ νλ…μ— κ΄€ν• μ„±μ°°', author: 'μ—λ“λ¨Όλ“ λ²„ν¬', publisher: 'ν•κΈΈμ‚¬', category: 'μ‚¬μƒ', guide: 'κΈ‰μ§„μ μΈ νλ…μ μ„ν—μ„±μ„ κ²½κ³ ν•λ©° μ μ§„μ  κ°νμ μ¤‘μ”μ„±μ„ μ—­μ„¤ν• λ³΄μμ£Όμ μ •μΉμ² ν•™μ μ›μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 37, stage: 3, title: 'λ‹΄λ΅ κ³Ό λ¬Έν•™', author: '(μ£Όμ )', publisher: 'ν•΄λ‹Ή μ—†μ', category: 'μ‚¬μƒ', guide: 'νΉμ • μ±…μ΄ μ•„λ‹ μ£Όμ μ…λ‹λ‹¤. λ―Έμ…Έ ν‘Έμ½”μ μ €μ‘μ²λΌ, λ¬Έν•™ μ‘ν’μ΄ μ–΄λ–»κ² μ‚¬νμ  λ‹΄λ΅ μ„ ν•μ„±ν•κ³  μν–¥μ„ λ°›λ”μ§€ νƒκµ¬ν•λ” λ¶„μ•Όλ¥Ό μλ―Έν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 38, stage: 3, title: 'μ¦μ–Έμ μ‚¬νν•™', author: '(μ£Όμ )', publisher: 'ν•΄λ‹Ή μ—†μ', category: 'μ‚¬μƒ', guide: 'νΉμ • μ±…μ΄ μ•„λ‹ μ£Όμ μ…λ‹λ‹¤. κ°μΈμ μ¦μ–Έμ΄ μ–΄λ–»κ² μ‚¬νμ  μ§„μ‹¤μ„ κµ¬μ„±ν•κ³  μ—­μ‚¬λ¥Ό κΈ°λ΅ν•λ”μ§€λ¥Ό λ‹¤λ£¨λ” μ‚¬νν•™ λ¶„μ•Όλ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 39, stage: 3, title: 'ν•λ°λ„μ™€ μ£Όλ³€ 4κ°•', author: '(μ£Όμ )', publisher: 'μ„μ λ¬Έν™”μ‚¬', category: 'μ‚¬μƒ', guide: 'νΉμ • μ±…μ΄ μ•„λ‹ μ£Όμ μ…λ‹λ‹¤. ν•λ°λ„λ¥Ό λ‘λ¬μ‹Ό λ―Έκµ­, μ¤‘κµ­, μΌλ³Έ, λ¬μ‹μ•„μ κµ­μ  κ΄€κ³„μ™€ μ™Έκµ μ •μ±…μ„ λ¶„μ„ν•λ” λ¶„μ•Όμ μ±…λ“¤μ„ μλ―Έν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 40, stage: 4, title: 'λ…Όμ–΄', author: 'κ³µμ', publisher: 'ν™μµμ¶νμ‚¬', category: 'μ‚¬μƒ', guide: '2500λ…„μ΄ μ§€λ‚ μ§€κΈλ„ μ‚¶μ μ§€ν‘κ°€ λλ” κ³µμμ κ°€λ¥΄μΉ¨. μ‚¬λλ‹¤μ›€(δ»)κ³Ό κ΄€κ³„μ μ(η¦®)μ— λ€ν•΄ λ°°μΈ μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 41, stage: 4, title: 'λ§Ήμ', author: 'λ§Ήμ', publisher: 'ν™μµμ¶νμ‚¬', category: 'μ‚¬μƒ', guide: 'μΈκ°„μ μ„ ν• λ³Έμ„±κ³Ό μ™•λ„μ •μΉλ¥Ό μ—­μ„¤ν• λ§Ήμμ μ‚¬μƒμ„ ν†µν•΄ μ •μμ™€ λ¦¬λ”μ‹­μ μλ―Έλ¥Ό λμƒκ²¨λ³Ό μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 42, stage: 4, title: 'λ€ν•™', author: 'μ¦μ', publisher: 'λ―Όμμ‚¬', category: 'μ‚¬μƒ', guide: 'μμ‹ μ κ°€μΉκµ­ν‰μ²ν•(δΏ®θΊ«ι½ε®¶ζ²»ε‹εΉ³ε¤©δΈ‹)μ μ›λ¦¬λ¥Ό μ„¤λ…ν•λ” μ κµμ ν•µμ‹¬ κ²½μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 43, stage: 4, title: 'μ¥μ', author: 'μ¥μ', publisher: 'κΈΈ', category: 'μ‚¬μƒ', guide: 'κ³ μ •κ΄€λ…μ—μ„ λ²—μ–΄λ‚ μμ λ΅μ΄ μ‚¶μ„ μ΄μ•ΌκΈ°ν•λ” λ„κ°€ μ‚¬μƒμ μ •μ. μƒμƒλ ¥κ³Ό μ λ¨Έκ°€ κ°€λ“ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 44, stage: 4, title: 'λ‹¤μ‚°λ¬Έμ„ ', author: 'μ •μ•½μ©', publisher: 'μ°½λΉ„', category: 'μ‚¬μƒ', guide: 'μ‹¤ν•™μ‚¬μƒμ„ μ§‘λ€μ„±ν• λ‹¤μ‚° μ •μ•½μ©μ λ°©λ€ν• μ €μ  μ¤‘μ—μ„ ν•µμ‹¬μ μΈ κΈ€λ“¤μ„ λ¨μ•„ μ—®μ€ μ±…μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 45, stage: 4, title: 'μ„±ν•™μ‹­λ„', author: 'μ΄ν™©', publisher: 'ν™μµμ¶νμ‚¬', category: 'μ‚¬μƒ', guide: 'ν‡΄κ³„ μ΄ν™©μ΄ μ„κΈμ—κ² μ¬λ¦° μ„±λ¦¬ν•™μ ν•µμ‹¬ μ”μ•½μ„. μ—΄ κ°μ κ·Έλ¦ΌμΌλ΅ μ„±λ¦¬ν•™μ μ²΄κ³„λ¥Ό μ„¤λ…ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 46, stage: 4, title: 'κ²©λ½μ”κ²°', author: 'μ΄μ΄', publisher: 'μ„ν•΄λ¬Έμ§‘', category: 'μ‚¬μƒ', guide: 'μ¨κ³΅ μ΄μ΄κ°€ ν•™λ¬Έμ„ μ‹μ‘ν•λ” μ΄λ“¤μ„ μ„ν•΄ μ“΄ μμ–‘μ„λ΅, μ¬λ°”λ¥Έ λ§μκ°€μ§κ³Ό κ³µλ¶€λ²•μ„ μ μ‹ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 47, stage: 4, title: 'μμ‚°λ¬Έλ‹µ', author: 'ν™λ€μ©', publisher: 'μ•„μΉ΄λ„·', category: 'μ‚¬μƒ', guide: 'μ΅°μ„  ν›„κΈ° μ‹¤ν•™μμ κ³Όν•™ μ‚¬μƒμ„ λ‹΄μ€ μ±…μΌλ΅, μ§€λ™μ„¤κ³Ό μ°μ£Όλ¬΄ν•λ΅  λ“± μ‹λ€λ¥Ό μ•μ„κ°„ μƒκ°μ„ μ—Ώλ³Ό μ μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 48, stage: 4, title: 'κµ­κ°€', author: 'ν”λΌν†¤', publisher: 'μ„κ΄‘μ‚¬', category: 'μ‚¬μƒ', guide: 'μ •μλ΅μ΄ κµ­κ°€λ€ λ¬΄μ—‡μ΄λ©°, μ΄μƒμ μΈ ν†µμΉμλ” λ„κµ¬μΈκ°€μ— λ€ν• ν”λΌν†¤μ μƒκ°μ„ λ‹΄μ€ μ„μ–‘ μ² ν•™μ μ›μ²μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 49, stage: 4, title: 'λ°©λ²•μ„μ„¤', author: 'λ¥΄λ„¤ λ°μΉ΄λ¥΄νΈ', publisher: 'λ¬Έμμ¶νμ‚¬', category: 'μ‚¬μƒ', guide: '"λ‚λ” μƒκ°ν•λ‹¤, κ³ λ΅ μ΅΄μ¬ν•λ‹¤." λ¨λ“  κ²ƒμ„ μμ‹¬ν•λ©° ν™•μ‹¤ν• μ§€μ‹μ ν† λ€λ¥Ό μ°ΎμΌλ ¤λ” κ·Όλ€ μ² ν•™μ μ¶λ°μ μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 50, stage: 4, title: 'μ •λ¶€λ΅ ', author: 'μ΅΄ λ΅ν¬', publisher: 'κΉμΉ', category: 'μ‚¬μƒ', guide: 'μ‚¬νκ³„μ•½κ³Ό μ‹λ―Όμ μ €ν•­κ¶μ„ μ£Όμ¥ν•λ©° κ·Όλ€ λ―Όμ£Όμ£Όμ μ‚¬μƒμ ν† λ€λ¥Ό λ§λ ¨ν• μ±…μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 51, stage: 4, title: 'μ‹¤μ²μ΄μ„±λΉ„ν', author: 'μ„λ§λ„μ— μΉΈνΈ', publisher: 'μ•„μΉ΄λ„·', category: 'μ‚¬μƒ', guide: '"λ„¤ μμ§€μ μ¤€μΉ™μ΄ ν•­μƒ λ™μ‹μ— λ³΄νΈμ  λ²•μΉ™μ μ›λ¦¬κ°€ λ  μ μλ„λ΅ ν–‰μ„ν•λΌ." μΉΈνΈ μ¤λ¦¬ν•™μ ν•µμ‹¬μ„ λ‹΄κ³  μμµλ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 52, stage: 4, title: 'κΏμ ν•΄μ„', author: 'μ§€ν¬λ¬ΈνΈ ν”„λ΅μ΄νΈ', publisher: 'μ—΄λ¦°μ±…λ“¤', category: 'μ‚¬μƒ', guide: 'κΏμ„ ν†µν•΄ μΈκ°„μ λ¬΄μμ‹ μ„Έκ³„λ¥Ό νƒκµ¬ν•λ©° μ •μ‹ λ¶„μ„ν•™μ λ¬Έμ„ μ—° κΈ°λ…λΉ„μ μΈ μ €μ‘μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 53, stage: 4, title: 'μλ³Έλ΅ ', author: 'μΉ΄λ¥Ό λ§λ¥΄ν¬μ¤', publisher: 'λΉ„λ΄‰μ¶νμ‚¬', category: 'μ‚¬μƒ', guide: 'μλ³Έμ£Όμ μ²΄μ μ μ‘λ™ μ›λ¦¬μ™€ κ·Έ λ¬Έμ μ μ„ κ³Όν•™μ μΌλ΅ λ¶„μ„ν• μ±…μΌλ΅, ν„λ€ μ‚¬νλ¥Ό μ΄ν•΄ν•λ” λ° ν•„μμ μΈ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 54, stage: 4, title: 'μ΄κΈ°λ΅ κ³Ό ν•κµ­μ‚¬μƒ', author: '(μ£Όμ )', publisher: 'ν•΄λ‹Ή μ—†μ', category: 'μ‚¬μƒ', guide: 'νΉμ • μ±…μ΄ μ•„λ‹ μ£Όμ μ…λ‹λ‹¤. μ΄(η†)μ™€ κΈ°(ζ°£)μ κ΄€κ³„λ¥Ό ν†µν•΄ μ°μ£Όμ™€ μΈκ°„μ„ μ„¤λ…ν•λ ¤ ν–λ ν•κµ­ μ„±λ¦¬ν•™μ ν•µμ‹¬ λ…Όμμ„ λ‹¤λ£¨λ” λ¶„μ•Όμ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 55, stage: 5, title: 'μΆ…μ κΈ°μ›', author: 'μ°°μ¤ λ‹¤μ', publisher: 'λ™μ„λ¬Έν™”μ‚¬', category: 'κ³Όν•™', guide: 'μμ—°μ„ νƒμ„ ν†µν• μ§„ν™”λΌλ” νλ…μ μΈ μ•„μ΄λ””μ–΄λ΅ μƒλ…κ³Ό μ„Έκ³„μ— λ€ν• μ°λ¦¬μ μ΄ν•΄λ¥Ό μ™„μ „ν λ°”κΎΌ κ³Όν•™μ‚¬μ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 56, stage: 5, title: 'κ³Όν•™νλ…μ κµ¬μ΅°', author: 'ν† λ¨Έμ¤ μΏ¤', publisher: 'κΉμΉ', category: 'κ³Όν•™', guide: "κ³Όν•™μ΄ μ μ§„μ μΌλ΅ λ°μ „ν•λ” κ²ƒμ΄ μ•„λ‹λΌ 'ν¨λ¬λ‹¤μ„μ μ „ν™'μ„ ν†µν•΄ νλ…μ μΌλ΅ λ³€ν™”ν•λ‹¤λ” μ£Όμ¥μ„ λ‹΄κ³  μμµλ‹λ‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 57, stage: 5, title: 'μ΄κΈ°μ  μ μ „μ', author: 'λ¦¬μ²λ“ λ„ν‚¨μ¤', publisher: 'μ„μ λ¬Έν™”μ‚¬', category: 'κ³Όν•™', guide: 'μƒλ…μ μ§„ν™”λ¥Ό μ μ „μμ κ΄€μ μ—μ„ μ„¤λ…ν•λ©° μ „ μ„Έκ³„μ μΈ λ…Όμμ„ λ¶λ¬μΌμΌν‚¨ ν„λ€μ κ³ μ „μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 58, stage: 5, title: 'λ¶€λ¶„κ³Ό μ „μ²΄', author: 'λ² λ¥΄λ„ ν•μ΄μ  λ² λ¥΄ν¬', publisher: 'μ„μ»¤μ¤μ¶νμƒν', category: 'κ³Όν•™', guide: 'μ–‘μμ—­ν•™μ κ±°λ‘μΈ ν•μ΄μ  λ² λ¥΄ν¬κ°€ λ™λ£ κ³Όν•™μλ“¤κ³Ό λ‚λ λ€ν™”λ¥Ό ν†µν•΄ κ³Όν•™κ³Ό μ² ν•™, μΈμƒμ— λ€ν•΄ μ„±μ°°ν•λ” μ±…μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 59, stage: 5, title: 'μ—”νΈλ΅ν”Ό', author: 'μ λ¬λ―Έ λ¦¬ν”„ν‚¨', publisher: 'μ„ΈμΆ…μ—°κµ¬μ›', category: 'κ³Όν•™', guide: 'μ—΄μ—­ν•™ μ 2λ²•μΉ™μΈ μ—”νΈλ΅ν”Ό κ°λ…μ„ ν†µν•΄ ν„λ€ μ‚°μ—… λ¬Έλ…μ μ„κΈ°λ¥Ό μ§„λ‹¨ν•κ³  μƒλ΅μ΄ μ„Έκ³„κ΄€μ„ μ μ‹ν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 60, stage: 5, title: 'νλ¥΄λ§μ λ§μ§€λ§‰ μ •λ¦¬', author: 'μ‚¬μ΄λ¨Ό μ‹±', publisher: 'μλ¦ΌμΉ΄λ””λ„', category: 'κ³Όν•™', guide: '350λ…„κ°„ ν’€λ¦¬μ§€ μ•μ•λ μν•™ λ‚μ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• μν•™μλ“¤μ μ—΄μ •κ³Ό λ„μ „μ„ ν¥λ―Έμ§„μ§„ν•κ² κ·Έλ¦° λ…Όν”½μ…μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 61, stage: 5, title: 'μΉ΄μ¤μ¤', author: 'μ μ„μ¤ κΈ€λ¦­', publisher: 'λ™μ•„μ‹μ•„', category: 'κ³Όν•™', guide: "λ‚λΉ„μ λ‚ κ°―μ§“μ΄ νƒν’μ„ μΌμΌν‚¬ μ μλ‹¤λ” 'λ‚λΉ„ ν¨κ³Ό'λ΅ μ λ…ν• μΉ΄μ¤μ¤ μ΄λ΅ μ„ λ€μ¤‘μ—κ² μ†κ°ν• μ±…μ…λ‹λ‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 62, stage: 5, title: 'μ‹ κΈ°κ΄€', author: 'ν”„λμ‹μ¤ λ² μ΄μ»¨', publisher: 'ν•κΈΈμ‚¬', category: 'κ³Όν•™', guide: 'κ΄€μ°°κ³Ό μ‹¤ν—μ„ μ¤‘μ‹ν•λ” κ²½ν—μ£Όμμ  κ³Όν•™ λ°©λ²•λ΅ μ„ μ μ‹ν•λ©° κ·Όλ€ κ³Όν•™μ λ¬Έμ„ μ—° μ±…μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 63, stage: 5, title: 'κ°™κΈ°λ„ ν•κ³  μ•„λ‹ κ°™κΈ°λ„ ν•κ³ ', author: 'λ΅μ–Όλ“ νΈν”„λ§', publisher: 'κΉμΉ', category: 'κ³Όν•™', guide: 'λ…Έλ²¨ ν™”ν•™μƒ μμƒμκ°€ ν™”ν•™μ λ³Έμ§κ³Ό μ•„λ¦„λ‹¤μ›€μ„ μ‹μ μΈ μ–Έμ–΄λ΅ ν’€μ–΄λ‚Έ λ…νΉν• κ³Όν•™ κµμ–‘μ„μ…λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 64, stage: 5, title: 'κ°κ΄€μ„±μ μΉΌλ‚ ', author: 'μ°°μ¤ κΈΈλ¦¬μ¤ν”Ό', publisher: 'μƒλ¬Όκ²°', category: 'κ³Όν•™', guide: 'κ³Όν•™μ‚¬μ μ£Όμ” λ…Όμλ“¤μ„ ν†µν•΄ κ³Όν•™ μ§€μ‹μ΄ μ–΄λ–»κ² ν•μ„±λκ³  λ°μ „ν•΄μ™”λ”μ§€λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 65, stage: 5, title: 'κ³Όν•™κΈ°μ΄', author: '(μ£Όμ )', publisher: 'ν•΄λ‹Ή μ—†μ', category: 'κ³Όν•™', guide: 'νΉμ • μ±…μ΄ μ•„λ‹ μ£Όμ μ…λ‹λ‹¤. μ„μΈλ€ν•™κµ μ¶νλ¬Έν™”μ›μ γ€κ³Όν•™κ³ μ „μ„ μ§‘γ€μ²λΌ, κ³Όν•™μ‚¬μ κΈ°μ΄λ¥Ό μ΄λ£¨λ” μ£Όμ” κ³ μ „λ“¤μ„ μ—®μ€ μ±…λ“¤μ„ μλ―Έν•©λ‹λ‹¤.', startDate: null, completionDate: null, memos: [] }
        ];

        let bookData = [];
        let currentEditingBookId = null;
        let activeSourceFilter = 'All';
        let activeCategoryFilter = 'All';
        let activeStageFilter = '1'; // Default stage filter
        let activeStatusFilter = 'All';

        const stageInfo = {
            0: { name: 'λ‚μ μ„μ¬: μ§μ ‘ μ¶”κ°€ν• μ±…λ“¤', description: 'λ‚΄κ°€ μ§μ ‘ μ¶”κ°€ν•μ—¬ κ΄€λ¦¬ν•λ” λ„μ„ λ©λ΅μ…λ‹λ‹¤.' },
            1: { name: '1λ‹¨κ³„: λ¬Έν•™μ μ²μ— μ²«λ° λ‚΄λ”›κΈ°', description: 'λ…μ„μ μ¦κ±°μ›€μ„ λλΌκ³  κΎΈμ¤€ν• μµκ΄€μ„ λ§λ“λ” λ‹¨κ³„μ…λ‹λ‹¤. λΉ„κµμ  μ ‘κ·Όν•κΈ° μ‰¬μ΄ μ†μ„¤κ³Ό μ‹λ¥Ό ν†µν•΄ μ΄μ•ΌκΈ°μ μ¬λ―Έμ— λΉ μ Έλ³΄μ„Έμ”.' },
            2: { name: '2λ‹¨κ³„: μ—­μ‚¬ μ† μΈλ¬Όκ³Ό μ„Έμƒ λ§λ‚κΈ°', description: 'λ¬Έν•™μ„ ν†µν•΄ λ‹μ΄ ν¥λ―Έλ¥Ό λ°”νƒ•μΌλ΅ μ‹¤μ  μ—­μ‚¬μ™€ μΈλ¬Ό μ΄μ•ΌκΈ°λ΅ κ΄€μ‹¬μ‚¬λ¥Ό λ„“ν€κ°€λ” λ‹¨κ³„μ…λ‹λ‹¤. μ—­μ‚¬λ¥Ό ν†µν•΄ ν„μ¬λ¥Ό μ΄ν•΄ν•λ” μ‹κ°μ„ κΈ°λ¥Ό μ μμµλ‹λ‹¤.' },
            3: { name: '3λ‹¨κ³„: μ‚¬νλ¥Ό λ³΄λ” λ ν‚¤μ°κΈ°', description: 'κ°μΈμ μ‚¶μ„ λ„μ–΄ μ°λ¦¬κ°€ μ‚¬λ” μ‚¬νμ κµ¬μ΅°μ™€ μ‘λ™ μ›λ¦¬μ— λ€ν•΄ κ³ λ―Όν•΄λ³΄λ” λ‹¨κ³„μ…λ‹λ‹¤. μ •μΉ, κ²½μ , μ‚¬ν λ“± λ‹¤μ–‘ν• λ¶„μ•Όμ κ³ μ „μ„ ν†µν•΄ λΉ„νμ  μ‚¬κ³ λ ¥μ„ κΈ°λ¦…λ‹λ‹¤.' },
            4: { name: '4λ‹¨κ³„: μƒκ°μ λΏλ¦¬ νƒν—ν•κΈ°', description: 'λ‹¤μ† μ–΄λ ¤μΈ μ μμ§€λ§, μΈλ¥μ μ§€νκ°€ λ‹΄κΈ΄ ν•µμ‹¬ μ‚¬μƒλ“¤μ„ μ§μ ‘ λ§λ‚λ³΄λ” λ‹¨κ³„μ…λ‹λ‹¤. μ„Έμƒμ„ λ³΄λ” κ·Όλ³Έμ μΈ μ‹κ°μ„ κΈ°λ¥Ό μ μμµλ‹λ‹¤.' },
            5: { name: '5λ‹¨κ³„: κ³Όν•™μΌλ΅ μ„Έμƒ λ‹¤μ‹ λ³΄κΈ°', description: 'μΈλ¬Έν•™μ  μƒμƒλ ¥μ— κ³Όν•™μ  μ‚¬κ³ λ°©μ‹μ„ λ”ν•΄ μ„Έμƒμ„ λ”μ± μ…μ²΄μ μΌλ΅ μ΄ν•΄ν•λ” λ‹¨κ³„μ…λ‹λ‹¤. μƒλ…, μ°μ£Ό, κΈ°μ μ— λ€ν• μ„λ€ν• λ°κ²¬λ“¤μ„ λ§λ‚λ³΄μ„Έμ”.' }
        };

        // 1. νλ€μƒ‰ κ³„μ—΄μ μ‘μ€ μ±… μ•„μ΄μ½ SVG
const coloredBookIcon = `
<svg width="32" height="32" viewBox="0 0 32 32" fill="none">
  <rect x="4" y="8" width="24" height="16" rx="3" fill="#F4F7FE"/>
  <rect x="6" y="10" width="10" height="12" rx="2" fill="#E0E7FF"/>
  <rect x="16" y="10" width="10" height="12" rx="2" fill="#C7D2FE"/>
  <rect x="15" y="10" width="2" height="12" fill="#A5B4FC"/>
  <ellipse cx="16" cy="22" rx="2" ry="1" fill="#60A5FA"/>
</svg>
`;

        const getStatusIcon = (book) => {
            if (book.completionDate) return 'β…'; // Completed
            if (book.startDate) return 'π”–'; // Reading
            return 'π“–'; // To-be-read
        };
        
        const saveData = () => {
            localStorage.setItem('snuBookTrackerData', JSON.stringify(bookData));
            const filters = { activeSourceFilter, activeCategoryFilter, activeStageFilter, activeStatusFilter };
            localStorage.setItem('snuBookTrackerFilters', JSON.stringify(filters));
        };

        const loadData = () => {
            const savedData = localStorage.getItem('snuBookTrackerData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                bookData = parsedData.map(book => ({...book, memos: book.memos || [], isDeleted: book.isDeleted || false }));
            } else {
                bookData = initialBookData;
            }

            const savedFilters = localStorage.getItem('snuBookTrackerFilters');
            if(savedFilters) {
                const parsedFilters = JSON.parse(savedFilters);
                activeSourceFilter = parsedFilters.activeSourceFilter || 'All';
                activeCategoryFilter = parsedFilters.activeCategoryFilter || 'All';
                activeStageFilter = parsedFilters.activeStageFilter || '1';
                activeStatusFilter = parsedFilters.activeStatusFilter || 'All';
            }
        };

        const updateStatistics = () => {
            const totalBooks = bookData.filter(b => !b.isDeleted).length;
            const completedCount = bookData.filter(b => b.completionDate && !b.isDeleted).length;
            const readingCount = bookData.filter(b => b.startDate && !b.completionDate && !b.isDeleted).length;
            const tbrCount = totalBooks - completedCount - readingCount;
            const progressPercentage = totalBooks > 0 ? (completedCount / totalBooks) * 100 : 0;

            document.getElementById('completed-count').textContent = completedCount;
            document.getElementById('reading-count').textContent = readingCount;
            document.getElementById('tbr-count').textContent = tbrCount;
            document.getElementById('progress-text').textContent = `${completedCount} / ${totalBooks}`;
            document.getElementById('progress-bar').style.width = `${progressPercentage}%`;
        };
        
        const applyFilters = () => {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            let filteredBooks = bookData.filter(b => !b.isDeleted);

            // 1. Source Filter
            if (activeSourceFilter === 'SNU') {
                filteredBooks = filteredBooks.filter(book => !book.isUserAdded);
            } else if (activeSourceFilter === 'MyBooks') {
                filteredBooks = filteredBooks.filter(book => book.isUserAdded);
            }

            // 2. Category Filter
            if (activeCategoryFilter !== 'All') {
                filteredBooks = filteredBooks.filter(book => book.category === activeCategoryFilter);
            }
            
            // 3. Stage Filter
            if (activeStageFilter !== 'All') {
                 filteredBooks = filteredBooks.filter(book => book.stage == activeStageFilter);
            }

            // 4. Status Filter
            if (activeStatusFilter === 'completed') {
                filteredBooks = filteredBooks.filter(book => book.completionDate);
            } else if (activeStatusFilter === 'reading') {
                filteredBooks = filteredBooks.filter(book => book.startDate && !book.completionDate);
            } else if (activeStatusFilter === 'tbr') {
                filteredBooks = filteredBooks.filter(book => !book.startDate && !book.completionDate);
            }

            // 5. Search Term Filter
            if (searchTerm) {
                filteredBooks = filteredBooks.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) || 
                    book.author.toLowerCase().includes(searchTerm)
                );
            }
            
            renderBooks(filteredBooks);
            saveData(); // Save filter state
        };

        // 2. λ„μ„μΉ΄λ“ λ λ”λ§ ν•¨μλ§ μ•„λμ²λΌ κµμ²΄
const renderBooks = (booksToRender) => {
    const bookListContainer = document.getElementById('book-list');
    const groupedByStage = booksToRender.reduce((acc, book) => {
        (acc[book.stage] = acc[book.stage] || []).push(book);
        return acc;
    }, {});

    bookListContainer.innerHTML = '';

    if (Object.keys(groupedByStage).length === 0) {
        bookListContainer.innerHTML = `<p class="text-center text-stone-500 py-8">ν‘μ‹ν•  λ„μ„κ°€ μ—†μµλ‹λ‹¤.</p>`;
        return;
    }

    Object.keys(groupedByStage).sort((a,b) => a-b).forEach(stage => {
        const stageDiv = document.createElement('div');
        stageDiv.id = `stage-${stage}`;
        stageDiv.className = 'scroll-mt-24';

        const stageHeader = `
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-teal-700">${stageInfo[stage].name}</h3>
                <p class="text-stone-600 mt-2">${stageInfo[stage].description}</p>
            </div>
        `;

        const booksGrid = document.createElement('div');
        booksGrid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';

        groupedByStage[stage].forEach(book => {
            const bookCard = document.createElement('div');
            let cardBg = 'bg-stone-100';
            if (book.completionDate) cardBg = 'bg-teal-50';
            else if (book.startDate) cardBg = 'bg-amber-50';

            // μ λ© μ† μƒνƒμ•„μ΄μ½: κΈ°λ΅ μμ„ λ•λ§
            let statusIcon = '';
            if (book.completionDate) statusIcon = 'β…';
            else if (book.startDate) statusIcon = 'π”–';

            // μΉ΄λ“ κΈ°λ³Έ λ³΄λ” 1px #cfcfce, hover μ‹ μ΄λ΅μƒ‰
            bookCard.className = `book-card ${cardBg} p-4 rounded-lg shadow-sm border border-[#cfcfce] hover:border-green-600 transition-all duration-300 cursor-pointer`;

            // ν‘μ§€/μ•„μ΄μ½ μμ—­
            let coverHtml = '';
            if (book.cover) {
                // ν‘μ§€ μ΄λ―Έμ§€κ°€ μμΌλ©΄ μ¤λ¥Έμ½μ— μ„Έλ΅λ΅ ν¬κ²(μ λ©, μ €μ, μ¶νμ‚¬ 3μ¤„ λ†’μ΄μ™€ λ§μ¶¤)
                coverHtml = `
                    <div class="flex items-start h-full">
                        <div class="flex-1 min-w-0 flex flex-col justify-between">
                            <div class="flex items-center mb-1">
                                <h4 class="font-bold text-lg text-stone-800 truncate">${book.title}</h4>
                                ${statusIcon ? `<span class="ml-2 text-xl">${statusIcon}</span>` : ''}
                            </div>
                            <p class="text-stone-600 text-sm truncate">${book.author}</p>
                            <p class="text-stone-500 text-xs truncate">μ¶νμ‚¬: ${book.publisher || 'μ •λ³΄ μ—†μ'}</p>
                            <p class="text-stone-500 text-xs mt-1 line-clamp-2 flex-grow">${book.guide || 'κ°€μ΄λ“ μ •λ³΄ μ—†μ'}</p>
                        </div>
                        <div class="flex-shrink-0 flex items-start ml-4">
                            <img src="${book.cover}" alt="μ±… ν‘μ§€" class="w-24 h-32 object-cover rounded shadow border border-stone-200" />
                        </div>
                    </div>
                `;
            } else {
                // ν‘μ§€ μ΄λ―Έμ§€ μ—†μΌλ©΄ κΈ°μ΅΄ μ•„μ΄μ½
                coverHtml = `
                    <div class="flex items-start h-full">
                        <div class="flex-1 min-w-0 flex flex-col justify-between">
                            <div class="flex items-center mb-1">
                                <h4 class="font-bold text-lg text-stone-800 truncate">${book.title}</h4>
                                ${statusIcon ? `<span class="ml-2 text-xl">${statusIcon}</span>` : ''}
                            </div>
                            <p class="text-stone-600 text-sm truncate">${book.author}</p>
                            <p class="text-stone-500 text-xs truncate">μ¶νμ‚¬: ${book.publisher || 'μ •λ³΄ μ—†μ'}</p>
                            <p class="text-stone-500 text-xs mt-1 line-clamp-2 flex-grow">${book.guide || 'κ°€μ΄λ“ μ •λ³΄ μ—†μ'}</p>
                        </div>
                        <div class="flex-shrink-0 flex items-start ml-4">
                            <span class="block">${coloredBookIcon}</span>
                        </div>
                    </div>
                `;
            }

            bookCard.innerHTML = coverHtml;
            bookCard.addEventListener('click', () => openModal(book));
            booksGrid.appendChild(bookCard);
        });

        stageDiv.innerHTML = stageHeader;
        stageDiv.appendChild(booksGrid);
        bookListContainer.appendChild(stageDiv);
    });
};

        const openModal = (book) => {
            currentEditingBookId = book.id;
            document.getElementById('modal-stage').textContent = stageInfo[book.stage].name;
            document.getElementById('modal-title').textContent = book.title;
            document.getElementById('modal-author').textContent = book.author;
            document.getElementById('modal-guide').textContent = book.guide;
            document.getElementById('modal-publisher').textContent = `λ€ν‘ μ¶νμ‚¬: ${book.publisher}`;
            document.getElementById('start-date').value = book.startDate || '';
            document.getElementById('completion-date').value = book.completionDate || '';

            // ν‘μ§€ μ΄λ―Έμ§€ μμ—­ μ¶”κ°€
            let coverHtml = '';
            if (book.cover) {
                coverHtml = `<img src="${book.cover}" alt="μ±… ν‘μ§€" class="w-32 h-44 object-cover rounded shadow border border-stone-200 mx-auto mb-4" />`;
            } else {
                coverHtml = `<div class="flex justify-center mb-4">
                    <svg class="w-16 h-16 text-stone-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" stroke-width="2"/><path d="M8 4v16M16 4v16" stroke-width="2"/></svg>
                </div>`;
            }
            // ν‘μ§€ μ΄λ―Έμ§€λ¥Ό λ¨λ‹¬ λ‚΄μ© μµμƒλ‹¨μ— λ™μ μΌλ΅ μ‚½μ…
            const modalContent = document.getElementById('modal-content').querySelector('.p-6.md\\:p-8.overflow-y-auto');
            if (modalContent) {
                let oldCover = modalContent.querySelector('.modal-cover-image');
                if (oldCover) oldCover.remove();
                const coverDiv = document.createElement('div');
                coverDiv.className = 'modal-cover-image';
                coverDiv.innerHTML = coverHtml;
                modalContent.insertBefore(coverDiv, modalContent.firstChild);
            }

            renderMemos(book.memos);

            const modal = document.getElementById('modal');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContentDiv = document.getElementById('modal-content');
            
            modal.classList.remove('hidden');
            modalBackdrop.classList.remove('hidden');
            modalContentDiv.classList.remove('modal-leave-active', 'modal-enter');
            modalBackdrop.classList.remove('backdrop-leave-active', 'backdrop-enter');
            
            requestAnimationFrame(() => {
                modalContentDiv.classList.add('modal-enter-active');
                modalBackdrop.classList.add('backdrop-enter-active');
            });
        };

        const closeModal = () => {
            const modal = document.getElementById('modal');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContent = document.getElementById('modal-content');

            modalContent.classList.replace('modal-enter-active', 'modal-leave-active');
            modalBackdrop.classList.replace('backdrop-enter-active', 'backdrop-leave-active');

            setTimeout(() => {
                modal.classList.add('hidden');
                modalBackdrop.classList.add('hidden');
                currentEditingBookId = null;
            }, 200);
        };

        const openAddBookModal = () => {
            populateCategorySelect();

            const modal = document.getElementById('add-book-modal');
            const modalBackdrop = document.getElementById('add-book-modal-backdrop');
            const modalContent = document.getElementById('add-book-modal-content');
            modal.classList.remove('hidden');
            modalBackdrop.classList.remove('hidden');
            modalContent.classList.remove('modal-leave-active', 'modal-enter');
            modalBackdrop.classList.remove('backdrop-leave-active', 'backdrop-enter');
            requestAnimationFrame(() => {
                modalContent.classList.add('modal-enter-active');
                modalBackdrop.classList.add('backdrop-enter-active');
            });
        };

        const closeAddBookModal = () => {
            const modal = document.getElementById('add-book-modal');
            const modalBackdrop = document.getElementById('add-book-modal-backdrop');
            const modalContent = document.getElementById('add-book-modal-content');
            modalContent.classList.replace('modal-enter-active', 'modal-leave-active');
            modalBackdrop.classList.replace('backdrop-enter-active', 'backdrop-leave-active');
            setTimeout(() => {
                modal.classList.add('hidden');
                modalBackdrop.classList.add('hidden');
            }, 200);
        };

        const handleSaveDates = () => {
            if (currentEditingBookId === null) return;
            const bookIndex = bookData.findIndex(b => b.id === currentEditingBookId);
            if (bookIndex === -1) return;

            const startDate = document.getElementById('start-date').value;
            const completionDate = document.getElementById('completion-date').value;

            bookData[bookIndex].startDate = startDate || null;
            bookData[bookIndex].completionDate = completionDate || null;
            
            saveData();
            updateStatistics();
            applyFilters();
            closeModal();
        };
        
        const handleAddNewBook = () => {
            const title = document.getElementById('new-book-title').value.trim();
            const author = document.getElementById('new-book-author').value.trim();
            if (!title || !author) {
                alert('μ λ©κ³Ό μ €μλ” ν•„μ ν•­λ©μ…λ‹λ‹¤.');
                return;
            }
            const bookType = document.querySelector('input[name="book-type"]:checked').value;
            let stage = 0;
            let isUserAdded = true;
            if (bookType === 'snu') {
                stage = parseInt(document.getElementById('new-book-stage').value, 10);
                isUserAdded = false;
            }
            let category = document.getElementById('new-book-category-select').value;
            if (category === 'add-new') {
                category = document.getElementById('new-book-category-input').value.trim();
                if (!category) {
                    alert('μƒ λ¶„μ•Όλ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”.');
                    return;
                }
            }
            const cover = document.getElementById('new-book-cover').value.trim();

            const newBook = {
                id: Date.now(),
                stage: stage,
                title: title,
                author: author,
                publisher: document.getElementById('new-book-publisher').value.trim(),
                category: category,
                guide: document.getElementById('new-book-guide').value.trim(),
                cover: cover || '', // ν‘μ§€ μ΄λ―Έμ§€ URL μ €μ¥
                startDate: null,
                completionDate: null,
                memos: [],
                isUserAdded: isUserAdded,
                isDeleted: false
            };

            bookData.push(newBook);
            saveData();
            updateStatistics();
            setupFilterDropdowns();
            applyFilters();
            closeAddBookModal();

            // Clear form
            document.getElementById('new-book-title').value = '';
            document.getElementById('new-book-author').value = '';
            document.getElementById('new-book-publisher').value = '';
            document.getElementById('new-book-guide').value = '';
            document.getElementById('new-book-category-input').value = '';
            document.getElementById('new-book-category-input').classList.add('hidden');
            document.getElementById('new-book-category-select').classList.remove('hidden');
            document.getElementById('new-book-cover').value = '';
        };

        const renderMemos = (memos) => {
            const memoList = document.getElementById('memo-list');
            memoList.innerHTML = '';
            if (!memos || memos.length === 0) {
                memoList.innerHTML = `<p class="text-center text-sm text-stone-400">μ•„μ§ κΈ°λ΅λ λ…ΈνΈκ°€ μ—†μµλ‹λ‹¤.</p>`;
                return;
            }

            memos.sort((a,b) => new Date(b.date) - new Date(a.date)).forEach(memo => {
                const memoEl = document.createElement('div');
                memoEl.className = 'bg-stone-100 p-3 rounded-lg';
                memoEl.innerHTML = `
                    <p class="text-stone-700">${memo.content}</p>
                    <div class="text-xs text-stone-500 mt-2 flex justify-between items-center">
                        <span>${new Date(memo.date).toLocaleDateString()}</span>
                        <div>
                            <button class="edit-memo-btn text-blue-600 hover:underline" data-memo-id="${memo.id}">μμ •</button>
                            <button class="delete-memo-btn text-red-600 hover:underline ml-2" data-memo-id="${memo.id}">μ‚­μ </button>
                        </div>
                    </div>
                `;
                memoList.appendChild(memoEl);
            });

            document.querySelectorAll('.delete-memo-btn').forEach(btn => {
                btn.addEventListener('click', (e) => handleDeleteMemo(e.target.dataset.memoId));
            });
            document.querySelectorAll('.edit-memo-btn').forEach(btn => {
                btn.addEventListener('click', (e) => handleEditMemo(e.target.dataset.memoId, e.target.closest('.bg-stone-100')));
            });
        };

        const handleAddMemo = () => {
            const memoInput = document.getElementById('memo-input');
            const content = memoInput.value.trim();
            if (!content || currentEditingBookId === null) return;

            const book = bookData.find(b => b.id === currentEditingBookId);
            const newMemo = {
                id: Date.now().toString(),
                date: new Date().toISOString(),
                content: content
            };
            book.memos.push(newMemo);
            saveData();
            renderMemos(book.memos);
            memoInput.value = '';
        };

        const handleDeleteMemo = (memoId) => {
            const book = bookData.find(b => b.id === currentEditingBookId);
            book.memos = book.memos.filter(m => m.id !== memoId);
            saveData();
            renderMemos(book.memos);
        };

        const handleEditMemo = (memoId, memoElement) => {
            const memo = bookData.find(b => b.id === currentEditingBookId).memos.find(m => m.id === memoId);
            const p = memoElement.querySelector('p');
            
            const input = document.createElement('input');
            input.type = 'text';
            input.value = memo.content;
            input.className = 'w-full p-1 border rounded';

            const saveBtn = document.createElement('button');
            saveBtn.textContent = 'μ €μ¥';
            saveBtn.className = 'text-green-600 hover:underline';
            saveBtn.onclick = () => handleSaveMemo(memoId, input.value, memoElement);

            const cancelBtn = document.createElement('button');
            cancelBtn.textContent = 'μ·¨μ†';
            cancelBtn.className = 'text-stone-600 hover:underline ml-2';
            cancelBtn.onclick = () => renderMemos(bookData.find(b => b.id === currentEditingBookId).memos);

            p.replaceWith(input);
            input.focus();
            memoElement.querySelector('.flex.justify-between div').innerHTML = '';
            memoElement.querySelector('.flex.justify-between div').append(saveBtn, cancelBtn);
        };

        const handleSaveMemo = (memoId, newContent) => {
            const book = bookData.find(b => b.id === currentEditingBookId);
            const memo = book.memos.find(m => m.id === memoId);
            memo.content = newContent;
            saveData();
            renderMemos(book.memos);
        };

        const setupFilterDropdowns = () => {
            const sourceDD = document.getElementById('source-filter-dropdown');
            const categoryDD = document.getElementById('category-filter-dropdown');
            const stageDD = document.getElementById('stage-filter-dropdown');

            // Source Dropdown
            sourceDD.innerHTML = `
                <option value="All">μ¶μ²: μ „μ²΄</option>
                <option value="SNU">μ„μΈλ€ μ¶”μ²</option>
                <option value="MyBooks">λ‚΄κ°€ μ¶”κ°€ν• μ±…</option>
            `;
            sourceDD.value = activeSourceFilter;

            // Category Dropdown
            const categories = ['μΆ…κµ', ...new Set(bookData.map(b => b.category))].filter(Boolean);
            categoryDD.innerHTML = `<option value="All">λ¶„μ•Ό: μ „μ²΄</option>`;
            [...new Set(categories)].forEach(cat => {
                categoryDD.innerHTML += `<option value="${cat}">${cat}</option>`;
            });
            categoryDD.value = activeCategoryFilter;

            // Stage Dropdown
            stageDD.innerHTML = `<option value="All">λ‹¨κ³„: μ „μ²΄</option>`;
            Object.keys(stageInfo).filter(key => key > 0).forEach(key => {
                 stageDD.innerHTML += `<option value="${key}">${stageInfo[key].name}</option>`;
            });
            stageDD.value = activeStageFilter;
        };
        
        const populateCategorySelect = () => {
            const categorySelect = document.getElementById('new-book-category-select');
            const categories = ['μΆ…κµ', ...new Set(bookData.map(b => b.category))].filter(c => c && c !== '(μ£Όμ )');
            categorySelect.innerHTML = [...new Set(categories)].map(c => `<option value="${c}">${c}</option>`).join('');
            categorySelect.innerHTML += `<option value="add-new">μ§μ ‘ μ¶”κ°€...</option>`;
        };


        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            
            const searchInput = document.getElementById('search-input');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const saveDatesBtn = document.getElementById('save-dates-btn');
            const addMemoBtn = document.getElementById('add-memo-btn');
            const addNewBookBtn = document.getElementById('add-new-book-btn-header');
            const addBookModalCloseBtn = document.getElementById('add-book-modal-close-btn');
            const addBookModalBackdrop = document.getElementById('add-book-modal-backdrop');
            const addBookCancelBtn = document.getElementById('add-book-cancel-btn');
            const addBookSaveBtn = document.getElementById('add-book-save-btn');
            
            const statisticsToggle = document.getElementById('statistics-toggle');
            const statisticsContent = document.getElementById('statistics-content');
            const statisticsArrow = document.getElementById('statistics-arrow');
            
            const dashboardToggle = document.getElementById('dashboard-toggle');
            const dashboardContent = document.getElementById('dashboard-content');
            const dashboardArrow = document.getElementById('dashboard-arrow');

            const sourceFilterDD = document.getElementById('source-filter-dropdown');
            const categoryFilterDD = document.getElementById('category-filter-dropdown');
            const stageFilterDD = document.getElementById('stage-filter-dropdown');
            
            const newBookCategorySelect = document.getElementById('new-book-category-select');
            const newBookCategoryInput = document.getElementById('new-book-category-input');

            searchInput.addEventListener('input', applyFilters);
            sourceFilterDD.addEventListener('change', (e) => { activeSourceFilter = e.target.value; applyFilters(); });
            categoryFilterDD.addEventListener('change', (e) => { activeCategoryFilter = e.target.value; applyFilters(); });
            stageFilterDD.addEventListener('change', (e) => { activeStageFilter = e.target.value; applyFilters(); });

            // Status filter listeners
            document.querySelectorAll('.status-filter').forEach(el => {
                el.addEventListener('click', (e) => {
                    const currentTarget = e.currentTarget;
                    const status = currentTarget.id.split('-')[2];
                    
                    if (currentTarget.classList.contains('active')) {
                        activeStatusFilter = 'All';
                        currentTarget.classList.remove('active');
                    } else {
                        document.querySelectorAll('.status-filter').forEach(elem => elem.classList.remove('active'));
                        activeStatusFilter = status;
                        currentTarget.classList.add('active');
                    }
                    applyFilters();
                });
            });
            
            // Details Modal listeners
            modalCloseBtn.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', closeModal);
            saveDatesBtn.addEventListener('click', handleSaveDates);
            addMemoBtn.addEventListener('click', handleAddMemo);
            document.getElementById('memo-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleAddMemo();
            });

            // Add Book Modal listeners
            addNewBookBtn.addEventListener('click', openAddBookModal);
            addBookModalCloseBtn.addEventListener('click', closeAddBookModal);
            addBookModalBackdrop.addEventListener('click', closeAddBookModal);
            addBookCancelBtn.addEventListener('click', closeAddBookModal);
            addBookSaveBtn.addEventListener('click', handleAddNewBook);
            document.querySelectorAll('input[name="book-type"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const stageContainer = document.getElementById('new-book-stage-container');
                    if (e.target.value === 'snu') {
                        stageContainer.classList.remove('hidden');
                    } else {
                        stageContainer.classList.add('hidden');
                    }
                });
            });
            newBookCategorySelect.addEventListener('change', (e) => {
                if (e.target.value === 'add-new') {
                    newBookCategorySelect.classList.add('hidden');
                    newBookCategoryInput.classList.remove('hidden');
                    newBookCategoryInput.focus();
                } else {
                    newBookCategorySelect.classList.remove('hidden');
                    newBookCategoryInput.classList.add('hidden');
                }
            });

            // Accordion listeners
            statisticsToggle.addEventListener('click', () => {
                statisticsContent.classList.toggle('open');
                statisticsArrow.classList.toggle('rotate-180');
            });
            dashboardToggle.addEventListener('click', () => {
                dashboardContent.classList.toggle('open');
                dashboardArrow.classList.toggle('rotate-180');
            });
            

            const setupCharts = () => {
                const officialBooks = bookData.filter(b => !b.isUserAdded);
                if (officialBooks.length === 0) return;

                const stageCounts = officialBooks.reduce((acc, book) => {
                    const stageName = `Stage ${book.stage}`;
                    acc[stageName] = (acc[stageName] || 0) + 1;
                    return acc;
                }, {});

                const categoryCounts = officialBooks.reduce((acc, book) => {
                    acc[book.category] = (acc[book.category] || 0) + 1;
                    return acc;
                }, {});

                const stageChartCtx = document.getElementById('stageChart').getContext('2d');
                new Chart(stageChartCtx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(stageCounts).map(key => stageInfo[key.split(' ')[1]].name.split(':')[0]),
                        datasets: [{
                            label: 'λ„μ„ μ',
                            data: Object.values(stageCounts),
                            backgroundColor: ['#145c70', '#2e869c', '#53b4cf', '#83d3e8', '#b2e2ef'],
                            hoverOffset: 4
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
                });

                const categoryChartCtx = document.getElementById('categoryChart').getContext('2d');
                new Chart(categoryChartCtx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(categoryCounts),
                        datasets: [{
                            label: 'λ„μ„ μ',
                            data: Object.values(categoryCounts),
                            backgroundColor: '#2e869c',
                            borderColor: '#145c70',
                            borderWidth: 1
                        }]
                    },
                    options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
                });
            };
            
            setupFilterDropdowns();
            applyFilters();
            setupCharts();
            updateStatistics();
        });

        // μ„¤μ •(ν†±λ‹λ°”ν€΄) ν΄λ¦­ μ‹ λ„μ„λ©λ΅κ΄€λ¦¬ νμ΄μ§€λ΅ μ΄λ™
        document.getElementById('admin-settings-btn').addEventListener('click', () => {
            document.getElementById('main-content-view').classList.add('hidden');
            document.getElementById('admin-view').classList.remove('hidden');
            // μƒλ‹¨ λ„¤λΉ„/λ²„νΌ μ¨κΈ°κΈ°
            document.querySelectorAll('nav.md\\:flex > *').forEach(el => el.classList.add('hidden'));
            renderAdminBookList();
        });

        // "μ„μΈλ€μ¶”μ²λ„μ„100" ν΄λ¦­ μ‹ ν™(μ²μν™”λ©΄)μΌλ΅ λ³µκ·€ + μƒλ‹¨ λ„¤λΉ„/λ²„νΌ λ‹¤μ‹ λ³΄μ΄κΈ°
        document.getElementById('home-btn').addEventListener('click', () => {
            document.getElementById('admin-view').classList.add('hidden');
            document.getElementById('main-content-view').classList.remove('hidden');
            // μƒλ‹¨ λ„¤λΉ„/λ²„νΌ λ‹¤μ‹ λ³΄μ΄κΈ°
            document.querySelectorAll('nav.md\\:flex > *').forEach(el => el.classList.remove('hidden'));
        });

        // κ΄€λ¦¬μ κ²€μƒ‰ μƒνƒ
        let adminSearchTerm = "";

        // κ΄€λ¦¬μ ν…μ΄λΈ” λ λ”λ§ (κ²€μƒ‰, μμ •, μ‚­μ  κΈ°λ¥ ν¬ν•¨)
        function renderAdminBookList() {
            const tbody = document.getElementById('admin-book-list');
            tbody.innerHTML = '';
            let filtered = bookData.filter(b => !b.isDeleted);

            // μ¶μ² ν•„ν„°
            if (adminSourceFilter === "SNU") {
                filtered = filtered.filter(book => !book.isUserAdded);
            } else if (adminSourceFilter === "MyBooks") {
                filtered = filtered.filter(book => book.isUserAdded);
            }

            // κ²€μƒ‰μ–΄ ν•„ν„°
            if (adminSearchTerm) {
                const term = adminSearchTerm.toLowerCase();
                filtered = filtered.filter(b =>
                    (b.title && b.title.toLowerCase().includes(term)) ||
                    (b.author && b.author.toLowerCase().includes(term))
                );
            }

            filtered.forEach(book => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="px-3 py-2">${book.id}</td>
                    <td class="px-3 py-2">${book.title}</td>
                    <td class="px-3 py-2">${book.author}</td>
                    <td class="px-3 py-2">${book.stage || ''}</td>
                    <td class="px-3 py-2">${book.category || ''}</td>
                    <td class="px-3 py-2">${book.publisher || ''}</td>
                    <td class="px-3 py-2 flex gap-2">
                        <button class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 admin-edit-btn" data-id="${book.id}">μμ •</button>
                        <button class="bg-stone-400 text-white px-3 py-1 rounded hover:bg-stone-600 admin-delete-btn" data-id="${book.id}">μ‚­μ </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // μμ • λ²„νΌ μ΄λ²¤νΈ
            document.querySelectorAll('.admin-edit-btn').forEach(btn => {
                btn.onclick = function() {
                    const id = Number(this.dataset.id);
                    const book = bookData.find(b => b.id === id);
                    if (!book) return;
                    document.getElementById('add-book-modal-title').textContent = 'λ„μ„ μ •λ³΄ μμ •';
                    document.getElementById('new-book-title').value = book.title;
                    document.getElementById('new-book-author').value = book.author;
                    document.getElementById('new-book-publisher').value = book.publisher || '';
                    document.getElementById('new-book-guide').value = book.guide || '';
                    document.getElementById('new-book-category-input').value = '';
                    document.getElementById('new-book-category-input').classList.add('hidden');
                    document.getElementById('new-book-category-select').classList.remove('hidden');
                    document.getElementById('new-book-category-select').value = book.category || '';
                    document.getElementById('new-book-cover').value = book.cover || '';
                    if (book.stage) {
                        document.querySelector('input[name="book-type"][value="snu"]').checked = true;
                        document.getElementById('new-book-stage-container').classList.remove('hidden');
                        document.getElementById('new-book-stage').value = book.stage;
                    } else {
                        document.querySelector('input[name="book-type"][value="my"]').checked = true;
                        document.getElementById('new-book-stage-container').classList.add('hidden');
                    }
                    // μ €μ¥ λ²„νΌ μ΄λ²¤νΈ μ¤‘λ³µ λ°©μ§€
                    const addBookSaveBtn = document.getElementById('add-book-save-btn');
                    addBookSaveBtn.replaceWith(addBookSaveBtn.cloneNode(true)); // μ™„μ „ν κµμ²΄
                    const newAddBookSaveBtn = document.getElementById('add-book-save-btn');
                    newAddBookSaveBtn.onclick = function() {
                        const title = document.getElementById('new-book-title').value.trim();
                        const author = document.getElementById('new-book-author').value.trim();
                        if (!title || !author) {
                            alert('μ λ©κ³Ό μ €μλ” ν•„μ ν•­λ©μ…λ‹λ‹¤.');
                            return;
                        }
                        let stage = 0;
                        if (document.querySelector('input[name="book-type"]:checked').value === 'snu') {
                            stage = parseInt(document.getElementById('new-book-stage').value, 10);
                        }
                        let category = document.getElementById('new-book-category-select').value;
                        if (category === 'add-new') {
                            category = document.getElementById('new-book-category-input').value.trim();
                            if (!category) {
                                alert('μƒ λ¶„μ•Όλ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”.');
                                return;
                            }
                        }
                        book.title = title;
                        book.author = author;
                        book.publisher = document.getElementById('new-book-publisher').value.trim();
                        book.guide = document.getElementById('new-book-guide').value.trim();
                        book.category = category;
                        book.stage = stage;
                        book.cover = document.getElementById('new-book-cover').value.trim();
                        saveData();
                        renderAdminBookList();
                        updateStatistics();
                        applyFilters();
                        closeAddBookModal();
                    };
                    openAddBookModal();
                };
            });

            // μ‚­μ  λ²„νΌ μ΄λ²¤νΈ
            document.querySelectorAll('.admin-delete-btn').forEach(btn => {
                btn.onclick = function() {
                    const id = Number(this.dataset.id);
                    if (!confirm('μ •λ§ μ‚­μ ν•μ‹κ² μµλ‹κΉ?')) return;
                    const book = bookData.find(b => b.id === id);
                    if (book) {
                        book.isDeleted = true;
                        saveData();
                        renderAdminBookList();
                        updateStatistics();
                        applyFilters();
                    }
                };
            });
        }

        // μ¶μ² λ“λ΅­λ‹¤μ΄ μ΄λ²¤νΈ
        document.getElementById('admin-source-dropdown').addEventListener('change', (e) => {
            adminSourceFilter = e.target.value;
            renderAdminBookList();
        });

        // κ΄€λ¦¬μ κ²€μƒ‰ μ΄λ²¤νΈ
        document.getElementById('admin-search-btn').addEventListener('click', () => {
            adminSearchTerm = document.getElementById('admin-search-input').value.trim();
            renderAdminBookList();
        });
        document.getElementById('admin-search-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                adminSearchTerm = document.getElementById('admin-search-input').value.trim();
                renderAdminBookList();
            }
        });

        // μƒ μ±… μ¶”κ°€ λ²„νΌ(μ¶”κ°€ λ¨λ“λ΅)
        document.getElementById('add-new-book-btn-admin').addEventListener('click', () => {
            document.getElementById('add-book-modal-title').textContent = 'μƒ μ±… μ¶”κ°€ν•κΈ°';
            document.getElementById('new-book-title').value = '';
            document.getElementById('new-book-author').value = '';
            document.getElementById('new-book-publisher').value = '';
            document.getElementById('new-book-guide').value = '';
            document.getElementById('new-book-category-input').value = '';
            document.getElementById('new-book-category-input').classList.add('hidden');
            document.getElementById('new-book-category-select').classList.remove('hidden');
            document.querySelector('input[name="book-type"][value="my"]').checked = true;
            document.getElementById('new-book-stage-container').classList.add('hidden');
            // μ €μ¥ λ²„νΌ μ΄λ²¤νΈ μ¤‘λ³µ λ°©μ§€
            const addBookSaveBtn = document.getElementById('add-book-save-btn');
            addBookSaveBtn.replaceWith(addBookSaveBtn.cloneNode(true)); // μ™„μ „ν κµμ²΄
            const newAddBookSaveBtn = document.getElementById('add-book-save-btn');
            newAddBookSaveBtn.onclick = handleAddNewBook;
            openAddBookModal();
        });
    </script>
</body>
</html>
