<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„œìš¸ëŒ€ ì¶”ì²œë„ì„œ 100ì„ : ì¸í„°ë™í‹°ë¸Œ ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Firebase ì„¤ì • ë° ì´ˆê¸°í™”
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore, collection, doc, getDocs, setDoc, updateDoc, deleteDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyCY0G7xD5l62db7ZBJc7rXNPWj_aeHeq2k",
            authDomain: "essential-vim-465607-n9.firebaseapp.com",
            databaseURL: "https://essential-vim-465607-n9-default-rtdb.firebaseio.com",
            projectId: "essential-vim-465607-n9",
            storageBucket: "essential-vim-465607-n9.firebasestorage.app",
            messagingSenderId: "584614677917",
            appId: "1:584614677917:web:5bde969ab8460768b23374",
            measurementId: "G-NM70GXW5D8"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.firebaseDB = db;
        console.log('Firebase ì´ˆê¸°í™” ì™„ë£Œ!');
        
        // Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ (ê¶Œí•œ í™•ì¸)
        async function testFirebaseConnection() {
            try {
                console.log('Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // ë¨¼ì € ì½ê¸° í…ŒìŠ¤íŠ¸
                const testCollection = collection(db, 'test');
                const querySnapshot = await getDocs(testCollection);
                console.log('âœ… Firebase ì½ê¸° ê¶Œí•œ í™•ì¸ë¨');
                
                // ì“°ê¸° í…ŒìŠ¤íŠ¸
                const testDoc = doc(db, 'test', 'connection');
                await setDoc(testDoc, { 
                    timestamp: new Date(),
                    message: 'ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ'
                });
                console.log('âœ… Firebase ì“°ê¸° ê¶Œí•œ í™•ì¸ë¨');
                console.log('ğŸ‰ Firebase ì™„ì „ ì—°ë™ ì„±ê³µ!');
                
            } catch (error) {
                console.error('âŒ Firebase ì—°ê²° ì‹¤íŒ¨:', error.message);
                if (error.code === 'permission-denied') {
                    console.error('ğŸ”’ ê¶Œí•œ ë¬¸ì œ: Firestore ë³´ì•ˆ ê·œì¹™ì„ í™•ì¸í•˜ì„¸ìš”');
                }
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.addEventListener('load', () => {
            setTimeout(testFirebaseConnection, 2000);
        });
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#0f766e">
    <link rel="apple-touch-icon" href="./book100db/icon6.svg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ì„œìš¸ëŒ€ì¶”ì²œë„ì„œ100">
    <!-- Chosen Palette: Calm Harmony (Warm Neutrals with Muted Teal/Slate Accents) -->
    <!-- Application Structure Plan: The application is designed as a single-page, scrollable journey based on the 5-step reading guide. This structure was chosen because it provides a clear, progressive path for beginner readers, which was the user's primary need. The user flow starts with a visual dashboard for a high-level overview, followed by navigation/filter controls, and then the main content area with book cards grouped by the 5 stages. This top-down structure (overview -> tools -> details) is intuitive and supports both passive browsing and active searching. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Distribution of books across 5 stages and original categories. Goal: Inform/Organize. Viz/Method: Two Chart.js charts (Doughnut for stages, Bar for categories) inside a collapsible accordion. Interaction: Tooltips on hover, expand/collapse accordion. Justification: Provides a quick, digestible summary of the list's composition, making it less intimidating and reducing initial screen clutter.
        - Report Info: Full book list (title, author, publisher, guide). Goal: Explore/Inform. Viz/Method: HTML/Tailwind CSS cards in a grid. Interaction: Cards are filterable by search and multiple dropdowns. Clicking a card opens a modal with detailed info and memo functionality. Justification: Cards are visually engaging. The modal provides detailed context and personal record-keeping without cluttering the main view.
        - Library/Method: Chart.js for canvas-based charts, Vanilla JS for all interactions (search, filtering, modal controls, memo CRUD operations, accordion).
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans KR', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 450px; margin-left: auto; margin-right: auto; height: 320px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .modal-enter { transform: scale(0.9); opacity: 0; }
        .modal-enter-active { transform: scale(1); opacity: 1; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .modal-leave-active { transform: scale(0.9); opacity: 0; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .backdrop-enter { opacity: 0; }
        .backdrop-enter-active { opacity: 1; transition: opacity 0.2s ease-in-out; }
        .backdrop-leave-active { opacity: 0; transition: opacity 0.2s ease-in-out; }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .accordion-content.open {
            max-height: 1000px;
        }
        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }
        .status-filter.active {
            background-color: #ccfbf1;
            border-color: #14b8a6;
        }
        .book-card:hover {
            background-color: white;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        /* ê´€ë¦¬ì ë„ì„œëª©ë¡ í…Œì´ë¸” í–‰ hover íš¨ê³¼ */
        #admin-book-list tr:hover {
            background-color: #e0f7fa !important;
            transition: background 0.2s;
        }
        /* ëª¨ë°”ì¼ì—ì„œ ì„¹ì…˜ ìˆ¨ê¹€ ì„¤ì • */
        @media (max-width: 767px) {
            #explorer-accordion.mobile-hidden,
            #statistics-accordion.mobile-hidden,
            #dashboard-accordion.mobile-hidden {
                display: none;
            }
        }
        /* ëˆˆ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .eye-toggle {
            cursor: pointer;
            transition: opacity 0.2s;
            color: #6b7280;
        }
        .eye-toggle:hover {
            color: #374151;
        }
        .eye-toggle.hidden-state {
            opacity: 0.4;
        }
        /* ë„¤ë¹„ê²Œì´ì…˜ í† ê¸€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .nav-toggle-btn {
            position: relative;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
        }
        .nav-toggle-btn.active {
            background-color: #14b8a6;
            color: white;
        }
        .nav-toggle-btn.inactive {
            background-color: #f3f4f6;
            color: #9ca3af;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div id="app">
        <header class="bg-white shadow-md sticky top-0 z-30">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-3">
                    <h1 class="text-xl md:text-2xl font-bold text-teal-800 cursor-pointer" id="home-btn">&nbsp;&nbsp;&nbsp;&nbsp;ì„œìš¸ëŒ€ì¶”ì²œë„ì„œ100</h1>
                    <nav class="hidden md:flex items-center gap-4">
                        <button id="nav-explorer-btn" class="nav-toggle-btn text-stone-600 hover:text-teal-700 transition-colors" data-section="explorer">ê²€ìƒ‰/í•„í„°</button>
                        <button id="nav-statistics-btn" class="nav-toggle-btn text-stone-600 hover:text-teal-700 transition-colors" data-section="statistics">ë…ì„œ í˜„í™©</button>
                        <button id="nav-dashboard-btn" class="nav-toggle-btn text-stone-600 hover:text-teal-700 transition-colors" data-section="dashboard">ì¸í¬ê·¸ë˜í”½</button>
                        <button id="admin-settings-btn" class="text-stone-600 hover:text-teal-700" title="ë„ì„œ ëª©ë¡ ê´€ë¦¬">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </button>
                        
                        <button id="add-new-book-btn-header" class="bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 transition text-sm">ìƒˆ ì±… ì¶”ê°€</button>
                        
                    </nav>
                    <div class="md:hidden">
                        <button id="hamburger-btn">
                            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                        </button>
                    </div>
                </div>
            </div>
             <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-stone-200 p-4 space-y-4">
                <div class="flex items-center justify-between py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">
                    <span>ê²€ìƒ‰/í•„í„°</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="mobile-explorer-toggle" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                    </label>
                </div>
                <div class="flex items-center justify-between py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">
                    <span>ë…ì„œ í˜„í™©</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="mobile-statistics-toggle" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                    </label>
                </div>
                <div class="flex items-center justify-between py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">
                    <span>ì¸í¬ê·¸ë˜í”½</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="mobile-dashboard-toggle" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                    </label>
                </div>
                <button id="trash-view-btn-mobile" class="w-full text-left py-2 px-4 text-stone-600 hover:bg-stone-100 rounded-md">íœ´ì§€í†µ</button>
                <div id="mobile-filter-area" class="space-y-4 border-t pt-4">
                    <!-- Mobile filters will be injected here by JS -->
                </div>
            </div>
        </header>

        <main class="container mx-auto p-4 md:p-8">
            <div id="main-content-view">
                <section id="explorer-accordion" class="bg-white p-6 rounded-xl shadow-md mb-12 scroll-mt-20">
                    <div id="explorer-toggle" class="flex justify-between items-center cursor-pointer">
                        <div class="flex items-center gap-3">
                            <svg id="explorer-eye" class="eye-toggle w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <h2 class="text-2xl font-semibold text-stone-700">ê²€ìƒ‰ ë° í•„í„°</h2>
                        </div>
                        <svg id="explorer-arrow" class="w-6 h-6 transition-transform rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                    <div id="explorer-content" class="accordion-content open">
                        <div class="mt-6">
                            <div class="flex flex-col md:flex-row gap-4 mb-4">
                                <div class="relative flex-grow">
                                    <input type="text" id="search-input" placeholder="ë„ì„œëª… ë˜ëŠ” ì €ìë¡œ ê²€ìƒ‰..." class="w-full p-3 pl-10 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <svg class="h-5 w-5 text-stone-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" /></svg>
                                    </div>
                                </div>
                                <button id="search-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition flex items-center justify-center gap-2">ê²€ìƒ‰</button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <select id="source-filter-dropdown" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500"></select>
                                </div>
                                <div>
                                    <select id="category-filter-dropdown" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500"></select>
                                </div>
                                <div>
                                    <select id="stage-filter-dropdown" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="statistics-accordion" class="mb-12 bg-white p-6 rounded-xl shadow-md scroll-mt-20">
                    <div id="statistics-toggle" class="flex justify-between items-center cursor-pointer">
                        <div class="flex items-center gap-3">
                            <svg id="statistics-eye" class="eye-toggle w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <h2 class="text-2xl font-semibold text-stone-700">ë‚˜ì˜ ë…ì„œ í˜„í™©</h2>
                        </div>
                        <svg id="statistics-arrow" class="w-6 h-6 transition-transform rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                    <div id="statistics-content" class="accordion-content open">
                        <div class="space-y-4 mt-6">
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-base font-medium text-teal-700">ì™„ë… ì§„í–‰ë¥ </span>
                                    <span id="progress-text" class="text-sm font-medium text-teal-700">0 / 65</span>
                                </div>
                                <div class="w-full bg-stone-200 rounded-full h-2.5">
                                    <div id="progress-bar" class="bg-teal-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-2 md:gap-4 text-center pt-2">
                                <div id="status-filter-completed" class="status-filter p-2 rounded-lg cursor-pointer border-2 border-transparent hover:bg-teal-50">
                                    <p class="text-2xl font-bold text-stone-800" id="completed-count">0</p>
                                    <p class="text-stone-500 text-sm">ì½ì€ ì±…</p>
                                </div>
                                <div id="status-filter-reading" class="status-filter p-2 rounded-lg cursor-pointer border-2 border-transparent hover:bg-teal-50">
                                    <p class="text-2xl font-bold text-stone-800" id="reading-count">0</p>
                                    <p class="text-stone-500 text-sm">ì½ëŠ” ì¤‘</p>
                                </div>
                                <div id="status-filter-tbr" class="status-filter p-2 rounded-lg cursor-pointer border-2 border-transparent hover:bg-teal-50">
                                    <p class="text-2xl font-bold text-stone-800" id="tbr-count">65</p>
                                    <p class="text-stone-500 text-sm">ì½ì„ ì±…</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="dashboard-accordion" class="mb-12 bg-white p-6 rounded-xl shadow-md scroll-mt-20">
                    <div id="dashboard-toggle" class="flex justify-between items-center cursor-pointer">
                        <div class="flex items-center gap-3">
                            <svg id="dashboard-eye" class="eye-toggle w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <h2 class="text-2xl font-semibold text-stone-700">ì¸í¬ê·¸ë˜í”½ ìš”ì•½</h2>
                        </div>
                        <svg id="dashboard-arrow" class="w-6 h-6 transition-transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                    <div id="dashboard-content" class="accordion-content">
                         <p class="max-w-3xl text-stone-600 leading-relaxed mt-4">
                            ì„œìš¸ëŒ€í•™êµ ì¶”ì²œë„ì„œ 100ì„ ì€ ë‹¨ìˆœí•œ ëª©ë¡ì„ ë„˜ì–´, ì„¸ìƒì„ ì´í•´í•˜ëŠ” ì§€í˜œì˜ ê¸¸ì„ ì•ˆë‚´í•˜ëŠ” ì§€ë„ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ë…ì„œì— ìµìˆ™í•˜ì§€ ì•Šì€ ë¶„ë“¤ë„ ì‰½ê³  ì¦ê²ê²Œ ê³ ì „ì˜ ì„¸ê³„ì— ì…ë¬¸í•  ìˆ˜ ìˆë„ë¡ '5ë‹¨ê³„ ë…ì„œ ì—¬ì •'ìœ¼ë¡œ ëª©ë¡ì„ ì¬êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ í†µê³„ì™€ ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ í†µí•´ ìì‹ ë§Œì˜ ë…ì„œ ê²½ë¡œë¥¼ ì„¤ê³„í•´ ë³´ì„¸ìš”.
                        </p>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-6">
                            <div class="p-2">
                                <h3 class="text-xl font-semibold text-center mb-4 text-teal-800">5ë‹¨ê³„ ì—¬ì • ë¶„í¬</h3>
                                <div class="chart-container">
                                    <canvas id="stageChart"></canvas>
                                </div>
                            </div>
                            <div class="p-2">
                                <h3 class="text-xl font-semibold text-center mb-4 text-teal-800">ë¶„ì•¼ë³„ ë„ì„œ ë¶„í¬</h3>
                                <div class="chart-container">
                                    <canvas id="categoryChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <div id="book-list" class="space-y-8">
                </div>
            </div>

            <div id="trash-view" class="hidden">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold text-stone-700 mb-4">íœ´ì§€í†µ</h2>
                    <div id="trash-list" class="space-y-3"></div>
                </div>
            </div>

            <!-- ë„ì„œëª©ë¡ê´€ë¦¬ í˜ì´ì§€ ì¶”ê°€ -->
            <div id="admin-view" class="hidden container mx-auto my-12">
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4">
                        <h2 class="text-3xl font-bold text-stone-800">ë„ì„œëª©ë¡ê´€ë¦¬</h2>
                        <div class="flex flex-1 justify-end items-center gap-2">
                            <!-- ì¶œì²˜ ë“œë¡­ë‹¤ìš´ -->
                            <select id="admin-source-dropdown" class="border border-stone-300 rounded-lg px-3 py-2 w-40 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                <option value="All">ì¶œì²˜: ì „ì²´</option>
                                <option value="SNU">ì„œìš¸ëŒ€ ì¶”ì²œ</option>
                                <option value="MyBooks">ë‚´ê°€ ì¶”ê°€í•œ ì±…</option>
                            </select>
                            <!-- ê²€ìƒ‰ ì…ë ¥ë°•ìŠ¤/ë²„íŠ¼ -->
                            <input type="text" id="admin-search-input" placeholder="ì œëª© ë˜ëŠ” ì €ì ê²€ìƒ‰" class="border border-stone-300 rounded-lg px-3 py-2 w-56 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" />
                            <button id="admin-search-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition">ê²€ìƒ‰</button>
                            <!-- ì•„ì´ì½˜ ê´€ë¦¬ ë²„íŠ¼ -->
                            <button id="icon-manage-btn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                </svg>
                                ICON
                            </button>
                            <!-- ìƒˆ ì±… ì¶”ê°€ ë²„íŠ¼ -->
                            <button id="add-new-book-btn-admin" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">ìƒˆ ì±… ì¶”ê°€</button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-stone-700">
                            <thead class="bg-stone-100">
                                <tr>
                                    <th class="px-3 py-2 font-semibold">ID</th>
                                    <th class="px-3 py-2 font-semibold">ì œëª©</th>
                                    <th class="px-3 py-2 font-semibold">ì €ì</th>
                                    <th class="px-3 py-2 font-semibold">ë‹¨ê³„</th>
                                    <th class="px-3 py-2 font-semibold">ë¶„ì•¼</th>
                                    <th class="px-3 py-2 font-semibold">ì¶œíŒì‚¬</th>
                                    <th class="px-3 py-2 font-semibold">ê´€ë¦¬</th>
                                </tr>
                            </thead>
                            <tbody id="admin-book-list">
                                <!-- JSë¡œ ë„ì„œ ëª©ë¡ì´ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="text-center py-8 text-stone-500">
            <p>&copy; 2024 Interactive Reading Guide. All rights reserved.</p>
        </footer>

        <!-- Details Modal -->
        <div id="modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-40 hidden"></div>
        <div id="modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col">
                <div class="p-6 md:p-8 overflow-y-auto">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <p id="modal-stage" class="text-sm font-bold text-teal-600"></p>
                            <h2 id="modal-title" class="text-2xl font-bold text-stone-800 mt-1"></h2>
                            <p id="modal-author" class="text-lg text-stone-600 mt-1"></p>
                        </div>
                        <button id="modal-close-btn" class="text-stone-400 hover:text-stone-700 transition">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="border-t border-stone-200 pt-4">
                        <h3 class="font-semibold text-stone-700 mb-2">ğŸ“– ì½ê¸° ê°€ì´ë“œ</h3>
                        <p id="modal-guide" class="text-stone-600 leading-relaxed"></p>
                        <p id="modal-publisher" class="text-sm text-stone-500 mt-6 text-right"></p>
                    </div>
                    <div class="mt-6 border-t border-stone-200 pt-4">
                        <h3 class="font-semibold text-stone-700 mb-3">ë…ì„œ ê¸°ë¡</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="start-date" class="block text-sm font-medium text-stone-600">ì‹œì‘ì¼</label>
                                <input type="date" id="start-date" class="mt-1 block w-full rounded-md border-stone-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                            </div>
                            <div>
                                <label for="completion-date" class="block text-sm font-medium text-stone-600">ì™„ë£Œì¼</label>
                                <input type="date" id="completion-date" class="mt-1 block w-full rounded-md border-stone-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                             <button id="delete-book-btn" class="px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition">íœ´ì§€í†µìœ¼ë¡œ ë³´ë‚´ê¸°</button>
                            <button id="save-dates-btn" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition">ë‚ ì§œ ì €ì¥</button>
                        </div>
                    </div>
                    <div class="mt-6 border-t border-stone-200 pt-4">
                        <h3 class="font-semibold text-stone-700 mb-3">ë‚˜ì˜ ë…ì„œ ë…¸íŠ¸ ğŸ“</h3>
                        <div id="memo-list" class="space-y-3 mb-4 max-h-48 overflow-y-auto pr-2">
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="memo-input" placeholder="ì—¬ê¸°ì— ìƒê°ì„ ë‚¨ê²¨ë³´ì„¸ìš”..." class="flex-grow p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-teal-500">
                            <button id="add-memo-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition">ì¶”ê°€</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add/Edit Book Modal -->
        <div id="add-book-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-40 hidden"></div>
        <div id="add-book-modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="add-book-modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col">
                <div class="p-6 md:p-8 overflow-y-auto">
                    <div class="flex justify-between items-start mb-6">
                        <h2 id="add-book-modal-title" class="text-2xl font-bold text-stone-800">ìƒˆ ì±… ì¶”ê°€í•˜ê¸°</h2>
                        <button id="add-book-modal-close-btn" class="text-stone-400 hover:text-stone-700 transition">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-stone-700">êµ¬ë¶„</label>
                            <div class="mt-2 flex gap-4">
                                <label class="flex items-center"><input type="radio" name="book-type" value="snu" class="mr-2 text-teal-600 focus:ring-teal-500">ì„œìš¸ëŒ€ ì¶”ì²œë„ì„œ</label>
                                <label class="flex items-center"><input type="radio" name="book-type" value="my" class="mr-2 text-teal-600 focus:ring-teal-500" checked>ë‚´ ì±…</label>
                            </div>
                        </div>
                        <div id="new-book-stage-container" class="hidden">
                            <label for="new-book-stage" class="block text-sm font-medium text-stone-700">ë‹¨ê³„ (1-5)</label>
                            <select id="new-book-stage" class="mt-1 block w-full rounded-md border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="1">1ë‹¨ê³„: ë¬¸í•™ì˜ ìˆ²</option>
                                <option value="2">2ë‹¨ê³„: ì—­ì‚¬ ì† ì¸ë¬¼</option>
                                <option value="3">3ë‹¨ê³„: ì‚¬íšŒ ë³´ê¸°</option>
                                <option value="4">4ë‹¨ê³„: ìƒê°ì˜ ë¿Œë¦¬</option>
                                <option value="5">5ë‹¨ê³„: ê³¼í•™ìœ¼ë¡œ ë³´ê¸°</option>
                            </select>
                        </div>
                        <div>
                            <label for="new-book-title" class="block text-sm font-medium text-stone-700">ì œëª©</label>
                            <input type="text" id="new-book-title" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" required>
                        </div>
                        <div>
                            <label for="new-book-author" class="block text-sm font-medium text-stone-700">ì €ì</label>
                            <input type="text" id="new-book-author" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" required>
                        </div>
                        <div>
                            <label for="new-book-publisher" class="block text-sm font-medium text-stone-700">ì¶œíŒì‚¬</label>
                            <input type="text" id="new-book-publisher" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2">
                        </div>
                        <div>
                            <div class="flex justify-between items-center">
                                <label for="new-book-category-select" class="block text-sm font-medium text-stone-700">ë¶„ì•¼</label>
                                <button id="manage-categories-btn" class="text-xs text-blue-600 hover:underline">ë¶„ì•¼ ê´€ë¦¬</button>
                            </div>
                            <div class="flex gap-2 mt-1">
                                <select id="new-book-category-select" class="flex-grow w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2"></select>
                                <input type="text" id="new-book-category-input" class="hidden w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" placeholder="ìƒˆ ë¶„ì•¼ ì…ë ¥">
                            </div>
                        </div>
                        <div>
                            <label for="new-book-guide" class="block text-sm font-medium text-stone-700">ê°„ë‹¨í•œ ì„¤ëª…/ë©”ëª¨</label>
                            <textarea id="new-book-guide" rows="3" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2"></textarea>
                        </div>
                        <div>
                            <label for="new-book-cover" class="block text-sm font-medium text-stone-700">ì±… í‘œì§€ ì´ë¯¸ì§€(URL)</label>
                            <input type="url" id="new-book-cover" class="mt-1 block w-full rounded-md border border-stone-400 shadow-sm focus:border-teal-500 focus:ring-teal-500 p-2" placeholder="https://example.com/cover.jpg">
                            <p class="text-xs text-stone-400 mt-1">ì´ë¯¸ì§€ ì£¼ì†Œ(URL) ì…ë ¥. (ì§ì ‘ ì—…ë¡œë“œëŠ” ì§€ì›í•˜ì§€ ì•ŠìŒ)</p>
                        </div>
                    </div>
                    <div class="mt-8 flex justify-end gap-3">
                        <button id="add-book-cancel-btn" class="px-4 py-2 bg-stone-200 text-stone-700 rounded-lg hover:bg-stone-300 transition">ì·¨ì†Œ</button>
                        <button id="add-book-save-btn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">ì €ì¥í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Management Modal -->
        <div id="category-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden"></div>
        <div id="category-modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="category-modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold">ë¶„ì•¼ ê´€ë¦¬</h2>
                        <button id="category-modal-close-btn" class="text-2xl font-bold text-stone-500 hover:text-stone-800">&times;</button>
                    </div>
                    <div id="category-list" class="space-y-2 max-h-64 overflow-y-auto"></div>
                </div>
            </div>
        </div>

        <!-- Icon Management Modal -->
        <div id="icon-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden"></div>
        <div id="icon-modal" class="fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div id="icon-modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-stone-800">ğŸ¨ ì•± ì•„ì´ì½˜ ê´€ë¦¬</h2>
                        <button id="icon-modal-close-btn" class="text-stone-400 hover:text-stone-700 transition">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- íƒ­ ë©”ë‰´ -->
                    <div class="flex border-b border-stone-200 mb-6">
                        <button id="tab-default" class="icon-tab px-4 py-2 font-medium text-purple-600 border-b-2 border-purple-600">ê¸°ë³¸ ì•„ì´ì½˜</button>
                        <button id="tab-templates" class="icon-tab px-4 py-2 font-medium text-stone-500 hover:text-purple-600">í…œí”Œë¦¿</button>
                        <button id="tab-custom" class="icon-tab px-4 py-2 font-medium text-stone-500 hover:text-purple-600">ì»¤ìŠ¤í…€ ì œì‘</button>
                        <button id="tab-upload" class="icon-tab px-4 py-2 font-medium text-stone-500 hover:text-purple-600">íŒŒì¼ ì—…ë¡œë“œ</button>
                    </div>

                    <!-- ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ -->
                    <div class="bg-stone-50 rounded-lg p-4 mb-6">
                        <div class="flex items-center gap-4">
                            <div class="text-sm font-medium text-stone-700">ë¯¸ë¦¬ë³´ê¸°:</div>
                            <div id="icon-preview" class="w-16 h-16 rounded-lg border border-stone-300 bg-white flex items-center justify-center overflow-hidden">
                                <!-- ë¯¸ë¦¬ë³´ê¸° ì•„ì´ì½˜ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                            <div class="text-xs text-stone-500">
                                ì„ íƒí•œ ì•„ì´ì½˜ì´ í™ˆí™”ë©´ì—ì„œ ì´ë ‡ê²Œ ë³´ì…ë‹ˆë‹¤
                            </div>
                        </div>
                    </div>

                    <!-- ì½˜í…ì¸  ì˜ì—­ -->
                    <div class="overflow-y-auto max-h-96">
                        <!-- ê¸°ë³¸ ì•„ì´ì½˜ íƒ­ -->
                        <div id="content-default" class="icon-content">
                            <div class="text-center">
                                <div id="default-icon-display" class="w-32 h-32 mx-auto mb-4 rounded-lg border border-stone-300 bg-white flex items-center justify-center overflow-hidden">
                                    <!-- ê¸°ë³¸ SVG ì•„ì´ì½˜ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                                </div>
                                <p class="text-stone-600 mb-4">ê°œë°œìê°€ ì œì‘í•œ ê¸°ë³¸ ì•„ì´ì½˜ì…ë‹ˆë‹¤</p>
                                <button id="select-default-icon" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">ì´ ì•„ì´ì½˜ ì‚¬ìš©í•˜ê¸°</button>
                            </div>
                        </div>

                        <!-- í…œí”Œë¦¿ ì•„ì´ì½˜ íƒ­ -->
                        <div id="content-templates" class="icon-content hidden">
                            <div class="grid grid-cols-4 gap-4 mb-6">
                                <!-- í…œí”Œë¦¿ ì•„ì´ì½˜ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                            <div class="text-center">
                                <button id="select-template-icon" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition" disabled>í…œí”Œë¦¿ì„ ì„ íƒí•˜ì„¸ìš”</button>
                            </div>
                        </div>

                        <!-- ì»¤ìŠ¤í…€ ì œì‘ íƒ­ -->
                        <div id="content-custom" class="icon-content hidden">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-stone-700 mb-2">ë°°ê²½ìƒ‰</label>
                                    <div class="flex gap-2">
                                        <input type="color" id="custom-bg-color" value="#0f766e" class="w-12 h-10 rounded border border-stone-300">
                                        <input type="text" id="custom-bg-text" value="#0f766e" class="flex-1 px-3 py-2 border border-stone-300 rounded-lg">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-stone-700 mb-2">ì•„ì´ì½˜ ìƒ‰ìƒ</label>
                                    <div class="flex gap-2">
                                        <input type="color" id="custom-icon-color" value="#ffffff" class="w-12 h-10 rounded border border-stone-300">
                                        <input type="text" id="custom-icon-text" value="#ffffff" class="flex-1 px-3 py-2 border border-stone-300 rounded-lg">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-stone-700 mb-2">í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)</label>
                                    <input type="text" id="custom-text" placeholder="ì˜ˆ: 100" maxlength="5" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-stone-700 mb-2">ì•„ì´ì½˜ ìŠ¤íƒ€ì¼</label>
                                    <select id="custom-style" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        <option value="book">ğŸ“š ì±… ì•„ì´ì½˜</option>
                                        <option value="library">ğŸ›ï¸ ë„ì„œê´€ ì•„ì´ì½˜</option>
                                        <option value="graduation">ğŸ“ ì¡¸ì—…ëª¨ ì•„ì´ì½˜</option>
                                        <option value="heart">ğŸ’– í•˜íŠ¸ ì•„ì´ì½˜</option>
                                    </select>
                                </div>
                                <button id="generate-custom-icon" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition mb-3">ì•„ì´ì½˜ ìƒì„±í•˜ê¸°</button>
                                <button id="select-custom-icon" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition" disabled>ë¨¼ì € ì•„ì´ì½˜ì„ ìƒì„±í•˜ì„¸ìš”</button>
                            </div>
                        </div>

                        <!-- íŒŒì¼ ì—…ë¡œë“œ íƒ­ -->
                        <div id="content-upload" class="icon-content hidden">
                            <div class="border-2 border-dashed border-stone-300 rounded-lg p-8 text-center mb-4">
                                <input type="file" id="icon-file-input" accept="image/*" class="hidden">
                                <svg class="w-12 h-12 mx-auto mb-4 text-stone-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                <p class="text-stone-600 mb-4">PNG, JPG, SVG íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                                <p class="text-xs text-stone-500 mb-4">ê¶Œì¥ í¬ê¸°: 192x192 í”½ì…€ ì´ìƒ</p>
                                <button id="upload-btn" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">íŒŒì¼ ì„ íƒ</button>
                            </div>
                            <div class="text-center">
                                <button id="select-uploaded-icon" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition" disabled>íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</button>
                            </div>
                        </div>
                    </div>

                    <!-- ë²„íŠ¼ ì˜ì—­ -->
                    <div class="flex justify-end gap-3 mt-6 pt-4 border-t border-stone-200">
                        <button id="icon-cancel-btn" class="px-6 py-2 bg-stone-200 text-stone-700 rounded-lg hover:bg-stone-300 transition">ì·¨ì†Œ</button>
                        <button id="icon-apply-btn" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">ì ìš©í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const initialBookData = [
            { id: 1, stage: 1, title: 'í”¼ë…¸í‚¤ì˜¤ì˜ ëª¨í—˜', author: 'ì¹´ë¥¼ë¡œ ì½œë¡œë””', publisher: 'ë¹„ë£¡ì†Œ (ì–´ìŠ¤ë³¸)', category: 'ì™¸êµ­ë¬¸í•™', guide: 'ë‹¨ìˆœí•œ ë™í™”ë¥¼ ë„˜ì–´ ì¸ê°„ì˜ ì„±ì¥ê³¼ ì„ íƒì— ëŒ€í•œ ê¹Šì€ ì„±ì°°ì„ ë‹´ê³  ìˆì–´ ì–´ë¥¸ì—ê²Œë„ í° ìš¸ë¦¼ì„ ì¤ë‹ˆë‹¤.', cover: 'https://sg-0427.github.io/book100/1í”¼ë…¸í‚¤ì˜¤ì˜ëª¨í—˜-ì¹´ë¥¼ë¡œ', startDate: null, completionDate: null, memos: [] },
            { id: 2, stage: 1, title: 'í—ˆìƒì „', author: 'ë°•ì§€ì›', publisher: 'ì‚¼ì„±ì¶œíŒì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: 'ì§§ì§€ë§Œ ê°•ë ¬í•œ í’ìì™€ ë¹„íŒì´ ë‹´ê¸´ í•œë¬¸ ë‹¨í¸ì†Œì„¤ì…ë‹ˆë‹¤. ì¡°ì„  í›„ê¸° ì‚¬íšŒì˜ ëª¨ìŠµê³¼ ì‹¤í•™ì‚¬ìƒì„ ì—¿ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', cover: './1í—ˆìƒì „-ë°•ì§€ì›.png', startDate: null, completionDate: null, memos: [] },
            { id: 3, stage: 1, title: 'ì¶˜í–¥ì „', author: 'ì‘ì ë¯¸ìƒ', publisher: 'ë¯¼ìŒì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: 'í•œêµ­ì¸ì´ ê°€ì¥ ì‚¬ë‘í•˜ëŠ” ê³ ì „ ì†Œì„¤ ì¤‘ í•˜ë‚˜ë¡œ, ì‹ ë¶„ì„ ë›°ì–´ë„˜ëŠ” ì‚¬ë‘ê³¼ ì‚¬íšŒì— ëŒ€í•œ ì €í•­ ì •ì‹ ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', cover: './1ì¶˜í–¥ì „-ì‘ìë¯¸ìƒ.png', startDate: null, completionDate: null, memos: [] },
            { id: 4, stage: 1, title: 'êµ¬ìš´ëª½', author: 'ê¹€ë§Œì¤‘', publisher: 'ë¯¼ìŒì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: 'ì¸ìƒì˜ ë§ì—†ìŒê³¼ ê¿ˆì˜ ì˜ë¯¸ë¥¼ í™˜ìƒì ì¸ êµ¬ì¡°ë¡œ í’€ì–´ë‚¸ ê³ ì „ ì†Œì„¤ì˜ ì •ìˆ˜ì…ë‹ˆë‹¤.', cover: './1êµ¬ìš´ëª½.png', startDate: null, completionDate: null, memos: [] },
            { id: 5, stage: 1, title: 'í•„ê²½ì‚¬ ë°”í‹€ë¹„', author: 'í—ˆë¨¼ ë©œë¹Œ', publisher: 'ë¬¸í•™ë™ë„¤', category: 'ì™¸êµ­ë¬¸í•™', guide: '"ì•ˆ í•˜ëŠ” í¸ì„ íƒí•˜ê² ìŠµë‹ˆë‹¤"ë¼ëŠ” ìœ ëª…í•œ ë¬¸ì¥ìœ¼ë¡œ ìë³¸ì£¼ì˜ ì‚¬íšŒ ì† ì¸ê°„ ì†Œì™¸ ë¬¸ì œë¥¼ ë‚ ì¹´ë¡­ê²Œ íŒŒê³ ë“œëŠ” ì¤‘í¸ì†Œì„¤ì…ë‹ˆë‹¤.', cover: './1í•„ê²½ì‚¬ë°”í‹€ë¹„-í—ˆë¨¼ë©œë¹Œ.png', startDate: null, completionDate: null, memos: [] },
            { id: 6, stage: 1, title: 'ìƒë¡ìˆ˜', author: 'ì‹¬í›ˆ', publisher: 'ì†Œë‹´ì¶œíŒì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: '1930ë…„ëŒ€ ë†ì´Œê³„ëª½ìš´ë™ì„ ë°°ê²½ìœ¼ë¡œ ì Šì€ì´ë“¤ì˜ ì´ìƒê³¼ í—Œì‹ ì„ ê·¸ë¦° ê°ë™ì ì¸ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.', cover: './1ìƒë¡ìˆ˜-ì‹¬í›ˆ.png', startDate: null, completionDate: null, memos: [] },
            { id: 7, stage: 1, title: 'ì„¤êµ­', author: 'ê°€ì™€ë°”íƒ€ ì•¼ìŠ¤ë‚˜ë¦¬', publisher: 'ë¯¼ìŒì‚¬', category: 'ì™¸êµ­ë¬¸í•™', guide: 'ë…¸ë²¨ë¬¸í•™ìƒ ìˆ˜ìƒì‘ìœ¼ë¡œ, í—ˆë¬´ì™€ íƒë¯¸ì˜ ì„¸ê³„ë¥¼ ê°ê°ì ì´ê³  ì•„ë¦„ë‹¤ìš´ ë¬¸ì²´ë¡œ ê·¸ë ¤ë‚¸ ì‘í’ˆì…ë‹ˆë‹¤.', cover: './1ì„¤êµ­-ê°€ì™€ë°”íƒ€ì•¼ìŠ¤ë‚˜ë¦¬.png', startDate: null, completionDate: null, memos: [] },
            { id: 8, stage: 1, title: 'ì´ë°©ì¸', author: 'ì•Œë² ë¥´ ì¹´ë®ˆ', publisher: 'ë¯¼ìŒì‚¬', category: 'ì™¸êµ­ë¬¸í•™', guide: 'ë¶€ì¡°ë¦¬í•œ ì„¸ìƒ ì†ì—ì„œ ì´ë°©ì¸ìœ¼ë¡œ ì‚´ì•„ê°€ëŠ” í•œ ì¸ê°„ì˜ ëª¨ìŠµì„ í†µí•´ ì‹¤ì¡´ì˜ ì˜ë¯¸ë¥¼ ë¬»ëŠ” í˜„ëŒ€ ë¬¸í•™ì˜ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 9, stage: 1, title: 'ê´€ì´Œìˆ˜í•„', author: 'ì´ë¬¸êµ¬', publisher: 'ì°½ë¹„', category: 'í•œêµ­ë¬¸í•™', guide: 'ì‚¬ë¼ì ¸ê°€ëŠ” ë†ì´Œ ê³µë™ì²´ì˜ ëª¨ìŠµì„ ë”°ëœ»í•˜ê³  í•´í•™ì ì¸ ì–¸ì–´ë¡œ ë‹´ì•„ë‚¸ ìì „ì  ì†Œì„¤ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 10, stage: 1, title: 'ê³ ì „ì‹œê°€ì„ ì§‘', author: 'í¸ì§‘ë¶€ ì—®ìŒ', publisher: 'ì°½ë¹„', category: 'í•œêµ­ë¬¸í•™', guide: 'í–¥ê°€, ê³ ë ¤ê°€ìš”, ì‹œì¡° ë“± ìš°ë¦¬ ê³ ì „ ì‹œê°€ì˜ ì•„ë¦„ë‹¤ì›€ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ì…ë¬¸ì„œì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 11, stage: 1, title: 'ì •ì§€ìš© ì „ì§‘', author: 'ì •ì§€ìš©', publisher: 'ë¬¸í•™ê³¼ì§€ì„±ì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: 'í•œêµ­ í˜„ëŒ€ì‹œì˜ ê°ê°ì ì¸ ì–¸ì–´ë¥¼ ê°œì²™í•œ ì •ì§€ìš© ì‹œì¸ì˜ ì‹œ ì„¸ê³„ë¥¼ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 12, stage: 1, title: 'ë°±ì„ ì‹œ ì „ì§‘', author: 'ë°±ì„', publisher: 'ì°½ë¹„', category: 'í•œêµ­ë¬¸í•™', guide: 'í† ì†ì ì¸ ì–¸ì–´ì™€ ì• í‹‹í•œ ì •ì„œë¡œ ë§ì€ ì‚¬ë‘ì„ ë°›ëŠ” ë°±ì„ ì‹œì¸ì˜ ì‹œë¥¼ ì´ë§ë¼í•œ ì‹œì§‘ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 13, stage: 1, title: 'ê´‘ì¥', author: 'ìµœì¸í›ˆ', publisher: 'ë¬¸í•™ê³¼ì§€ì„±ì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: 'ë‚¨ë¶ ë¶„ë‹¨ì˜ ë¹„ê·¹ ì†ì—ì„œ ì§„ì •í•œ ì´ë…ê³¼ ì‚¶ì˜ ê³µê°„ì„ ì°¾ì•„ ê³ ë‡Œí•˜ëŠ” ì§€ì‹ì¸ì˜ ëª¨ìŠµì„ ê·¸ë ¸ìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 14, stage: 1, title: 'ì£„ì™€ ë²Œ', author: 'í‘œë„ë¥´ ë„ìŠ¤í† ì˜™ìŠ¤í‚¤', publisher: 'ë¯¼ìŒì‚¬', category: 'ì™¸êµ­ë¬¸í•™', guide: 'ê°€ë‚œí•œ ì²­ë…„ì˜ ë²”ì£„ì™€ ì‹¬ë¦¬ë¥¼ í†µí•´ ì£„ì™€ êµ¬ì›, ì¸ê°„ ë‚´ë©´ì˜ ì„ ê³¼ ì•…ì„ ê¹Šì´ íƒêµ¬í•˜ëŠ” ëŒ€ì‘ì…ë‹ˆë‹¤.', cover: './1ì£„ì™€ë²Œ-í‘œë„ë¥´ë„ìŠ¤í† ì˜™ìŠ¤í‚¤.png', startDate: null, completionDate: null, memos: [] },
            { id: 15, stage: 1, title: 'ëˆí‚¤í˜¸í…Œ', author: 'ë¯¸ê²” ë° ì„¸ë¥´ë°˜í…ŒìŠ¤', publisher: 'ì—´ë¦°ì±…ë“¤', category: 'ì™¸êµ­ë¬¸í•™', guide: 'í˜„ì‹¤ê³¼ ì´ìƒì˜ ê´´ë¦¬ ì†ì—ì„œë„ ìì‹ ë§Œì˜ ì •ì˜ë¥¼ ì¶”êµ¬í•˜ëŠ” ê¸°ì‚¬ì˜ ìœ ì¾Œí•˜ê³ ë„ ìŠ¬í”ˆ ëª¨í—˜ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 16, stage: 1, title: 'í† ì§€', author: 'ë°•ê²½ë¦¬', publisher: 'ë§ˆë¡œë‹ˆì—ë¶ìŠ¤', category: 'í•œêµ­ë¬¸í•™', guide: 'êµ¬í•œë§ë¶€í„° í•´ë°©ê¹Œì§€, ê²©ë™ì˜ í•œêµ­ ê·¼í˜„ëŒ€ì‚¬ë¥¼ ì‚´ì•„ê°„ ë¯¼ì¤‘ì˜ ì‚¶ì„ ì¥ëŒ€í•˜ê²Œ ê·¸ë ¤ë‚¸ ëŒ€í•˜ì†Œì„¤ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 17, stage: 1, title: 'ì…°ìµìŠ¤í”¼ì–´ 4ëŒ€ ë¹„ê·¹', author: 'ìœŒë¦¬ì—„ ì…°ìµìŠ¤í”¼ì–´', publisher: 'ë¯¼ìŒì‚¬', category: 'ì™¸êµ­ë¬¸í•™', guide: 'ã€í–„ë¦¿ã€, ã€ì˜¤ì…€ë¡œã€, ã€ë¦¬ì–´ì™•ã€, ã€ë§¥ë² ìŠ¤ã€. ì¸ê°„ì˜ ìš•ë§, ì§ˆíˆ¬, ë³µìˆ˜ ë“± ë³´í¸ì ì¸ ê°ì •ì„ ë‹¤ë£¬ ë¶ˆë©¸ì˜ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 18, stage: 1, title: 'íŒŒìš°ìŠ¤íŠ¸', author: 'ìš”í•œ ë³¼í”„ê°• í° ê´´í…Œ', publisher: 'ë¯¼ìŒì‚¬', category: 'ì™¸êµ­ë¬¸í•™', guide: 'ì„ ê³¼ ì•…, ì§€ì‹ê³¼ êµ¬ì›ì˜ ë¬¸ì œë¥¼ ë‹¤ë£¬ ë…ì¼ ë¬¸í•™ì˜ ìµœê³  ê±¸ì‘ìœ¼ë¡œ, í‰ìƒì— ê±¸ì³ ì½ì–´ë³¼ ë§Œí•œ ê°€ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 19, stage: 2, title: 'ë‚œì¤‘ì¼ê¸°', author: 'ì´ìˆœì‹ ', publisher: 'ë¯¼ìŒì‚¬', category: 'ì—­ì‚¬', guide: 'ì „ìŸì´ë¼ëŠ” ê·¹í•œ ìƒí™© ì†ì—ì„œ ë‚˜ë¼ë¥¼ êµ¬í•œ ì˜ì›…ì˜ ì¸ê°„ì ì¸ ê³ ë‡Œì™€ ë¦¬ë”ì‹­ì„ ìƒìƒí•˜ê²Œ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 20, stage: 2, title: 'ë°±ë²”ì¼ì§€', author: 'ê¹€êµ¬', publisher: 'ëŒë² ê°œ', category: 'ì—­ì‚¬', guide: 'ë…ë¦½ì„ ìœ„í•´ í‰ìƒì„ ë°”ì¹œ ê¹€êµ¬ ì„ ìƒì˜ ì‚¶ì„ í†µí•´ ê²©ë™ì˜ ê·¼ëŒ€ì‚¬ì™€ ë¯¼ì¡±ì˜ ë¯¸ë˜ì— ëŒ€í•œ ê³ ë¯¼ì„ ì—¿ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 21, stage: 2, title: 'í•œì¤‘ë¡', author: 'í˜œê²½ê¶ í™ì”¨', publisher: 'ë¬¸í•™ë™ë„¤', category: 'ì—­ì‚¬', guide: 'ì‚¬ë„ì„¸ìì˜ ë¹„ê·¹ì„ ì•„ë‚´ì´ì ì–´ë¨¸ë‹ˆì˜ ì‹œì„ ìœ¼ë¡œ ê¸°ë¡í•œ ê¶ì¤‘ë¬¸í•™ì˜ ë°±ë¯¸ë¡œ, ì—­ì‚¬ì  ì‚¬ê±´ ì´ë©´ì˜ ì¸ê°„ ë“œë¼ë§ˆë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 22, stage: 2, title: 'ì‚¼êµ­ìœ ì‚¬', author: 'ì¼ì—°', publisher: 'ë¯¼ìŒì‚¬', category: 'ì—­ì‚¬', guide: 'ë‹¨êµ° ì‹ í™”ë¥¼ ë¹„ë¡¯í•œ ìš°ë¦¬ ê³ ëŒ€ì˜ ì‹ í™”ì™€ ì„¤í™”ê°€ ê°€ë“ ë‹´ê²¨ ìˆì–´, ã€ì‚¼êµ­ì‚¬ê¸°ã€ì™€ëŠ” ë‹¤ë¥¸ ì—­ì‚¬ì˜ ì¬ë¯¸ë¥¼ ì„ ì‚¬í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 23, stage: 2, title: 'ì‚¼êµ­ì‚¬ê¸°', author: 'ê¹€ë¶€ì‹', publisher: 'ë™ì•„ì¶œíŒ', category: 'ì—­ì‚¬', guide: 'í˜„ì¡´í•˜ëŠ” ê°€ì¥ ì˜¤ë˜ëœ ìš°ë¦¬ ì—­ì‚¬ì„œë¡œ, ê³ êµ¬ë ¤, ë°±ì œ, ì‹ ë¼ì˜ ì—­ì‚¬ë¥¼ êµ­ê°€ì˜ ê´€ì ì—ì„œ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 24, stage: 2, title: 'í•œêµ­í†µì‚¬', author: 'ë°•ì€ì‹', publisher: 'ë²”ìš°ì‚¬', category: 'ì—­ì‚¬', guide: "'í†µì‚¬(ç—›å²)'ë¼ëŠ” ì œëª©ì²˜ëŸ¼, ë‚˜ë¼ë¥¼ ìƒì€ ì•„í”” ì†ì—ì„œ ë¯¼ì¡±ì˜ ì—­ì‚¬ë¥¼ ì •ë¦¬í•œ ì±…ì…ë‹ˆë‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 25, stage: 2, title: 'ì‚¬ê¸°ì—´ì „', author: 'ì‚¬ë§ˆì²œ', publisher: 'ë¯¼ìŒì‚¬', category: 'ì—­ì‚¬', guide: "ë‹¤ì–‘í•œ ì¸ê°„ êµ°ìƒì˜ ì‚¶ì„ ìƒë™ê° ìˆê²Œ ê·¸ë ¤ë‚´ 'ì¸ê°„í•™ì˜ ë³´ê³ 'ë¼ ë¶ˆë¦½ë‹ˆë‹¤. ì—­ì‚¬ ì† ì¸ë¬¼ë“¤ì˜ ì„±ê³µê³¼ ì‹¤íŒ¨ë¥¼ í†µí•´ ì‚¶ì˜ ì§€í˜œë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 26, stage: 2, title: 'ì—­ì‚¬', author: 'í—¤ë¡œë„í† ìŠ¤', publisher: 'ë„ì„œì¶œíŒ ìˆ²', category: 'ì—­ì‚¬', guide: "'ì—­ì‚¬ì˜ ì•„ë²„ì§€' í—¤ë¡œë„í† ìŠ¤ê°€ í˜ë¥´ì‹œì•„ ì „ìŸì„ ì¤‘ì‹¬ìœ¼ë¡œ ê³ ëŒ€ ì„¸ê³„ì˜ ë‹¤ì–‘í•œ ë¬¸í™”ì™€ ì—­ì‚¬ë¥¼ í¥ë¯¸ë¡­ê²Œ ê¸°ë¡í•œ ì±…ì…ë‹ˆë‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 27, stage: 2, title: 'íŒŒí•œì§‘', author: 'ì´ì¸ë¡œ', publisher: 'ì‹ ì›ë¬¸í™”ì‚¬', category: 'í•œêµ­ë¬¸í•™', guide: 'ê³ ë ¤ ì‹œëŒ€ ë¬¸ì¸ì´ ì“´ ìš°ë¦¬ë‚˜ë¼ ìµœì´ˆì˜ ë¬¸í•™ ë¹„í‰ì„œë¡œ, ë‹¹ì‹œì˜ ì‹œì™€ ì¸ë¬¼ì— ëŒ€í•œ í¥ë¯¸ë¡œìš´ ì´ì•¼ê¸°ë“¤ì´ ë‹´ê²¨ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 28, stage: 3, title: 'ëª©ë¯¼ì‹¬ì„œ', author: 'ì •ì•½ìš©', publisher: 'ì°½ë¹„', category: 'ì‚¬ìƒ', guide: 'ëª©ë¯¼ê´€, ì¦‰ ê³µì§ìê°€ ê°–ì¶°ì•¼ í•  ë§ˆìŒê°€ì§ê³¼ ì‹¤ë¬´ë¥¼ ë‹¤ë£¬ ì±…ì´ì§€ë§Œ, ì˜¤ëŠ˜ë‚  ë¦¬ë”ì˜ ì—­í• ê³¼ ê³µë™ì²´ì˜ ìœ¤ë¦¬ë¥¼ ìƒê°í•˜ê²Œ í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 29, stage: 3, title: 'ììœ ë¡ ', author: 'ì¡´ ìŠ¤íŠœì–´íŠ¸ ë°€', publisher: 'ì±…ì„¸ìƒ', category: 'ì‚¬ìƒ', guide: 'ê°œì¸ì˜ ììœ ê°€ ì™œ ì¤‘ìš”í•œì§€, ê·¸ ë²”ìœ„ëŠ” ì–´ë””ê¹Œì§€ì¸ì§€ì— ëŒ€í•´ ëª…ì¾Œí•˜ê²Œ ì„¤ëª…í•˜ëŠ” ììœ ì£¼ì˜ ì‚¬ìƒì˜ êµê³¼ì„œì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 30, stage: 3, title: 'êµ°ì£¼ë¡ ', author: 'ë‹ˆì½œë¡œ ë§ˆí‚¤ì•„ë²¨ë¦¬', publisher: 'ê¹Œì¹˜', category: 'ì‚¬ìƒ', guide: 'ê¶Œë ¥ì˜ ë³¸ì§ˆê³¼ í†µì¹˜ ê¸°ìˆ ì„ ëƒ‰ì² í•˜ê²Œ ë¶„ì„í•˜ì—¬ ì˜¤ëŠ˜ë‚ ê¹Œì§€ ìˆ˜ë§ì€ ë…¼ìŸì„ ë‚³ê³  ìˆëŠ” ì •ì¹˜í•™ì˜ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 31, stage: 3, title: 'êµ­ë¶€ë¡ ', author: 'ì• ë¤ ìŠ¤ë¯¸ìŠ¤', publisher: 'ë¹„ë´‰ì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: "'ë³´ì´ì§€ ì•ŠëŠ” ì†'ìœ¼ë¡œ ìœ ëª…í•œ ê³ ì „ ê²½ì œí•™ì˜ ì¶œë°œì . ì‹œì¥ ê²½ì œì˜ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸° ìœ„í•œ í•„ë…ì„œì…ë‹ˆë‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 32, stage: 3, title: 'í”„ë¡œí…ŒìŠ¤íƒ„í‹°ì¦˜ì˜ ìœ¤ë¦¬ì™€ ìë³¸ì£¼ì˜ì˜ ì •ì‹ ', author: 'ë§‰ìŠ¤ ë² ë²„', publisher: 'ë¬¸ì˜ˆì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: 'ê·¼ë©´, ì„±ì‹¤ì´ë¼ëŠ” ì¢…êµì  ìœ¤ë¦¬ê°€ ì–´ë–»ê²Œ ìë³¸ì£¼ì˜ ë°œì „ì˜ ì •ì‹ ì  í† ëŒ€ê°€ ë˜ì—ˆëŠ”ì§€ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 33, stage: 3, title: 'ìŠ¬í”ˆ ì—´ëŒ€', author: 'í´ë¡œë“œ ë ˆë¹„ìŠ¤íŠ¸ë¡œìŠ¤', publisher: 'í•œê¸¸ì‚¬', category: 'ì‚¬ìƒ', guide: 'ì„œêµ¬ ë¬¸ëª…ì˜ ì‹œì„ ì—ì„œ ë²—ì–´ë‚˜ ì•„ë§ˆì¡´ ì›ì£¼ë¯¼ ì‚¬íšŒë¥¼ ê¸°ë¡í•œ êµ¬ì¡°ì£¼ì˜ ì¸ë¥˜í•™ì˜ ëª…ì €ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 34, stage: 3, title: 'ë¯¸ë””ì–´ì˜ ì´í•´', author: 'ë§ˆì…œ ë§¤í´ë£¨ì–¸', publisher: 'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ë¶ìŠ¤', category: 'ì‚¬ìƒ', guide: '"ë¯¸ë””ì–´ëŠ” ë©”ì‹œì§€ë‹¤"ë¼ëŠ” ëª…ì œë¡œ, ë¯¸ë””ì–´ê°€ ìš°ë¦¬ ì‚¬íšŒì™€ ì‚¬ê³ ë°©ì‹ì„ ì–´ë–»ê²Œ ë³€í™”ì‹œí‚¤ëŠ”ì§€ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 35, stage: 3, title: 'ì¸ê°„ì˜ ì¡°ê±´', author: 'í•œë‚˜ ì•„ë ŒíŠ¸', publisher: 'í•œê¸¸ì‚¬', category: 'ì‚¬ìƒ', guide: 'ë…¸ë™, ì‘ì—…, í–‰ìœ„ë¼ëŠ” ì¸ê°„ì˜ ì„¸ ê°€ì§€ í™œë™ì„ í†µí•´ ì¸ê°„ë‹¤ìš´ ì‚¶ì˜ ì¡°ê±´ì´ ë¬´ì—‡ì¸ì§€ íƒêµ¬í•˜ëŠ” í˜„ëŒ€ ì² í•™ì˜ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 36, stage: 3, title: 'í”„ë‘ìŠ¤ í˜ëª…ì— ê´€í•œ ì„±ì°°', author: 'ì—ë“œë¨¼ë“œ ë²„í¬', publisher: 'í•œê¸¸ì‚¬', category: 'ì‚¬ìƒ', guide: 'ê¸‰ì§„ì ì¸ í˜ëª…ì˜ ìœ„í—˜ì„±ì„ ê²½ê³ í•˜ë©° ì ì§„ì  ê°œí˜ì˜ ì¤‘ìš”ì„±ì„ ì—­ì„¤í•œ ë³´ìˆ˜ì£¼ì˜ ì •ì¹˜ì² í•™ì˜ ì›ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 37, stage: 3, title: 'ë‹´ë¡ ê³¼ ë¬¸í•™', author: '(ì£¼ì œ)', publisher: 'í•´ë‹¹ ì—†ìŒ', category: 'ì‚¬ìƒ', guide: 'íŠ¹ì • ì±…ì´ ì•„ë‹Œ ì£¼ì œì…ë‹ˆë‹¤. ë¯¸ì…¸ í‘¸ì½”ì˜ ì €ì‘ì²˜ëŸ¼, ë¬¸í•™ ì‘í’ˆì´ ì–´ë–»ê²Œ ì‚¬íšŒì  ë‹´ë¡ ì„ í˜•ì„±í•˜ê³  ì˜í–¥ì„ ë°›ëŠ”ì§€ íƒêµ¬í•˜ëŠ” ë¶„ì•¼ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 38, stage: 3, title: 'ì¦ì–¸ì˜ ì‚¬íšŒí•™', author: '(ì£¼ì œ)', publisher: 'í•´ë‹¹ ì—†ìŒ', category: 'ì‚¬ìƒ', guide: 'íŠ¹ì • ì±…ì´ ì•„ë‹Œ ì£¼ì œì…ë‹ˆë‹¤. ê°œì¸ì˜ ì¦ì–¸ì´ ì–´ë–»ê²Œ ì‚¬íšŒì  ì§„ì‹¤ì„ êµ¬ì„±í•˜ê³  ì—­ì‚¬ë¥¼ ê¸°ë¡í•˜ëŠ”ì§€ë¥¼ ë‹¤ë£¨ëŠ” ì‚¬íšŒí•™ ë¶„ì•¼ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 39, stage: 3, title: 'í•œë°˜ë„ì™€ ì£¼ë³€ 4ê°•', author: '(ì£¼ì œ)', publisher: 'ì„ìœ ë¬¸í™”ì‚¬', category: 'ì‚¬ìƒ', guide: 'íŠ¹ì • ì±…ì´ ì•„ë‹Œ ì£¼ì œì…ë‹ˆë‹¤. í•œë°˜ë„ë¥¼ ë‘˜ëŸ¬ì‹¼ ë¯¸êµ­, ì¤‘êµ­, ì¼ë³¸, ëŸ¬ì‹œì•„ì˜ êµ­ì œ ê´€ê³„ì™€ ì™¸êµ ì •ì±…ì„ ë¶„ì„í•˜ëŠ” ë¶„ì•¼ì˜ ì±…ë“¤ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 40, stage: 4, title: 'ë…¼ì–´', author: 'ê³µì', publisher: 'í™ìµì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: '2500ë…„ì´ ì§€ë‚œ ì§€ê¸ˆë„ ì‚¶ì˜ ì§€í‘œê°€ ë˜ëŠ” ê³µìì˜ ê°€ë¥´ì¹¨. ì‚¬ëŒë‹¤ì›€(ä»)ê³¼ ê´€ê³„ì˜ ì˜ˆ(ç¦®)ì— ëŒ€í•´ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 41, stage: 4, title: 'ë§¹ì', author: 'ë§¹ì', publisher: 'í™ìµì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: 'ì¸ê°„ì˜ ì„ í•œ ë³¸ì„±ê³¼ ì™•ë„ì •ì¹˜ë¥¼ ì—­ì„¤í•œ ë§¹ìì˜ ì‚¬ìƒì„ í†µí•´ ì •ì˜ì™€ ë¦¬ë”ì‹­ì˜ ì˜ë¯¸ë¥¼ ë˜ìƒˆê²¨ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 42, stage: 4, title: 'ëŒ€í•™', author: 'ì¦ì', publisher: 'ë¯¼ìŒì‚¬', category: 'ì‚¬ìƒ', guide: 'ìˆ˜ì‹ ì œê°€ì¹˜êµ­í‰ì²œí•˜(ä¿®èº«é½Šå®¶æ²»åœ‹å¹³å¤©ä¸‹)ì˜ ì›ë¦¬ë¥¼ ì„¤ëª…í•˜ëŠ” ìœ êµì˜ í•µì‹¬ ê²½ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 43, stage: 4, title: 'ì¥ì', author: 'ì¥ì', publisher: 'ê¸¸', category: 'ì‚¬ìƒ', guide: 'ê³ ì •ê´€ë…ì—ì„œ ë²—ì–´ë‚˜ ììœ ë¡œìš´ ì‚¶ì„ ì´ì•¼ê¸°í•˜ëŠ” ë„ê°€ ì‚¬ìƒì˜ ì •ìˆ˜. ìƒìƒë ¥ê³¼ ìœ ë¨¸ê°€ ê°€ë“í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 44, stage: 4, title: 'ë‹¤ì‚°ë¬¸ì„ ', author: 'ì •ì•½ìš©', publisher: 'ì°½ë¹„', category: 'ì‚¬ìƒ', guide: 'ì‹¤í•™ì‚¬ìƒì„ ì§‘ëŒ€ì„±í•œ ë‹¤ì‚° ì •ì•½ìš©ì˜ ë°©ëŒ€í•œ ì €ìˆ  ì¤‘ì—ì„œ í•µì‹¬ì ì¸ ê¸€ë“¤ì„ ëª¨ì•„ ì—®ì€ ì±…ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 45, stage: 4, title: 'ì„±í•™ì‹­ë„', author: 'ì´í™©', publisher: 'í™ìµì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: 'í‡´ê³„ ì´í™©ì´ ì„ê¸ˆì—ê²Œ ì˜¬ë¦° ì„±ë¦¬í•™ì˜ í•µì‹¬ ìš”ì•½ì„œ. ì—´ ê°œì˜ ê·¸ë¦¼ìœ¼ë¡œ ì„±ë¦¬í•™ì˜ ì²´ê³„ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 46, stage: 4, title: 'ê²©ëª½ìš”ê²°', author: 'ì´ì´', publisher: 'ì„œí•´ë¬¸ì§‘', category: 'ì‚¬ìƒ', guide: 'ìœ¨ê³¡ ì´ì´ê°€ í•™ë¬¸ì„ ì‹œì‘í•˜ëŠ” ì´ë“¤ì„ ìœ„í•´ ì“´ ìˆ˜ì–‘ì„œë¡œ, ì˜¬ë°”ë¥¸ ë§ˆìŒê°€ì§ê³¼ ê³µë¶€ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 47, stage: 4, title: 'ì˜ì‚°ë¬¸ë‹µ', author: 'í™ëŒ€ìš©', publisher: 'ì•„ì¹´ë„·', category: 'ì‚¬ìƒ', guide: 'ì¡°ì„  í›„ê¸° ì‹¤í•™ìì˜ ê³¼í•™ ì‚¬ìƒì„ ë‹´ì€ ì±…ìœ¼ë¡œ, ì§€ë™ì„¤ê³¼ ìš°ì£¼ë¬´í•œë¡  ë“± ì‹œëŒ€ë¥¼ ì•ì„œê°„ ìƒê°ì„ ì—¿ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 48, stage: 4, title: 'êµ­ê°€', author: 'í”Œë¼í†¤', publisher: 'ì„œê´‘ì‚¬', category: 'ì‚¬ìƒ', guide: 'ì •ì˜ë¡œìš´ êµ­ê°€ë€ ë¬´ì—‡ì´ë©°, ì´ìƒì ì¸ í†µì¹˜ìëŠ” ëˆ„êµ¬ì¸ê°€ì— ëŒ€í•œ í”Œë¼í†¤ì˜ ìƒê°ì„ ë‹´ì€ ì„œì–‘ ì² í•™ì˜ ì›ì²œì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 49, stage: 4, title: 'ë°©ë²•ì„œì„¤', author: 'ë¥´ë„¤ ë°ì¹´ë¥´íŠ¸', publisher: 'ë¬¸ì˜ˆì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: '"ë‚˜ëŠ” ìƒê°í•œë‹¤, ê³ ë¡œ ì¡´ì¬í•œë‹¤." ëª¨ë“  ê²ƒì„ ì˜ì‹¬í•˜ë©° í™•ì‹¤í•œ ì§€ì‹ì˜ í† ëŒ€ë¥¼ ì°¾ìœ¼ë ¤ëŠ” ê·¼ëŒ€ ì² í•™ì˜ ì¶œë°œì ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 50, stage: 4, title: 'ì •ë¶€ë¡ ', author: 'ì¡´ ë¡œí¬', publisher: 'ê¹Œì¹˜', category: 'ì‚¬ìƒ', guide: 'ì‚¬íšŒê³„ì•½ê³¼ ì‹œë¯¼ì˜ ì €í•­ê¶Œì„ ì£¼ì¥í•˜ë©° ê·¼ëŒ€ ë¯¼ì£¼ì£¼ì˜ ì‚¬ìƒì˜ í† ëŒ€ë¥¼ ë§ˆë ¨í•œ ì±…ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 51, stage: 4, title: 'ì‹¤ì²œì´ì„±ë¹„íŒ', author: 'ì„ë§ˆëˆ„ì—˜ ì¹¸íŠ¸', publisher: 'ì•„ì¹´ë„·', category: 'ì‚¬ìƒ', guide: '"ë„¤ ì˜ì§€ì˜ ì¤€ì¹™ì´ í•­ìƒ ë™ì‹œì— ë³´í¸ì  ë²•ì¹™ì˜ ì›ë¦¬ê°€ ë  ìˆ˜ ìˆë„ë¡ í–‰ìœ„í•˜ë¼." ì¹¸íŠ¸ ìœ¤ë¦¬í•™ì˜ í•µì‹¬ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 52, stage: 4, title: 'ê¿ˆì˜ í•´ì„', author: 'ì§€í¬ë¬¸íŠ¸ í”„ë¡œì´íŠ¸', publisher: 'ì—´ë¦°ì±…ë“¤', category: 'ì‚¬ìƒ', guide: 'ê¿ˆì„ í†µí•´ ì¸ê°„ì˜ ë¬´ì˜ì‹ ì„¸ê³„ë¥¼ íƒêµ¬í•˜ë©° ì •ì‹ ë¶„ì„í•™ì˜ ë¬¸ì„ ì—° ê¸°ë…ë¹„ì ì¸ ì €ì‘ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 53, stage: 4, title: 'ìë³¸ë¡ ', author: 'ì¹´ë¥¼ ë§ˆë¥´í¬ìŠ¤', publisher: 'ë¹„ë´‰ì¶œíŒì‚¬', category: 'ì‚¬ìƒ', guide: 'ìë³¸ì£¼ì˜ ì²´ì œì˜ ì‘ë™ ì›ë¦¬ì™€ ê·¸ ë¬¸ì œì ì„ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•œ ì±…ìœ¼ë¡œ, í˜„ëŒ€ ì‚¬íšŒë¥¼ ì´í•´í•˜ëŠ” ë° í•„ìˆ˜ì ì¸ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 54, stage: 4, title: 'ì´ê¸°ë¡ ê³¼ í•œêµ­ì‚¬ìƒ', author: '(ì£¼ì œ)', publisher: 'í•´ë‹¹ ì—†ìŒ', category: 'ì‚¬ìƒ', guide: 'íŠ¹ì • ì±…ì´ ì•„ë‹Œ ì£¼ì œì…ë‹ˆë‹¤. ì´(ç†)ì™€ ê¸°(æ°£)ì˜ ê´€ê³„ë¥¼ í†µí•´ ìš°ì£¼ì™€ ì¸ê°„ì„ ì„¤ëª…í•˜ë ¤ í–ˆë˜ í•œêµ­ ì„±ë¦¬í•™ì˜ í•µì‹¬ ë…¼ìŸì„ ë‹¤ë£¨ëŠ” ë¶„ì•¼ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 55, stage: 5, title: 'ì¢…ì˜ ê¸°ì›', author: 'ì°°ìŠ¤ ë‹¤ìœˆ', publisher: 'ë™ì„œë¬¸í™”ì‚¬', category: 'ê³¼í•™', guide: 'ìì—°ì„ íƒì„ í†µí•œ ì§„í™”ë¼ëŠ” í˜ëª…ì ì¸ ì•„ì´ë””ì–´ë¡œ ìƒëª…ê³¼ ì„¸ê³„ì— ëŒ€í•œ ìš°ë¦¬ì˜ ì´í•´ë¥¼ ì™„ì „íˆ ë°”ê¾¼ ê³¼í•™ì‚¬ì˜ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 56, stage: 5, title: 'ê³¼í•™í˜ëª…ì˜ êµ¬ì¡°', author: 'í† ë¨¸ìŠ¤ ì¿¤', publisher: 'ê¹Œì¹˜', category: 'ê³¼í•™', guide: "ê³¼í•™ì´ ì ì§„ì ìœ¼ë¡œ ë°œì „í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 'íŒ¨ëŸ¬ë‹¤ì„ì˜ ì „í™˜'ì„ í†µí•´ í˜ëª…ì ìœ¼ë¡œ ë³€í™”í•œë‹¤ëŠ” ì£¼ì¥ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 57, stage: 5, title: 'ì´ê¸°ì  ìœ ì „ì', author: 'ë¦¬ì²˜ë“œ ë„í‚¨ìŠ¤', publisher: 'ì„ìœ ë¬¸í™”ì‚¬', category: 'ê³¼í•™', guide: 'ìƒëª…ì˜ ì§„í™”ë¥¼ ìœ ì „ìì˜ ê´€ì ì—ì„œ ì„¤ëª…í•˜ë©° ì „ ì„¸ê³„ì ì¸ ë…¼ìŸì„ ë¶ˆëŸ¬ì¼ìœ¼í‚¨ í˜„ëŒ€ì˜ ê³ ì „ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 58, stage: 5, title: 'ë¶€ë¶„ê³¼ ì „ì²´', author: 'ë² ë¥´ë„ˆ í•˜ì´ì  ë² ë¥´í¬', publisher: 'ì„œì»¤ìŠ¤ì¶œíŒìƒíšŒ', category: 'ê³¼í•™', guide: 'ì–‘ìì—­í•™ì˜ ê±°ë‘ì¸ í•˜ì´ì  ë² ë¥´í¬ê°€ ë™ë£Œ ê³¼í•™ìë“¤ê³¼ ë‚˜ëˆˆ ëŒ€í™”ë¥¼ í†µí•´ ê³¼í•™ê³¼ ì² í•™, ì¸ìƒì— ëŒ€í•´ ì„±ì°°í•˜ëŠ” ì±…ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 59, stage: 5, title: 'ì—”íŠ¸ë¡œí”¼', author: 'ì œëŸ¬ë¯¸ ë¦¬í”„í‚¨', publisher: 'ì„¸ì¢…ì—°êµ¬ì›', category: 'ê³¼í•™', guide: 'ì—´ì—­í•™ ì œ2ë²•ì¹™ì¸ ì—”íŠ¸ë¡œí”¼ ê°œë…ì„ í†µí•´ í˜„ëŒ€ ì‚°ì—… ë¬¸ëª…ì˜ ìœ„ê¸°ë¥¼ ì§„ë‹¨í•˜ê³  ìƒˆë¡œìš´ ì„¸ê³„ê´€ì„ ì œì‹œí•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 60, stage: 5, title: 'í˜ë¥´ë§ˆì˜ ë§ˆì§€ë§‰ ì •ë¦¬', author: 'ì‚¬ì´ë¨¼ ì‹±', publisher: 'ì˜ë¦¼ì¹´ë””ë„', category: 'ê³¼í•™', guide: '350ë…„ê°„ í’€ë¦¬ì§€ ì•Šì•˜ë˜ ìˆ˜í•™ ë‚œì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ìˆ˜í•™ìë“¤ì˜ ì—´ì •ê³¼ ë„ì „ì„ í¥ë¯¸ì§„ì§„í•˜ê²Œ ê·¸ë¦° ë…¼í”½ì…˜ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 61, stage: 5, title: 'ì¹´ì˜¤ìŠ¤', author: 'ì œì„ìŠ¤ ê¸€ë¦­', publisher: 'ë™ì•„ì‹œì•„', category: 'ê³¼í•™', guide: "ë‚˜ë¹„ì˜ ë‚ ê°¯ì§“ì´ íƒœí’ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤ëŠ” 'ë‚˜ë¹„ íš¨ê³¼'ë¡œ ìœ ëª…í•œ ì¹´ì˜¤ìŠ¤ ì´ë¡ ì„ ëŒ€ì¤‘ì—ê²Œ ì†Œê°œí•œ ì±…ì…ë‹ˆë‹¤.", startDate: null, completionDate: null, memos: [] },
            { id: 62, stage: 5, title: 'ì‹ ê¸°ê´€', author: 'í”„ëœì‹œìŠ¤ ë² ì´ì»¨', publisher: 'í•œê¸¸ì‚¬', category: 'ê³¼í•™', guide: 'ê´€ì°°ê³¼ ì‹¤í—˜ì„ ì¤‘ì‹œí•˜ëŠ” ê²½í—˜ì£¼ì˜ì  ê³¼í•™ ë°©ë²•ë¡ ì„ ì œì‹œí•˜ë©° ê·¼ëŒ€ ê³¼í•™ì˜ ë¬¸ì„ ì—° ì±…ì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 63, stage: 5, title: 'ê°™ê¸°ë„ í•˜ê³  ì•„ë‹ˆ ê°™ê¸°ë„ í•˜ê³ ', author: 'ë¡œì–¼ë“œ í˜¸í”„ë§Œ', publisher: 'ê¹Œì¹˜', category: 'ê³¼í•™', guide: 'ë…¸ë²¨ í™”í•™ìƒ ìˆ˜ìƒìê°€ í™”í•™ì˜ ë³¸ì§ˆê³¼ ì•„ë¦„ë‹¤ì›€ì„ ì‹œì ì¸ ì–¸ì–´ë¡œ í’€ì–´ë‚¸ ë…íŠ¹í•œ ê³¼í•™ êµì–‘ì„œì…ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 64, stage: 5, title: 'ê°ê´€ì„±ì˜ ì¹¼ë‚ ', author: 'ì°°ìŠ¤ ê¸¸ë¦¬ìŠ¤í”¼', publisher: 'ìƒˆë¬¼ê²°', category: 'ê³¼í•™', guide: 'ê³¼í•™ì‚¬ì˜ ì£¼ìš” ë…¼ìŸë“¤ì„ í†µí•´ ê³¼í•™ ì§€ì‹ì´ ì–´ë–»ê²Œ í˜•ì„±ë˜ê³  ë°œì „í•´ì™”ëŠ”ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] },
            { id: 65, stage: 5, title: 'ê³¼í•™ê¸°ì´ˆ', author: '(ì£¼ì œ)', publisher: 'í•´ë‹¹ ì—†ìŒ', category: 'ê³¼í•™', guide: 'íŠ¹ì • ì±…ì´ ì•„ë‹Œ ì£¼ì œì…ë‹ˆë‹¤. ì„œìš¸ëŒ€í•™êµ ì¶œíŒë¬¸í™”ì›ì˜ ã€ê³¼í•™ê³ ì „ì„ ì§‘ã€ì²˜ëŸ¼, ê³¼í•™ì‚¬ì˜ ê¸°ì´ˆë¥¼ ì´ë£¨ëŠ” ì£¼ìš” ê³ ì „ë“¤ì„ ì—®ì€ ì±…ë“¤ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.', startDate: null, completionDate: null, memos: [] }
        ];

        let bookData = [];
        let currentEditingBookId = null;
        let activeSourceFilter = 'All';
        let activeCategoryFilter = 'All';
        let activeStageFilter = 'All'; // ì „ì²´ë¡œ ë³€ê²½í•˜ì—¬ ëª¨ë“  ë„ì„œ í‘œì‹œ
        let activeStatusFilter = 'All';

        // ì„¹ì…˜ í‘œì‹œ ìƒíƒœ ê´€ë¦¬
        let sectionVisibility = {
            explorer: true,
            statistics: true,
            dashboard: true
        };

        const stageInfo = {
            0: { name: 'ë‚˜ì˜ ì„œì¬: ì§ì ‘ ì¶”ê°€í•œ ì±…ë“¤', description: 'ë‚´ê°€ ì§ì ‘ ì¶”ê°€í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ë„ì„œ ëª©ë¡ì…ë‹ˆë‹¤.' },
            1: { name: '1ë‹¨ê³„: ë¬¸í•™ì˜ ìˆ²ì— ì²«ë°œ ë‚´ë”›ê¸°', description: 'ë…ì„œì˜ ì¦ê±°ì›€ì„ ëŠë¼ê³  ê¾¸ì¤€í•œ ìŠµê´€ì„ ë§Œë“œëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ë¹„êµì  ì ‘ê·¼í•˜ê¸° ì‰¬ìš´ ì†Œì„¤ê³¼ ì‹œë¥¼ í†µí•´ ì´ì•¼ê¸°ì˜ ì¬ë¯¸ì— ë¹ ì ¸ë³´ì„¸ìš”.' },
            2: { name: '2ë‹¨ê³„: ì—­ì‚¬ ì† ì¸ë¬¼ê³¼ ì„¸ìƒ ë§Œë‚˜ê¸°', description: 'ë¬¸í•™ì„ í†µí•´ ë‹ìš´ í¥ë¯¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‹¤ì œ ì—­ì‚¬ì™€ ì¸ë¬¼ ì´ì•¼ê¸°ë¡œ ê´€ì‹¬ì‚¬ë¥¼ ë„“í˜€ê°€ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ì—­ì‚¬ë¥¼ í†µí•´ í˜„ì¬ë¥¼ ì´í•´í•˜ëŠ” ì‹œê°ì„ ê¸°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
            3: { name: '3ë‹¨ê³„: ì‚¬íšŒë¥¼ ë³´ëŠ” ëˆˆ í‚¤ìš°ê¸°', description: 'ê°œì¸ì˜ ì‚¶ì„ ë„˜ì–´ ìš°ë¦¬ê°€ ì‚¬ëŠ” ì‚¬íšŒì˜ êµ¬ì¡°ì™€ ì‘ë™ ì›ë¦¬ì— ëŒ€í•´ ê³ ë¯¼í•´ë³´ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ì •ì¹˜, ê²½ì œ, ì‚¬íšŒ ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ê³ ì „ì„ í†µí•´ ë¹„íŒì  ì‚¬ê³ ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤.' },
            4: { name: '4ë‹¨ê³„: ìƒê°ì˜ ë¿Œë¦¬ íƒí—˜í•˜ê¸°', description: 'ë‹¤ì†Œ ì–´ë ¤ìš¸ ìˆ˜ ìˆì§€ë§Œ, ì¸ë¥˜ì˜ ì§€í˜œê°€ ë‹´ê¸´ í•µì‹¬ ì‚¬ìƒë“¤ì„ ì§ì ‘ ë§Œë‚˜ë³´ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ì„¸ìƒì„ ë³´ëŠ” ê·¼ë³¸ì ì¸ ì‹œê°ì„ ê¸°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
            5: { name: '5ë‹¨ê³„: ê³¼í•™ìœ¼ë¡œ ì„¸ìƒ ë‹¤ì‹œ ë³´ê¸°', description: 'ì¸ë¬¸í•™ì  ìƒìƒë ¥ì— ê³¼í•™ì  ì‚¬ê³ ë°©ì‹ì„ ë”í•´ ì„¸ìƒì„ ë”ìš± ì…ì²´ì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ìƒëª…, ìš°ì£¼, ê¸°ìˆ ì— ëŒ€í•œ ìœ„ëŒ€í•œ ë°œê²¬ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”.' }
        };

        // 1. íŒŒë€ìƒ‰ ê³„ì—´ì˜ ì‘ì€ ì±… ì•„ì´ì½˜ SVG
const coloredBookIcon = `
<svg width="32" height="32" viewBox="0 0 32 32" fill="none">
  <rect x="4" y="8" width="24" height="16" rx="3" fill="#F4F7FE"/>
  <rect x="6" y="10" width="10" height="12" rx="2" fill="#E0E7FF"/>
  <rect x="16" y="10" width="10" height="12" rx="2" fill="#C7D2FE"/>
  <rect x="15" y="10" width="2" height="12" fill="#A5B4FC"/>
  <ellipse cx="16" cy="22" rx="2" ry="1" fill="#60A5FA"/>
</svg>
`;

        const getStatusIcon = (book) => {
            if (book.completionDate) return 'âœ…'; // Completed
            if (book.startDate) return 'ğŸ”–'; // Reading
            return 'ğŸ“–'; // To-be-read
        };

        // Firebase ì—°ë™ í•¨ìˆ˜ë“¤ (Firebase ì„¤ì • ì™„ë£Œ í›„ í™œì„±í™”)
        let isFirebaseEnabled = false;
        
        const initFirebase = async () => {
            if (typeof window.firebaseDB !== 'undefined') {
                isFirebaseEnabled = true;
                console.log('Firebase ì—°ê²° ì„±ê³µ');
                await syncFromFirebase();
            } else {
                console.log('Firebase ë¯¸ì—°ê²° - ë¡œì»¬ ì €ì¥ì†Œ ì‚¬ìš©');
                isFirebaseEnabled = false;
            }
        };
        
        const syncToFirebase = async (data) => {
            if (!isFirebaseEnabled) return;
            
            try {
                const { setDoc, doc } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');
                await setDoc(doc(window.firebaseDB, 'bookData', 'userBooks'), {
                    books: data,
                    lastUpdated: new Date().toISOString()
                });
                console.log('Firebase ë™ê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('Firebase ì €ì¥ ì‹¤íŒ¨:', error);
            }
        };
        
        const syncFromFirebase = async () => {
            if (!isFirebaseEnabled) return;
            
            try {
                const { getDoc, doc } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');
                const docRef = doc(window.firebaseDB, 'bookData', 'userBooks');
                const docSnap = await getDoc(docRef);
                
                if (docSnap.exists()) {
                    const firebaseData = docSnap.data();
                    const localData = JSON.parse(localStorage.getItem('snuBookTrackerData') || '[]');
                    
                    // ë¡œì»¬ê³¼ Firebase ë°ì´í„° ì¤‘ ë” ìµœì‹  ê²ƒ ì‚¬ìš©
                    const localLastUpdate = localStorage.getItem('lastLocalUpdate');
                    if (!localLastUpdate || new Date(firebaseData.lastUpdated) > new Date(localLastUpdate)) {
                        bookData = firebaseData.books.map(book => ({...book, memos: book.memos || [], isDeleted: book.isDeleted || false }));
                        localStorage.setItem('snuBookTrackerData', JSON.stringify(bookData));
                        localStorage.setItem('lastLocalUpdate', firebaseData.lastUpdated);
                        console.log('Firebaseì—ì„œ ë°ì´í„° ë™ê¸°í™”');
                    }
                }
            } catch (error) {
                console.error('Firebase ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        };
        
        const saveData = async () => {
            const now = new Date().toISOString();
            localStorage.setItem('snuBookTrackerData', JSON.stringify(bookData));
            localStorage.setItem('lastLocalUpdate', now);
            
            const filters = { activeSourceFilter, activeCategoryFilter, activeStageFilter, activeStatusFilter };
            localStorage.setItem('snuBookTrackerFilters', JSON.stringify(filters));
            
            // Firebase ë™ê¸°í™”
            if (isFirebaseEnabled) {
                await syncToFirebase(bookData);
            }
        };

        const loadData = () => {
            const savedData = localStorage.getItem('snuBookTrackerData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                bookData = parsedData.map(book => ({...book, memos: book.memos || [], isDeleted: book.isDeleted || false }));
            } else {
                bookData = initialBookData;
            }

            const savedFilters = localStorage.getItem('snuBookTrackerFilters');
            if(savedFilters) {
                const parsedFilters = JSON.parse(savedFilters);
                activeSourceFilter = parsedFilters.activeSourceFilter || 'All';
                activeCategoryFilter = parsedFilters.activeCategoryFilter || 'All';
                activeStageFilter = parsedFilters.activeStageFilter || 'All';
                activeStatusFilter = parsedFilters.activeStatusFilter || 'All';
            }
        };

        const updateStatistics = () => {
            const totalBooks = bookData.filter(b => !b.isDeleted).length;
            const completedCount = bookData.filter(b => b.completionDate && !b.isDeleted).length;
            const readingCount = bookData.filter(b => b.startDate && !b.completionDate && !b.isDeleted).length;
            const tbrCount = totalBooks - completedCount - readingCount;
            const progressPercentage = totalBooks > 0 ? (completedCount / totalBooks) * 100 : 0;

            document.getElementById('completed-count').textContent = completedCount;
            document.getElementById('reading-count').textContent = readingCount;
            document.getElementById('tbr-count').textContent = tbrCount;
            document.getElementById('progress-text').textContent = `${completedCount} / ${totalBooks}`;
            document.getElementById('progress-bar').style.width = `${progressPercentage}%`;
        };
        
        const applyFilters = () => {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            let filteredBooks = bookData.filter(b => !b.isDeleted);

            // 1. Source Filter
            if (activeSourceFilter === 'SNU') {
                filteredBooks = filteredBooks.filter(book => !book.isUserAdded);
            } else if (activeSourceFilter === 'MyBooks') {
                filteredBooks = filteredBooks.filter(book => book.isUserAdded);
            }

            // 2. Category Filter
            if (activeCategoryFilter !== 'All') {
                filteredBooks = filteredBooks.filter(book => book.category === activeCategoryFilter);
            }
            
            // 3. Stage Filter
            if (activeStageFilter !== 'All') {
                 filteredBooks = filteredBooks.filter(book => book.stage == activeStageFilter);
            }

            // 4. Status Filter
            if (activeStatusFilter === 'completed') {
                filteredBooks = filteredBooks.filter(book => book.completionDate);
            } else if (activeStatusFilter === 'reading') {
                filteredBooks = filteredBooks.filter(book => book.startDate && !book.completionDate);
            } else if (activeStatusFilter === 'tbr') {
                filteredBooks = filteredBooks.filter(book => !book.startDate && !book.completionDate);
            }

            // 5. Search Term Filter
            if (searchTerm) {
                filteredBooks = filteredBooks.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) || 
                    book.author.toLowerCase().includes(searchTerm)
                );
            }
            
            renderBooks(filteredBooks);
            saveData(); // Save filter state
        };

        // 2. ë„ì„œì¹´ë“œ ë Œë”ë§ í•¨ìˆ˜ë§Œ ì•„ë˜ì²˜ëŸ¼ êµì²´
const renderBooks = (booksToRender) => {
    const bookListContainer = document.getElementById('book-list');
    const groupedByStage = booksToRender.reduce((acc, book) => {
        (acc[book.stage] = acc[book.stage] || []).push(book);
        return acc;
    }, {});

    bookListContainer.innerHTML = '';

    if (Object.keys(groupedByStage).length === 0) {
        bookListContainer.innerHTML = `<p class="text-center text-stone-500 py-8">í‘œì‹œí•  ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
        return;
    }

    Object.keys(groupedByStage).sort((a,b) => a-b).forEach(stage => {
        const stageDiv = document.createElement('div');
        stageDiv.id = `stage-${stage}`;
        stageDiv.className = 'scroll-mt-24';

        const stageHeader = `
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-teal-700">${stageInfo[stage].name}</h3>
                <p class="text-stone-600 mt-2">${stageInfo[stage].description}</p>
            </div>
        `;

        const booksGrid = document.createElement('div');
        booksGrid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';

        groupedByStage[stage].forEach(book => {
            const bookCard = document.createElement('div');
            let cardBg = 'bg-stone-100';
            if (book.completionDate) cardBg = 'bg-teal-50';
            else if (book.startDate) cardBg = 'bg-amber-50';

            // ì œëª© ì˜† ìƒíƒœì•„ì´ì½˜: ê¸°ë¡ ìˆì„ ë•Œë§Œ
            let statusIcon = '';
            if (book.completionDate) statusIcon = 'âœ…';
            else if (book.startDate) statusIcon = 'ğŸ”–';

            // ì¹´ë“œ ê¸°ë³¸ ë³´ë” 1px #cfcfce, hover ì‹œ ì´ˆë¡ìƒ‰
            bookCard.className = `book-card ${cardBg} p-4 rounded-lg shadow-sm border border-[#cfcfce] hover:border-green-600 transition-all duration-300 cursor-pointer`;

            // í‘œì§€/ì•„ì´ì½˜ ì˜ì—­
            let coverHtml = '';
            if (book.cover) {
                // í‘œì§€ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ì˜¤ë¥¸ìª½ì— ì„¸ë¡œë¡œ í¬ê²Œ(ì œëª©, ì €ì, ì¶œíŒì‚¬ 3ì¤„ ë†’ì´ì™€ ë§ì¶¤)
                coverHtml = `
                    <div class="flex items-start h-full">
                        <div class="flex-1 min-w-0 flex flex-col justify-between">
                            <div class="flex items-center mb-1">
                                <h4 class="font-bold text-lg text-stone-800 truncate">${book.title}</h4>
                                ${statusIcon ? `<span class="ml-2 text-xl">${statusIcon}</span>` : ''}
                            </div>
                            <p class="text-stone-600 text-sm truncate">${book.author}</p>
                            <p class="text-stone-500 text-xs truncate">ì¶œíŒì‚¬: ${book.publisher || 'ì •ë³´ ì—†ìŒ'}</p>
                            <p class="text-stone-500 text-xs mt-1 line-clamp-2 flex-grow">${book.guide || 'ê°€ì´ë“œ ì •ë³´ ì—†ìŒ'}</p>
                        </div>
                        <div class="flex-shrink-0 flex items-start ml-4">
                            <img src="${book.cover}" alt="ì±… í‘œì§€" class="w-24 h-32 object-cover rounded shadow border border-stone-200" />
                        </div>
                    </div>
                `;
            } else {
                // í‘œì§€ ì´ë¯¸ì§€ ì—†ìœ¼ë©´ ê¸°ì¡´ ì•„ì´ì½˜
                coverHtml = `
                    <div class="flex items-start h-full">
                        <div class="flex-1 min-w-0 flex flex-col justify-between">
                            <div class="flex items-center mb-1">
                                <h4 class="font-bold text-lg text-stone-800 truncate">${book.title}</h4>
                                ${statusIcon ? `<span class="ml-2 text-xl">${statusIcon}</span>` : ''}
                            </div>
                            <p class="text-stone-600 text-sm truncate">${book.author}</p>
                            <p class="text-stone-500 text-xs truncate">ì¶œíŒì‚¬: ${book.publisher || 'ì •ë³´ ì—†ìŒ'}</p>
                            <p class="text-stone-500 text-xs mt-1 line-clamp-2 flex-grow">${book.guide || 'ê°€ì´ë“œ ì •ë³´ ì—†ìŒ'}</p>
                        </div>
                        <div class="flex-shrink-0 flex items-start ml-4">
                            <span class="block">${coloredBookIcon}</span>
                        </div>
                    </div>
                `;
            }

            bookCard.innerHTML = coverHtml;
            bookCard.addEventListener('click', () => openModal(book));
            booksGrid.appendChild(bookCard);
        });

        stageDiv.innerHTML = stageHeader;
        stageDiv.appendChild(booksGrid);
        bookListContainer.appendChild(stageDiv);
    });
};

        const openModal = (book) => {
            currentEditingBookId = book.id;
            document.getElementById('modal-stage').textContent = stageInfo[book.stage].name;
            document.getElementById('modal-title').textContent = book.title;
            document.getElementById('modal-author').textContent = book.author;
            document.getElementById('modal-guide').textContent = book.guide;
            document.getElementById('modal-publisher').textContent = `ëŒ€í‘œ ì¶œíŒì‚¬: ${book.publisher}`;
            document.getElementById('start-date').value = book.startDate || '';
            document.getElementById('completion-date').value = book.completionDate || '';

            // í‘œì§€ ì´ë¯¸ì§€ ì˜ì—­ ì¶”ê°€
            let coverHtml = '';
            if (book.cover) {
                coverHtml = `<img src="${book.cover}" alt="ì±… í‘œì§€" class="w-32 h-44 object-cover rounded shadow border border-stone-200 mx-auto mb-4" />`;
            } else {
                coverHtml = `<div class="flex justify-center mb-4">
                    <svg class="w-16 h-16 text-stone-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" stroke-width="2"/><path d="M8 4v16M16 4v16" stroke-width="2"/></svg>
                </div>`;
            }
            // í‘œì§€ ì´ë¯¸ì§€ë¥¼ ëª¨ë‹¬ ë‚´ìš© ìµœìƒë‹¨ì— ë™ì ìœ¼ë¡œ ì‚½ì…
            const modalContent = document.getElementById('modal-content').querySelector('.p-6.md\\:p-8.overflow-y-auto');
            if (modalContent) {
                let oldCover = modalContent.querySelector('.modal-cover-image');
                if (oldCover) oldCover.remove();
                const coverDiv = document.createElement('div');
                coverDiv.className = 'modal-cover-image';
                coverDiv.innerHTML = coverHtml;
                modalContent.insertBefore(coverDiv, modalContent.firstChild);
            }

            renderMemos(book.memos);

            const modal = document.getElementById('modal');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContentDiv = document.getElementById('modal-content');
            
            modal.classList.remove('hidden');
            modalBackdrop.classList.remove('hidden');
            modalContentDiv.classList.remove('modal-leave-active', 'modal-enter');
            modalBackdrop.classList.remove('backdrop-leave-active', 'backdrop-enter');
            
            requestAnimationFrame(() => {
                modalContentDiv.classList.add('modal-enter-active');
                modalBackdrop.classList.add('backdrop-enter-active');
            });
        };

        const closeModal = () => {
            const modal = document.getElementById('modal');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContent = document.getElementById('modal-content');

            modalContent.classList.replace('modal-enter-active', 'modal-leave-active');
            modalBackdrop.classList.replace('backdrop-enter-active', 'backdrop-leave-active');

            setTimeout(() => {
                modal.classList.add('hidden');
                modalBackdrop.classList.add('hidden');
                currentEditingBookId = null;
            }, 200);
        };

        const openAddBookModal = () => {
            populateCategorySelect();

            const modal = document.getElementById('add-book-modal');
            const modalBackdrop = document.getElementById('add-book-modal-backdrop');
            const modalContent = document.getElementById('add-book-modal-content');
            modal.classList.remove('hidden');
            modalBackdrop.classList.remove('hidden');
            modalContent.classList.remove('modal-leave-active', 'modal-enter');
            modalBackdrop.classList.remove('backdrop-leave-active', 'backdrop-enter');
            requestAnimationFrame(() => {
                modalContent.classList.add('modal-enter-active');
                modalBackdrop.classList.add('backdrop-enter-active');
            });
        };

        const closeAddBookModal = () => {
            const modal = document.getElementById('add-book-modal');
            const modalBackdrop = document.getElementById('add-book-modal-backdrop');
            const modalContent = document.getElementById('add-book-modal-content');
            modalContent.classList.replace('modal-enter-active', 'modal-leave-active');
            modalBackdrop.classList.replace('backdrop-enter-active', 'backdrop-leave-active');
            setTimeout(() => {
                modal.classList.add('hidden');
                modalBackdrop.classList.add('hidden');
            }, 200);
        };

        const handleSaveDates = async () => {
            if (currentEditingBookId === null) return;
            const bookIndex = bookData.findIndex(b => b.id === currentEditingBookId);
            if (bookIndex === -1) return;

            const startDate = document.getElementById('start-date').value;
            const completionDate = document.getElementById('completion-date').value;

            bookData[bookIndex].startDate = startDate || null;
            bookData[bookIndex].completionDate = completionDate || null;
            
            await saveData();
            updateStatistics();
            applyFilters();
            closeModal();
        };
        
        const handleAddNewBook = async () => {
            const title = document.getElementById('new-book-title').value.trim();
            const author = document.getElementById('new-book-author').value.trim();
            if (!title || !author) {
                alert('ì œëª©ê³¼ ì €ìëŠ” í•„ìˆ˜ í•­ëª©ì…ë‹ˆë‹¤.');
                return;
            }
            const bookType = document.querySelector('input[name="book-type"]:checked').value;
            let stage = 0;
            let isUserAdded = true;
            if (bookType === 'snu') {
                stage = parseInt(document.getElementById('new-book-stage').value, 10);
                isUserAdded = false;
            }
            let category = document.getElementById('new-book-category-select').value;
            if (category === 'add-new') {
                category = document.getElementById('new-book-category-input').value.trim();
                if (!category) {
                    alert('ìƒˆ ë¶„ì•¼ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
            }
            const cover = document.getElementById('new-book-cover').value.trim();

            const newBook = {
                id: Date.now(),
                stage: stage,
                title: title,
                author: author,
                publisher: document.getElementById('new-book-publisher').value.trim(),
                category: category,
                guide: document.getElementById('new-book-guide').value.trim(),
                cover: cover || '', // í‘œì§€ ì´ë¯¸ì§€ URL ì €ì¥
                startDate: null,
                completionDate: null,
                memos: [],
                isUserAdded: isUserAdded,
                isDeleted: false
            };

            bookData.push(newBook);
            await saveData();
            updateStatistics();
            setupFilterDropdowns();
            applyFilters();
            closeAddBookModal();

            // Clear form
            document.getElementById('new-book-title').value = '';
            document.getElementById('new-book-author').value = '';
            document.getElementById('new-book-publisher').value = '';
            document.getElementById('new-book-guide').value = '';
            document.getElementById('new-book-category-input').value = '';
            document.getElementById('new-book-category-input').classList.add('hidden');
            document.getElementById('new-book-category-select').classList.remove('hidden');
            document.getElementById('new-book-cover').value = '';
        };

        const renderMemos = (memos) => {
            const memoList = document.getElementById('memo-list');
            memoList.innerHTML = '';
            if (!memos || memos.length === 0) {
                memoList.innerHTML = `<p class="text-center text-sm text-stone-400">ì•„ì§ ê¸°ë¡ëœ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
                return;
            }

            memos.sort((a,b) => new Date(b.date) - new Date(a.date)).forEach(memo => {
                const memoEl = document.createElement('div');
                memoEl.className = 'bg-stone-100 p-3 rounded-lg';
                memoEl.innerHTML = `
                    <p class="text-stone-700">${memo.content}</p>
                    <div class="text-xs text-stone-500 mt-2 flex justify-between items-center">
                        <span>${new Date(memo.date).toLocaleDateString()}</span>
                        <div>
                            <button class="edit-memo-btn text-blue-600 hover:underline" data-memo-id="${memo.id}">ìˆ˜ì •</button>
                            <button class="delete-memo-btn text-red-600 hover:underline ml-2" data-memo-id="${memo.id}">ì‚­ì œ</button>
                        </div>
                    </div>
                `;
                memoList.appendChild(memoEl);
            });

            document.querySelectorAll('.delete-memo-btn').forEach(btn => {
                btn.addEventListener('click', (e) => handleDeleteMemo(e.target.dataset.memoId));
            });
            document.querySelectorAll('.edit-memo-btn').forEach(btn => {
                btn.addEventListener('click', (e) => handleEditMemo(e.target.dataset.memoId, e.target.closest('.bg-stone-100')));
            });
        };

        const handleAddMemo = async () => {
            const memoInput = document.getElementById('memo-input');
            const content = memoInput.value.trim();
            if (!content || currentEditingBookId === null) return;

            const book = bookData.find(b => b.id === currentEditingBookId);
            const newMemo = {
                id: Date.now().toString(),
                date: new Date().toISOString(),
                content: content
            };
            book.memos.push(newMemo);
            await saveData();
            renderMemos(book.memos);
            memoInput.value = '';
        };

        const handleDeleteMemo = async (memoId) => {
            const book = bookData.find(b => b.id === currentEditingBookId);
            book.memos = book.memos.filter(m => m.id !== memoId);
            await saveData();
            renderMemos(book.memos);
        };

        const handleEditMemo = (memoId, memoElement) => {
            const memo = bookData.find(b => b.id === currentEditingBookId).memos.find(m => m.id === memoId);
            const p = memoElement.querySelector('p');
            
            const input = document.createElement('input');
            input.type = 'text';
            input.value = memo.content;
            input.className = 'w-full p-1 border rounded';

            const saveBtn = document.createElement('button');
            saveBtn.textContent = 'ì €ì¥';
            saveBtn.className = 'text-green-600 hover:underline';
            saveBtn.onclick = () => handleSaveMemo(memoId, input.value, memoElement);

            const cancelBtn = document.createElement('button');
            cancelBtn.textContent = 'ì·¨ì†Œ';
            cancelBtn.className = 'text-stone-600 hover:underline ml-2';
            cancelBtn.onclick = () => renderMemos(bookData.find(b => b.id === currentEditingBookId).memos);

            p.replaceWith(input);
            input.focus();
            memoElement.querySelector('.flex.justify-between div').innerHTML = '';
            memoElement.querySelector('.flex.justify-between div').append(saveBtn, cancelBtn);
        };

        const handleSaveMemo = async (memoId, newContent) => {
            const book = bookData.find(b => b.id === currentEditingBookId);
            const memo = book.memos.find(m => m.id === memoId);
            memo.content = newContent;
            await saveData();
            renderMemos(book.memos);
        };

        const setupFilterDropdowns = () => {
            const sourceDD = document.getElementById('source-filter-dropdown');
            const categoryDD = document.getElementById('category-filter-dropdown');
            const stageDD = document.getElementById('stage-filter-dropdown');

            // Source Dropdown
            sourceDD.innerHTML = `
                <option value="All">ì¶œì²˜: ì „ì²´</option>
                <option value="SNU">ì„œìš¸ëŒ€ ì¶”ì²œ</option>
                <option value="MyBooks">ë‚´ê°€ ì¶”ê°€í•œ ì±…</option>
            `;
            sourceDD.value = activeSourceFilter;

            // Category Dropdown
            const categories = ['ì¢…êµ', ...new Set(bookData.map(b => b.category))].filter(Boolean);
            categoryDD.innerHTML = `<option value="All">ë¶„ì•¼: ì „ì²´</option>`;
            [...new Set(categories)].forEach(cat => {
                categoryDD.innerHTML += `<option value="${cat}">${cat}</option>`;
            });
            categoryDD.value = activeCategoryFilter;

            // Stage Dropdown
            stageDD.innerHTML = `<option value="All">ë‹¨ê³„: ì „ì²´</option>`;
            Object.keys(stageInfo).filter(key => key > 0).forEach(key => {
                 stageDD.innerHTML += `<option value="${key}">${stageInfo[key].name}</option>`;
            });
            stageDD.value = activeStageFilter;
        };
        
        const populateCategorySelect = () => {
            const categorySelect = document.getElementById('new-book-category-select');
            const categories = ['ì¢…êµ', ...new Set(bookData.map(b => b.category))].filter(c => c && c !== '(ì£¼ì œ)');
            categorySelect.innerHTML = [...new Set(categories)].map(c => `<option value="${c}">${c}</option>`).join('');
            categorySelect.innerHTML += `<option value="add-new">ì§ì ‘ ì¶”ê°€...</option>`;
        };


        document.addEventListener('DOMContentLoaded', async () => {
            loadData();
            await initFirebase(); // Firebase ì´ˆê¸°í™” ì¶”ê°€
            
            const searchInput = document.getElementById('search-input');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const saveDatesBtn = document.getElementById('save-dates-btn');
            const addMemoBtn = document.getElementById('add-memo-btn');
            const addNewBookBtn = document.getElementById('add-new-book-btn-header');
            const addBookModalCloseBtn = document.getElementById('add-book-modal-close-btn');
            const addBookModalBackdrop = document.getElementById('add-book-modal-backdrop');
            const addBookCancelBtn = document.getElementById('add-book-cancel-btn');
            const addBookSaveBtn = document.getElementById('add-book-save-btn');
            
            const statisticsToggle = document.getElementById('statistics-toggle');
            const statisticsContent = document.getElementById('statistics-content');
            const statisticsArrow = document.getElementById('statistics-arrow');
            
            const dashboardToggle = document.getElementById('dashboard-toggle');
            const dashboardContent = document.getElementById('dashboard-content');
            const dashboardArrow = document.getElementById('dashboard-arrow');

            const explorerToggle = document.getElementById('explorer-toggle');
            const explorerContent = document.getElementById('explorer-content');
            const explorerArrow = document.getElementById('explorer-arrow');

            const sourceFilterDD = document.getElementById('source-filter-dropdown');
            const categoryFilterDD = document.getElementById('category-filter-dropdown');
            const stageFilterDD = document.getElementById('stage-filter-dropdown');
            
            const newBookCategorySelect = document.getElementById('new-book-category-select');
            const newBookCategoryInput = document.getElementById('new-book-category-input');

            searchInput.addEventListener('input', applyFilters);
            sourceFilterDD.addEventListener('change', (e) => { activeSourceFilter = e.target.value; applyFilters(); });
            categoryFilterDD.addEventListener('change', (e) => { activeCategoryFilter = e.target.value; applyFilters(); });
            stageFilterDD.addEventListener('change', (e) => { activeStageFilter = e.target.value; applyFilters(); });

            // Status filter listeners
            document.querySelectorAll('.status-filter').forEach(el => {
                el.addEventListener('click', (e) => {
                    const currentTarget = e.currentTarget;
                    const status = currentTarget.id.split('-')[2];
                    
                    if (currentTarget.classList.contains('active')) {
                        activeStatusFilter = 'All';
                        currentTarget.classList.remove('active');
                    } else {
                        document.querySelectorAll('.status-filter').forEach(elem => elem.classList.remove('active'));
                        activeStatusFilter = status;
                        currentTarget.classList.add('active');
                    }
                    applyFilters();
                });
            });
            
            // Details Modal listeners
            modalCloseBtn.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', closeModal);
            saveDatesBtn.addEventListener('click', handleSaveDates);
            addMemoBtn.addEventListener('click', handleAddMemo);
            document.getElementById('memo-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleAddMemo();
            });

            // Add Book Modal listeners
            addNewBookBtn.addEventListener('click', openAddBookModal);
            addBookModalCloseBtn.addEventListener('click', closeAddBookModal);
            addBookModalBackdrop.addEventListener('click', closeAddBookModal);
            addBookCancelBtn.addEventListener('click', closeAddBookModal);
            addBookSaveBtn.addEventListener('click', handleAddNewBook);
            document.querySelectorAll('input[name="book-type"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const stageContainer = document.getElementById('new-book-stage-container');
                    if (e.target.value === 'snu') {
                        stageContainer.classList.remove('hidden');
                    } else {
                        stageContainer.classList.add('hidden');
                    }
                });
            });
            newBookCategorySelect.addEventListener('change', (e) => {
                if (e.target.value === 'add-new') {
                    newBookCategorySelect.classList.add('hidden');
                    newBookCategoryInput.classList.remove('hidden');
                    newBookCategoryInput.focus();
                } else {
                    newBookCategorySelect.classList.remove('hidden');
                    newBookCategoryInput.classList.add('hidden');
                }
            });

            // Accordion listeners
            statisticsToggle.addEventListener('click', () => {
                statisticsContent.classList.toggle('open');
                statisticsArrow.classList.toggle('rotate-180');
            });
            dashboardToggle.addEventListener('click', () => {
                dashboardContent.classList.toggle('open');
                dashboardArrow.classList.toggle('rotate-180');
            });
            explorerToggle.addEventListener('click', () => {
                explorerContent.classList.toggle('open');
                explorerArrow.classList.toggle('rotate-180');
            });

            // ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€ ê¸°ëŠ¥
            function toggleSectionVisibility(sectionName) {
                sectionVisibility[sectionName] = !sectionVisibility[sectionName];
                updateSectionDisplay(sectionName);
                updateEyeIcon(sectionName);
                updateMobileToggle(sectionName);
                updateNavButton(sectionName);
            }

            function updateSectionDisplay(sectionName) {
                const section = document.getElementById(`${sectionName}-accordion`);
                const isMobile = window.innerWidth < 768;
                
                if (sectionVisibility[sectionName]) {
                    if (isMobile) {
                        section.classList.remove('mobile-hidden');
                    }
                    section.style.display = 'block';
                } else {
                    if (isMobile) {
                        section.classList.add('mobile-hidden');
                    } else {
                        section.style.display = 'none';
                    }
                }
            }

            function updateEyeIcon(sectionName) {
                const eyeIcon = document.getElementById(`${sectionName}-eye`);
                if (sectionVisibility[sectionName]) {
                    eyeIcon.classList.remove('hidden-state');
                    eyeIcon.innerHTML = `
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    `;
                } else {
                    eyeIcon.classList.add('hidden-state');
                    eyeIcon.innerHTML = `
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21" />
                    `;
                }
            }

            function updateMobileToggle(sectionName) {
                const mobileToggle = document.getElementById(`mobile-${sectionName}-toggle`);
                if (mobileToggle) {
                    mobileToggle.checked = sectionVisibility[sectionName];
                }
            }

            function updateNavButton(sectionName) {
                const navBtn = document.getElementById(`nav-${sectionName}-btn`);
                if (navBtn) {
                    navBtn.classList.remove('active', 'inactive');
                    if (sectionVisibility[sectionName]) {
                        navBtn.classList.add('active');
                    } else {
                        navBtn.classList.add('inactive');
                    }
                }
            }

            function initializeMobileVisibility() {
                const isMobile = window.innerWidth < 768;
                if (isMobile) {
                    // ëª¨ë°”ì¼ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¹€
                    sectionVisibility = { explorer: false, statistics: false, dashboard: false };
                }
                Object.keys(sectionVisibility).forEach(section => {
                    updateSectionDisplay(section);
                    updateEyeIcon(section);
                    updateMobileToggle(section);
                    updateNavButton(section);
                });
            }

            // ëˆˆ ì•„ì´ì½˜ í´ë¦­ ì´ë²¤íŠ¸
            document.getElementById('explorer-eye').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleSectionVisibility('explorer');
            });
            document.getElementById('statistics-eye').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleSectionVisibility('statistics');
            });
            document.getElementById('dashboard-eye').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleSectionVisibility('dashboard');
            });

            // ëª¨ë°”ì¼ í† ê¸€ ìŠ¤ìœ„ì¹˜ ì´ë²¤íŠ¸
            document.getElementById('mobile-explorer-toggle').addEventListener('change', () => {
                toggleSectionVisibility('explorer');
            });
            document.getElementById('mobile-statistics-toggle').addEventListener('change', () => {
                toggleSectionVisibility('statistics');
            });
            document.getElementById('mobile-dashboard-toggle').addEventListener('change', () => {
                toggleSectionVisibility('dashboard');
            });

            // ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('nav-explorer-btn').addEventListener('click', () => {
                toggleSectionVisibility('explorer');
            });
            document.getElementById('nav-statistics-btn').addEventListener('click', () => {
                toggleSectionVisibility('statistics');
            });
            document.getElementById('nav-dashboard-btn').addEventListener('click', () => {
                toggleSectionVisibility('dashboard');
            });

            // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€
            window.addEventListener('resize', () => {
                const isMobile = window.innerWidth < 768;
                Object.keys(sectionVisibility).forEach(section => {
                    updateSectionDisplay(section);
                });
            });

            // í–„ë²„ê±° ë©”ë‰´ í† ê¸€
            document.getElementById('hamburger-btn').addEventListener('click', () => {
                const mobileMenu = document.getElementById('mobile-menu');
                mobileMenu.classList.toggle('hidden');
            });

            // ì´ˆê¸° ëª¨ë°”ì¼ ì„¤ì •
            initializeMobileVisibility();
            

            const setupCharts = () => {
                const officialBooks = bookData.filter(b => !b.isUserAdded);
                if (officialBooks.length === 0) return;

                const stageCounts = officialBooks.reduce((acc, book) => {
                    const stageName = `Stage ${book.stage}`;
                    acc[stageName] = (acc[stageName] || 0) + 1;
                    return acc;
                }, {});

                const categoryCounts = officialBooks.reduce((acc, book) => {
                    acc[book.category] = (acc[book.category] || 0) + 1;
                    return acc;
                }, {});

                const stageChartCtx = document.getElementById('stageChart').getContext('2d');
                new Chart(stageChartCtx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(stageCounts).map(key => stageInfo[key.split(' ')[1]].name.split(':')[0]),
                        datasets: [{
                            label: 'ë„ì„œ ìˆ˜',
                            data: Object.values(stageCounts),
                            backgroundColor: ['#145c70', '#2e869c', '#53b4cf', '#83d3e8', '#b2e2ef'],
                            hoverOffset: 4
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
                });

                const categoryChartCtx = document.getElementById('categoryChart').getContext('2d');
                new Chart(categoryChartCtx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(categoryCounts),
                        datasets: [{
                            label: 'ë„ì„œ ìˆ˜',
                            data: Object.values(categoryCounts),
                            backgroundColor: '#2e869c',
                            borderColor: '#145c70',
                            borderWidth: 1
                        }]
                    },
                    options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
                });
            };
            
            setupFilterDropdowns();
            applyFilters();
            setupCharts();
            updateStatistics();
        });

        // ì„¤ì •(í†±ë‹ˆë°”í€´) í´ë¦­ ì‹œ ë„ì„œëª©ë¡ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™
        document.getElementById('admin-settings-btn').addEventListener('click', () => {
            document.getElementById('main-content-view').classList.add('hidden');
            document.getElementById('admin-view').classList.remove('hidden');
            // ìƒë‹¨ ë„¤ë¹„/ë²„íŠ¼ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('nav.md\\:flex > *').forEach(el => el.classList.add('hidden'));
            
            // ê´€ë¦¬ì í•„í„° ì´ˆê¸°í™” ë° ëª©ë¡ í‘œì‹œ
            adminSourceFilter = "All";
            adminSearchTerm = "";
            document.getElementById('admin-source-dropdown').value = "All";
            document.getElementById('admin-search-input').value = "";
            renderAdminBookList();
        });

        // "ì„œìš¸ëŒ€ì¶”ì²œë„ì„œ100" í´ë¦­ ì‹œ í™ˆ(ì²˜ìŒí™”ë©´)ìœ¼ë¡œ ë³µê·€ + ìƒë‹¨ ë„¤ë¹„/ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
        document.getElementById('home-btn').addEventListener('click', () => {
            document.getElementById('admin-view').classList.add('hidden');
            document.getElementById('main-content-view').classList.remove('hidden');
            // ìƒë‹¨ ë„¤ë¹„/ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
            document.querySelectorAll('nav.md\\:flex > *').forEach(el => el.classList.remove('hidden'));
        });

        // ê´€ë¦¬ì ê²€ìƒ‰ ìƒíƒœ
        let adminSearchTerm = "";
        let adminSourceFilter = "All";

        // ê´€ë¦¬ì í…Œì´ë¸” ë Œë”ë§ (ê²€ìƒ‰, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ í¬í•¨)
        function renderAdminBookList() {
            const tbody = document.getElementById('admin-book-list');
            tbody.innerHTML = '';
            let filtered = bookData.filter(b => !b.isDeleted);

            // ì¶œì²˜ í•„í„°
            if (adminSourceFilter === "SNU") {
                filtered = filtered.filter(book => !book.isUserAdded);
            } else if (adminSourceFilter === "MyBooks") {
                filtered = filtered.filter(book => book.isUserAdded);
            }

            // ê²€ìƒ‰ì–´ í•„í„°
            if (adminSearchTerm) {
                const term = adminSearchTerm.toLowerCase();
                filtered = filtered.filter(b =>
                    (b.title && b.title.toLowerCase().includes(term)) ||
                    (b.author && b.author.toLowerCase().includes(term))
                );
            }

            filtered.forEach(book => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="px-3 py-2">${book.id}</td>
                    <td class="px-3 py-2">${book.title}</td>
                    <td class="px-3 py-2">${book.author}</td>
                    <td class="px-3 py-2">${book.stage || ''}</td>
                    <td class="px-3 py-2">${book.category || ''}</td>
                    <td class="px-3 py-2">${book.publisher || ''}</td>
                    <td class="px-3 py-2 flex gap-2">
                        <button class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 admin-edit-btn" data-id="${book.id}">ìˆ˜ì •</button>
                        <button class="bg-stone-400 text-white px-3 py-1 rounded hover:bg-stone-600 admin-delete-btn" data-id="${book.id}">ì‚­ì œ</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // ìˆ˜ì • ë²„íŠ¼ ì´ë²¤íŠ¸
            document.querySelectorAll('.admin-edit-btn').forEach(btn => {
                btn.onclick = function() {
                    const id = Number(this.dataset.id);
                    const book = bookData.find(b => b.id === id);
                    if (!book) return;
                    document.getElementById('add-book-modal-title').textContent = 'ë„ì„œ ì •ë³´ ìˆ˜ì •';
                    document.getElementById('new-book-title').value = book.title;
                    document.getElementById('new-book-author').value = book.author;
                    document.getElementById('new-book-publisher').value = book.publisher || '';
                    document.getElementById('new-book-guide').value = book.guide || '';
                    document.getElementById('new-book-category-input').value = '';
                    document.getElementById('new-book-category-input').classList.add('hidden');
                    document.getElementById('new-book-category-select').classList.remove('hidden');
                    document.getElementById('new-book-category-select').value = book.category || '';
                    document.getElementById('new-book-cover').value = book.cover || '';
                    if (book.stage) {
                        document.querySelector('input[name="book-type"][value="snu"]').checked = true;
                        document.getElementById('new-book-stage-container').classList.remove('hidden');
                        document.getElementById('new-book-stage').value = book.stage;
                    } else {
                        document.querySelector('input[name="book-type"][value="my"]').checked = true;
                        document.getElementById('new-book-stage-container').classList.add('hidden');
                    }
                    // ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸ ì¤‘ë³µ ë°©ì§€
                    const addBookSaveBtn = document.getElementById('add-book-save-btn');
                    addBookSaveBtn.replaceWith(addBookSaveBtn.cloneNode(true)); // ì™„ì „íˆ êµì²´
                    const newAddBookSaveBtn = document.getElementById('add-book-save-btn');
                    newAddBookSaveBtn.onclick = function() {
                        const title = document.getElementById('new-book-title').value.trim();
                        const author = document.getElementById('new-book-author').value.trim();
                        if (!title || !author) {
                            alert('ì œëª©ê³¼ ì €ìëŠ” í•„ìˆ˜ í•­ëª©ì…ë‹ˆë‹¤.');
                            return;
                        }
                        let stage = 0;
                        if (document.querySelector('input[name="book-type"]:checked').value === 'snu') {
                            stage = parseInt(document.getElementById('new-book-stage').value, 10);
                        }
                        let category = document.getElementById('new-book-category-select').value;
                        if (category === 'add-new') {
                            category = document.getElementById('new-book-category-input').value.trim();
                            if (!category) {
                                alert('ìƒˆ ë¶„ì•¼ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                                return;
                            }
                        }
                        book.title = title;
                        book.author = author;
                        book.publisher = document.getElementById('new-book-publisher').value.trim();
                        book.guide = document.getElementById('new-book-guide').value.trim();
                        book.category = category;
                        book.stage = stage;
                        book.cover = document.getElementById('new-book-cover').value.trim();
                        saveData();
                        renderAdminBookList();
                        updateStatistics();
                        applyFilters();
                        closeAddBookModal();
                    };
                    openAddBookModal();
                };
            });

            // ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.querySelectorAll('.admin-delete-btn').forEach(btn => {
                btn.onclick = function() {
                    const id = Number(this.dataset.id);
                    if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
                    const book = bookData.find(b => b.id === id);
                    if (book) {
                        book.isDeleted = true;
                        saveData();
                        renderAdminBookList();
                        updateStatistics();
                        applyFilters();
                    }
                };
            });
        }

        // ì¶œì²˜ ë“œë¡­ë‹¤ìš´ ì´ë²¤íŠ¸
        document.getElementById('admin-source-dropdown').addEventListener('change', (e) => {
            adminSourceFilter = e.target.value;
            renderAdminBookList();
        });

        // ê´€ë¦¬ì ê²€ìƒ‰ ì´ë²¤íŠ¸
        document.getElementById('admin-search-btn').addEventListener('click', () => {
            adminSearchTerm = document.getElementById('admin-search-input').value.trim();
            renderAdminBookList();
        });
        document.getElementById('admin-search-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                adminSearchTerm = document.getElementById('admin-search-input').value.trim();
                renderAdminBookList();
            }
        });

        // ìƒˆ ì±… ì¶”ê°€ ë²„íŠ¼(ì¶”ê°€ ëª¨ë“œë¡œ)
        document.getElementById('add-new-book-btn-admin').addEventListener('click', () => {
            document.getElementById('add-book-modal-title').textContent = 'ìƒˆ ì±… ì¶”ê°€í•˜ê¸°';
            document.getElementById('new-book-title').value = '';
            document.getElementById('new-book-author').value = '';
            document.getElementById('new-book-publisher').value = '';
            document.getElementById('new-book-guide').value = '';
            document.getElementById('new-book-category-input').value = '';
            document.getElementById('new-book-category-input').classList.add('hidden');
            document.getElementById('new-book-category-select').classList.remove('hidden');
            document.querySelector('input[name="book-type"][value="my"]').checked = true;
            document.getElementById('new-book-stage-container').classList.add('hidden');
            // ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸ ì¤‘ë³µ ë°©ì§€
            const addBookSaveBtn = document.getElementById('add-book-save-btn');
            addBookSaveBtn.replaceWith(addBookSaveBtn.cloneNode(true)); // ì™„ì „íˆ êµì²´
            const newAddBookSaveBtn = document.getElementById('add-book-save-btn');
            newAddBookSaveBtn.onclick = handleAddNewBook;
            openAddBookModal();
        });

        // ì•„ì´ì½˜ ê´€ë¦¬ ê¸°ëŠ¥
        let currentSelectedIcon = null;
        const iconTemplates = [
            {
                name: "ê¸°ë³¸ ë„ì„œ",
                svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192" width="64" height="64">
                    <rect width="192" height="192" rx="32" fill="#0f766e"/>
                    <g transform="translate(48, 40)">
                        <rect x="0" y="0" width="96" height="112" rx="8" fill="#ffffff" stroke="#0f766e" stroke-width="2"/>
                        <rect x="12" y="16" width="72" height="4" rx="2" fill="#0f766e"/>
                        <rect x="12" y="28" width="56" height="3" rx="1.5" fill="#14b8a6"/>
                        <rect x="12" y="38" width="64" height="3" rx="1.5" fill="#14b8a6"/>
                        <text x="48" y="75" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#0f766e" text-anchor="middle">100</text>
                        <rect x="8" y="8" width="96" height="112" rx="8" fill="#ccfbf1" stroke="#5eead4" stroke-width="1" opacity="0.7"/>
                        <rect x="4" y="4" width="96" height="112" rx="8" fill="#a7f3d0" stroke="#5eead4" stroke-width="1" opacity="0.5"/>
                    </g>
                </svg>`
            },
            {
                name: "ëª¨ë˜ ë¼ì´ë¸ŒëŸ¬ë¦¬",
                svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192" width="64" height="64">
                    <rect width="192" height="192" rx="32" fill="#1e40af"/>
                    <g transform="translate(32, 32)">
                        <rect x="0" y="20" width="128" height="108" rx="8" fill="#3b82f6"/>
                        <rect x="16" y="0" width="96" height="20" rx="4" fill="#60a5fa"/>
                        <rect x="20" y="32" width="12" height="80" rx="2" fill="#dbeafe"/>
                        <rect x="36" y="32" width="12" height="80" rx="2" fill="#dbeafe"/>
                        <rect x="52" y="32" width="12" height="80" rx="2" fill="#dbeafe"/>
                        <rect x="68" y="32" width="12" height="80" rx="2" fill="#dbeafe"/>
                        <rect x="84" y="32" width="12" height="80" rx="2" fill="#dbeafe"/>
                        <rect x="100" y="32" width="12" height="80" rx="2" fill="#dbeafe"/>
                    </g>
                </svg>`
            },
            {
                name: "í´ë˜ì‹ ë¶",
                svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192" width="64" height="64">
                    <rect width="192" height="192" rx="32" fill="#7c2d12"/>
                    <g transform="translate(48, 32)">
                        <rect x="0" y="0" width="96" height="128" rx="8" fill="#fed7aa"/>
                        <rect x="8" y="8" width="80" height="8" rx="4" fill="#ea580c"/>
                        <rect x="8" y="24" width="60" height="4" rx="2" fill="#9a3412"/>
                        <rect x="8" y="32" width="70" height="4" rx="2" fill="#9a3412"/>
                        <rect x="8" y="40" width="50" height="4" rx="2" fill="#9a3412"/>
                        <circle cx="48" cy="80" r="20" fill="#ea580c"/>
                        <text x="48" y="88" font-family="serif" font-size="16" font-weight="bold" fill="#fed7aa" text-anchor="middle">ğŸ“š</text>
                    </g>
                </svg>`
            },
            {
                name: "ê·¸ë˜ë””ì–¸íŠ¸ ìŠ¤íƒ€ì¼",
                svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192" width="64" height="64">
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <rect width="192" height="192" rx="32" fill="url(#grad1)"/>
                    <g transform="translate(64, 64)">
                        <rect x="0" y="0" width="64" height="64" rx="8" fill="#ffffff" opacity="0.9"/>
                        <rect x="8" y="8" width="48" height="4" rx="2" fill="#8b5cf6"/>
                        <rect x="8" y="16" width="36" height="3" rx="1.5" fill="#06b6d4"/>
                        <rect x="8" y="24" width="42" height="3" rx="1.5" fill="#06b6d4"/>
                        <text x="32" y="45" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#8b5cf6" text-anchor="middle">100</text>
                    </g>
                </svg>`
            }
        ];

        // ì•„ì´ì½˜ ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œë“¤
        const iconModal = document.getElementById('icon-modal');
        const iconModalBackdrop = document.getElementById('icon-modal-backdrop');
        const iconModalCloseBtn = document.getElementById('icon-modal-close-btn');
        const iconManageBtn = document.getElementById('icon-manage-btn');
        const iconCancelBtn = document.getElementById('icon-cancel-btn');
        const iconApplyBtn = document.getElementById('icon-apply-btn');

        // íƒ­ ê´€ë ¨ ìš”ì†Œë“¤
        const iconTabs = document.querySelectorAll('.icon-tab');
        const iconContents = document.querySelectorAll('.icon-content');

        // ì•„ì´ì½˜ ëª¨ë‹¬ ì—´ê¸°
        function openIconModal() {
            iconModal.classList.remove('hidden');
            iconModalBackdrop.classList.remove('hidden');
            initializeIconModal();
        }

        // ì•„ì´ì½˜ ëª¨ë‹¬ ë‹«ê¸°
        function closeIconModal() {
            iconModal.classList.add('hidden');
            iconModalBackdrop.classList.add('hidden');
            currentSelectedIcon = null;
        }

        // ì•„ì´ì½˜ ëª¨ë‹¬ ì´ˆê¸°í™”
        function initializeIconModal() {
            // ê¸°ë³¸ ì•„ì´ì½˜ í‘œì‹œ
            const defaultIconDisplay = document.getElementById('default-icon-display');
            defaultIconDisplay.innerHTML = iconTemplates[0].svg.replace('width="64" height="64"', 'width="128" height="128"');
            
            // ë¯¸ë¦¬ë³´ê¸°ì— ê¸°ë³¸ ì•„ì´ì½˜ í‘œì‹œ
            const iconPreview = document.getElementById('icon-preview');
            iconPreview.innerHTML = iconTemplates[0].svg;
            currentSelectedIcon = iconTemplates[0];

            // í…œí”Œë¦¿ ì•„ì´ì½˜ë“¤ ìƒì„±
            renderTemplateIcons();
            
            // ê¸°ë³¸ íƒ­ í™œì„±í™”
            switchTab('default');
        }

        // í…œí”Œë¦¿ ì•„ì´ì½˜ë“¤ ë Œë”ë§
        function renderTemplateIcons() {
            const templatesContent = document.getElementById('content-templates');
            templatesContent.innerHTML = '';
            
            iconTemplates.forEach((template, index) => {
                const templateDiv = document.createElement('div');
                templateDiv.className = 'template-icon cursor-pointer p-3 border border-stone-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition text-center';
                templateDiv.innerHTML = `
                    ${template.svg}
                    <p class="text-xs text-stone-600 mt-2">${template.name}</p>
                `;
                templateDiv.addEventListener('click', () => selectTemplateIcon(template));
                templatesContent.appendChild(templateDiv);
            });
        }

        // í…œí”Œë¦¿ ì•„ì´ì½˜ ì„ íƒ
        function selectTemplateIcon(template) {
            const iconPreview = document.getElementById('icon-preview');
            iconPreview.innerHTML = template.svg;
            currentSelectedIcon = template;
            
            // ë‹¤ë¥¸ í…œí”Œë¦¿ë“¤ì˜ ì„ íƒ ìƒíƒœ ì œê±°
            document.querySelectorAll('.template-icon').forEach(el => {
                el.classList.remove('border-purple-500', 'bg-purple-50');
                el.classList.add('border-stone-300');
            });
            
            // í˜„ì¬ ì„ íƒëœ í…œí”Œë¦¿ ê°•ì¡°
            event.currentTarget.classList.remove('border-stone-300');
            event.currentTarget.classList.add('border-purple-500', 'bg-purple-50');
            
            // í…œí”Œë¦¿ ì ìš© ë²„íŠ¼ í™œì„±í™”
            const selectTemplateBtn = document.getElementById('select-template-icon');
            selectTemplateBtn.disabled = false;
            selectTemplateBtn.textContent = 'ì´ í…œí”Œë¦¿ ì‚¬ìš©í•˜ê¸°';
            selectTemplateBtn.classList.remove('bg-stone-400');
            selectTemplateBtn.classList.add('bg-purple-600', 'hover:bg-purple-700');
        }

        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
            iconTabs.forEach(tab => {
                tab.classList.remove('text-purple-600', 'border-purple-600');
                tab.classList.add('text-stone-500');
                tab.style.borderBottomColor = 'transparent';
            });
            
            // ëª¨ë“  ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            iconContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            const selectedTab = document.getElementById(`tab-${tabName}`);
            selectedTab.classList.remove('text-stone-500');
            selectedTab.classList.add('text-purple-600');
            selectedTab.style.borderBottomColor = '#9333ea';
            selectedTab.style.borderBottomWidth = '2px';
            
            // ì„ íƒëœ ì½˜í…ì¸  í‘œì‹œ
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
        }

        // ì»¤ìŠ¤í…€ ì•„ì´ì½˜ ìƒì„±
        function generateCustomIcon() {
            const bgColor = document.getElementById('custom-bg-color').value;
            const iconColor = document.getElementById('custom-icon-color').value;
            const text = document.getElementById('custom-text').value;
            const style = document.getElementById('custom-style').value;
            
            let iconContent = '';
            
            switch(style) {
                case 'book':
                    iconContent = `
                        <rect x="48" y="40" width="96" height="112" rx="8" fill="${iconColor}" stroke="${iconColor}" stroke-width="2"/>
                        <rect x="60" y="56" width="72" height="4" rx="2" fill="${bgColor}"/>
                        <rect x="60" y="68" width="56" height="3" rx="1.5" fill="${bgColor}"/>
                        <rect x="60" y="78" width="64" height="3" rx="1.5" fill="${bgColor}"/>
                    `;
                    break;
                case 'library':
                    iconContent = `
                        <rect x="32" y="52" width="128" height="88" rx="8" fill="${iconColor}"/>
                        <rect x="48" y="32" width="96" height="20" rx="4" fill="${iconColor}"/>
                        <rect x="52" y="64" width="12" height="60" rx="2" fill="${bgColor}"/>
                        <rect x="68" y="64" width="12" height="60" rx="2" fill="${bgColor}"/>
                        <rect x="84" y="64" width="12" height="60" rx="2" fill="${bgColor}"/>
                        <rect x="100" y="64" width="12" height="60" rx="2" fill="${bgColor}"/>
                        <rect x="116" y="64" width="12" height="60" rx="2" fill="${bgColor}"/>
                    `;
                    break;
                case 'graduation':
                    iconContent = `
                        <circle cx="96" cy="80" r="40" fill="${iconColor}"/>
                        <polygon points="96,60 76,70 96,80 116,70" fill="${bgColor}"/>
                        <rect x="94" y="80" width="4" height="40" fill="${iconColor}"/>
                        <circle cx="96" cy="124" r="8" fill="${bgColor}"/>
                    `;
                    break;
                case 'heart':
                    iconContent = `
                        <path d="M96,140 C96,140 40,100 40,70 C40,50 55,40 75,40 C85,40 96,50 96,50 C96,50 107,40 117,40 C137,40 152,50 152,70 C152,100 96,140 96,140 Z" fill="${iconColor}"/>
                    `;
                    break;
            }
            
            const customSvg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192" width="64" height="64">
                <rect width="192" height="192" rx="32" fill="${bgColor}"/>
                ${iconContent}
                ${text ? `<text x="96" y="170" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="${iconColor}" text-anchor="middle">${text}</text>` : ''}
            </svg>`;
            
            const iconPreview = document.getElementById('icon-preview');
            iconPreview.innerHTML = customSvg;
            currentSelectedIcon = { name: 'ì»¤ìŠ¤í…€ ì•„ì´ì½˜', svg: customSvg };
            
            // ì»¤ìŠ¤í…€ ì ìš© ë²„íŠ¼ í™œì„±í™”
            const selectCustomBtn = document.getElementById('select-custom-icon');
            selectCustomBtn.disabled = false;
            selectCustomBtn.textContent = 'ì´ ì»¤ìŠ¤í…€ ì•„ì´ì½˜ ì‚¬ìš©í•˜ê¸°';
            selectCustomBtn.classList.remove('bg-stone-400');
            selectCustomBtn.classList.add('bg-purple-600', 'hover:bg-purple-700');
        }

        // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        function handleFileUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const iconPreview = document.getElementById('icon-preview');
                iconPreview.innerHTML = `<img src="${e.target.result}" class="w-full h-full object-cover rounded">`;
                currentSelectedIcon = { name: 'ì—…ë¡œë“œëœ ì´ë¯¸ì§€', dataUrl: e.target.result };
                
                // ì—…ë¡œë“œ ì ìš© ë²„íŠ¼ í™œì„±í™”
                const selectUploadedBtn = document.getElementById('select-uploaded-icon');
                selectUploadedBtn.disabled = false;
                selectUploadedBtn.textContent = 'ì´ ì—…ë¡œë“œ ì´ë¯¸ì§€ ì‚¬ìš©í•˜ê¸°';
                selectUploadedBtn.classList.remove('bg-stone-400');
                selectUploadedBtn.classList.add('bg-purple-600', 'hover:bg-purple-700');
            };
            reader.readAsDataURL(file);
        }

        // ì•„ì´ì½˜ ì ìš©
        function applyIcon() {
            if (!currentSelectedIcon) {
                alert('ì•„ì´ì½˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì—¬ê¸°ì„œ ì‹¤ì œë¡œ manifest.jsonì„ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ 
            // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì•„ì´ì½˜ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
            localStorage.setItem('selectedIcon', JSON.stringify(currentSelectedIcon));
            
            alert('ì•„ì´ì½˜ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤! í™ˆí™”ë©´ì— ì¶”ê°€í•  ë•Œ ìƒˆë¡œìš´ ì•„ì´ì½˜ì´ í‘œì‹œë©ë‹ˆë‹¤.');
            closeIconModal();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
        iconManageBtn.addEventListener('click', openIconModal);
        iconModalCloseBtn.addEventListener('click', closeIconModal);
        iconModalBackdrop.addEventListener('click', closeIconModal);
        iconCancelBtn.addEventListener('click', closeIconModal);
        iconApplyBtn.addEventListener('click', applyIcon);

        // íƒ­ í´ë¦­ ì´ë²¤íŠ¸
        document.getElementById('tab-default').addEventListener('click', () => switchTab('default'));
        document.getElementById('tab-templates').addEventListener('click', () => switchTab('templates'));
        document.getElementById('tab-custom').addEventListener('click', () => switchTab('custom'));
        document.getElementById('tab-upload').addEventListener('click', () => switchTab('upload'));

        // ê¸°ë³¸ ì•„ì´ì½˜ ì„ íƒ
        document.getElementById('select-default-icon').addEventListener('click', () => {
            currentSelectedIcon = iconTemplates[0];
            const iconPreview = document.getElementById('icon-preview');
            iconPreview.innerHTML = iconTemplates[0].svg;
        });

        // í…œí”Œë¦¿ ì•„ì´ì½˜ ì ìš©
        document.getElementById('select-template-icon').addEventListener('click', () => {
            if (currentSelectedIcon) {
                applyIcon();
            }
        });

        // ì»¤ìŠ¤í…€ ì•„ì´ì½˜ ì ìš©
        document.getElementById('select-custom-icon').addEventListener('click', () => {
            if (currentSelectedIcon) {
                applyIcon();
            }
        });

        // ì—…ë¡œë“œ ì•„ì´ì½˜ ì ìš©
        document.getElementById('select-uploaded-icon').addEventListener('click', () => {
            if (currentSelectedIcon) {
                applyIcon();
            }
        });

        // ì»¤ìŠ¤í…€ ì•„ì´ì½˜ ìƒì„±
        document.getElementById('generate-custom-icon').addEventListener('click', generateCustomIcon);
        
        // ìƒ‰ìƒ ì…ë ¥ ë™ê¸°í™”
        document.getElementById('custom-bg-color').addEventListener('change', function() {
            document.getElementById('custom-bg-text').value = this.value;
        });
        document.getElementById('custom-bg-text').addEventListener('input', function() {
            document.getElementById('custom-bg-color').value = this.value;
        });
        document.getElementById('custom-icon-color').addEventListener('change', function() {
            document.getElementById('custom-icon-text').value = this.value;
        });
        document.getElementById('custom-icon-text').addEventListener('input', function() {
            document.getElementById('custom-icon-color').value = this.value;
        });

        // íŒŒì¼ ì—…ë¡œë“œ
        document.getElementById('upload-btn').addEventListener('click', () => {
            document.getElementById('icon-file-input').click();
        });
        document.getElementById('icon-file-input').addEventListener('change', function() {
            if (this.files && this.files[0]) {
                handleFileUpload(this.files[0]);
            }
        });
    </script>
</body>
</html>
